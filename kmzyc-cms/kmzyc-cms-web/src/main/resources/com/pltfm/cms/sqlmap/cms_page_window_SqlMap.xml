<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="CMS_PAGE_WINDOW" >
  <resultMap id="abatorgenerated_CmsPageWindowResult" class="com.pltfm.cms.vobject.CmsPageWindow" >

    <result column="PAGE_WINDOW_ID" property="pageWindowId"/>
    <result column="PAGE_ID" property="pageId"/>
    <result column="WINDOW_ID" property="windowId"  />
    <result column="SORT" property="sort"/>
    <result column="REMARK" property="remark" />
    <result column="STATUS" property="status" />
    <result column="CREATE_DATE" property="createDate" />
    <result column="CREATED" property="created" />
    <result column="MODIFY_DATE" property="modifyDate"  />
    <result column="MODIFIED" property="modified"  />
  </resultMap>
  
  <!--查询对象  -->
  <resultMap id="abatorgenerated_CmsPageWindowQry" class="com.pltfm.cms.vobject.CmsPageWindowQry" >
  
    
     <result column="winId" property="winId"  />
    <result column="winName" property="winName"  />
    <result column="winPath" property="winPath"/>
    
   
  <!--window对象  -->
  </resultMap>
  <resultMap id="abatorgenerated_CmsWindowResult" class="com.pltfm.cms.vobject.CmsWindow" >
  
    <result column="winId" property="windowId" />
    <result column="templateId" property="templateId" />
    <result column="winName" property="name" />
    <result column="winPath" property="path" />
    <result column="paramsType" property="paramsType" />
    <result column="siteId" property="siteId" />
  </resultMap>
  <sql id="abatorgenerated_Example_Where_Clause" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Sep 04 10:32:41 CST 2013.
    -->
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate" >
      <isEqual property="oredCriteria[].valid" compareValue="true" >
        (
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and" >
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and" >
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and" >
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction="," >
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and" >
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  <!-- 根据页面ID或窗口ID查询 -->
  <select id="abatorgenerated_queryByPwId" parameterClass="com.pltfm.cms.vobject.CmsPageWindow" resultMap="abatorgenerated_CmsPageWindowResult">
  	select PAGE_WINDOW_ID, PAGE_ID, WINDOW_ID, SORT, REMARK, STATUS, CREATE_DATE, CREATED,
    MODIFY_DATE, MODIFIED from CMS_PAGE_WINDOW
    	<dynamic prepend="where">
    		<isNotEmpty property="pageId">
    			<isNotNull prepend="and" property="pageId">
    				PAGE_ID = #pageId#
    			</isNotNull>
    		</isNotEmpty>
    		<isNotEmpty property="windowId">
    			<isNotNull prepend="and" property="windowId">
    				WINDOW_ID=#windowId#
    			</isNotNull>
    		</isNotEmpty>
    	</dynamic>
  </select>
  <!-- 综合查询(窗口列表和对应的模版 ) -->
   <select id="abatorgenerated_queryWindowList" resultMap="abatorgenerated_CmsWindowResult" parameterClass="com.pltfm.cms.vobject.CmsPageWindowQry" >
  
   select
  
          w.window_id     winId,
          w.template_id   templateId,
          w.name          winName,
          w.paramsType    paramsType,
          w.path          winPath,
          w.site_Id        siteId
     from cms_page_window pw, cms_window w
    where
       w.window_id = pw.window_id
    
    and  pw.page_id = #pageId#
  </select>
  
  
  <select id="abatorgenerated_selectByPrimaryKey" resultMap="abatorgenerated_CmsPageWindowResult" parameterClass="com.pltfm.cms.vobject.CmsPageWindow" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Sep 04 10:32:41 CST 2013.
    -->
    select PAGE_WINDOW_ID, PAGE_ID, WINDOW_ID, SORT, REMARK, STATUS, CREATE_DATE, CREATED,
      MODIFY_DATE, MODIFIED
    from CMS_PAGE_WINDOW
    where PAGE_WINDOW_ID = #pageWindowId#
  </select>
  <!-- 返回窗口列表 -->
  <select id="abatorgenerated_selectByPageId" resultClass="java.lang.Integer" parameterClass="com.pltfm.cms.vobject.CmsPage" >
  
    select WINDOW_ID
    from CMS_PAGE_WINDOW
    where PAGE_ID = #pageId#
    
     

  </select>
  
  <!-- 查询窗口绑定窗口的数据 -->
  
  <select id="abatorgenerated_selectWindInWind" resultClass="java.lang.Integer" parameterClass="java.lang.String" >
  

select data_id as PAGE_WINDOW_ID from cms_window_data 

where data_type=4   and    $value$ 

  </select>
  
  <select id="abatorgenerated_selectByExample" resultMap="abatorgenerated_CmsPageWindowResult" parameterClass="com.pltfm.cms.vobject.CmsPageWindowExample" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Sep 04 10:32:41 CST 2013.
    -->
    select PAGE_WINDOW_ID, PAGE_ID, WINDOW_ID, SORT, REMARK, STATUS, CREATE_DATE, CREATED,
      MODIFY_DATE, MODIFIED
    from CMS_PAGE_WINDOW
    <isParameterPresent >
      <include refid="CMS_PAGE_WINDOW.abatorgenerated_Example_Where_Clause" />
      <isNotNull property="orderByClause" >
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <delete id="abatorgenerated_deleteByPrimaryKey" parameterClass="com.pltfm.cms.vobject.CmsPageWindow" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Sep 04 10:32:41 CST 2013.
    -->
    delete from CMS_PAGE_WINDOW
    where PAGE_WINDOW_ID = #pageWindowId#
  </delete>
  <delete id="abatorgenerated_deleteByExample" parameterClass="com.pltfm.cms.vobject.CmsPageWindowExample" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Sep 04 10:32:41 CST 2013.
    -->
    delete from CMS_PAGE_WINDOW
    <include refid="CMS_PAGE_WINDOW.abatorgenerated_Example_Where_Clause" />
  </delete>
  <insert id="abatorgenerated_insert" parameterClass="com.pltfm.cms.vobject.CmsPageWindow" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Sep 04 10:32:41 CST 2013.
    -->
    <selectKey keyProperty="pageWindowId">
    	select SEQ_CMS_PAGE_WINDOW.nextval from dual
    </selectKey>
    insert into CMS_PAGE_WINDOW (PAGE_WINDOW_ID, PAGE_ID, WINDOW_ID, SORT, REMARK, STATUS,
      CREATE_DATE, CREATED, MODIFY_DATE, MODIFIED)
    values (#pageWindowId#, #pageId#, #windowId#, #sort#,
      #remark#, #status#, #createDate#, #created#, #modifyDate#,
      #modified#)
  </insert>
  <update id="abatorgenerated_updateByPrimaryKey" parameterClass="com.pltfm.cms.vobject.CmsPageWindow" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Sep 04 10:32:41 CST 2013.
    -->
    update CMS_PAGE_WINDOW
    set PAGE_ID = #pageId#,
      WINDOW_ID = #windowId#,
      SORT = #sort#,
      REMARK = #remark#,
      STATUS = #status#,
      CREATE_DATE = #createDate#,
      CREATED = #created#,
      MODIFY_DATE = #modifyDate#,
      MODIFIED = #modified#
    where PAGE_WINDOW_ID = #pageWindowId#
  </update>
  <update id="abatorgenerated_updateByPrimaryKeySelective" parameterClass="com.pltfm.cms.vobject.CmsPageWindow" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Sep 04 10:32:41 CST 2013.
    -->
    update CMS_PAGE_WINDOW
    <dynamic prepend="set" >
      <isNotNull prepend="," property="pageId" >
        PAGE_ID = #pageId#
      </isNotNull>
      <isNotNull prepend="," property="windowId" >
        WINDOW_ID = #windowId#
      </isNotNull>
      <isNotNull prepend="," property="sort" >
        SORT = #sort#
      </isNotNull>
      <isNotNull prepend="," property="remark" >
        REMARK = #remark#
      </isNotNull>
      <isNotNull prepend="," property="status" >
        STATUS = #status#
      </isNotNull>
      <isNotNull prepend="," property="createDate" >
        CREATE_DATE = #createDate#
      </isNotNull>
      <isNotNull prepend="," property="created" >
        CREATED = #created#
      </isNotNull>
      <isNotNull prepend="," property="modifyDate" >
        MODIFY_DATE = #modifyDate#
      </isNotNull>
      <isNotNull prepend="," property="modified" >
        MODIFIED = #modified#
      </isNotNull>
    </dynamic>
    where PAGE_WINDOW_ID = #pageWindowId#
  </update>
  <select id="abatorgenerated_countByExample" parameterClass="com.pltfm.cms.vobject.CmsPageWindowExample" resultClass="java.lang.Integer" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Sep 04 10:32:41 CST 2013.
    -->
    select count(*) from CMS_PAGE_WINDOW
    <include refid="CMS_PAGE_WINDOW.abatorgenerated_Example_Where_Clause" />
  </select>
  <update id="abatorgenerated_updateByExampleSelective" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Sep 04 10:32:41 CST 2013.
    -->
    update CMS_PAGE_WINDOW
    <dynamic prepend="set" >
      <isNotNull prepend="," property="record.pageWindowId" >
        PAGE_WINDOW_ID = #record.pageWindowId#
      </isNotNull>
      <isNotNull prepend="," property="record.pageId" >
        PAGE_ID = #record.pageId#
      </isNotNull>
      <isNotNull prepend="," property="record.windowId" >
        WINDOW_ID = #record.windowId#
      </isNotNull>
      <isNotNull prepend="," property="record.sort" >
        SORT = #record.sort#
      </isNotNull>
      <isNotNull prepend="," property="record.remark" >
        REMARK = #record.remark#
      </isNotNull>
      <isNotNull prepend="," property="record.status" >
        STATUS = #record.status#
      </isNotNull>
      <isNotNull prepend="," property="record.createDate" >
        CREATE_DATE = #record.createDate#
      </isNotNull>
      <isNotNull prepend="," property="record.created" >
        CREATED = #record.created#
      </isNotNull>
      <isNotNull prepend="," property="record.modifyDate" >
        MODIFY_DATE = #record.modifyDate#
      </isNotNull>
      <isNotNull prepend="," property="record.modified" >
        MODIFIED = #record.modified#
      </isNotNull>
    </dynamic>
    <isParameterPresent >
      <include refid="CMS_PAGE_WINDOW.abatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="abatorgenerated_updateByExample" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Sep 04 10:32:41 CST 2013.
    -->
    update CMS_PAGE_WINDOW
    set PAGE_WINDOW_ID = #record.pageWindowId#,
      PAGE_ID = #record.pageId#,
      WINDOW_ID = #record.windowId#,
      SORT = #record.sort#,
      REMARK = #record.remark#,
      STATUS = #record.status#,
      CREATE_DATE = #record.createDate#,
      CREATED = #record.created#,
      MODIFY_DATE = #record.modifyDate#,
      MODIFIED = #record.modified#
    <isParameterPresent >
      <include refid="CMS_PAGE_WINDOW.abatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <delete id="abatorgenerated_deleteByPwId" parameterClass="com.pltfm.cms.vobject.CmsPageWindow">
  	delete from CMS_PAGE_WINDOW
  		<dynamic prepend="where">
  			<isNotEmpty property="pageId">
  				<isNotNull prepend="and" property="pageId">
  					PAGE_ID = #pageId#
  				</isNotNull>
  			</isNotEmpty>
  			<isNotEmpty property="windowId">
  				<isNotNull prepend="and" property="windowId">
  					WINDOW_ID = #windowId#
  				</isNotNull>
  			</isNotEmpty>
  		</dynamic>
  </delete>
</sqlMap>