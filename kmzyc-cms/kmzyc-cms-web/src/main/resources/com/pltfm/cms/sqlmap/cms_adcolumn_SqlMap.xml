<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="CMS_ADCOLUMN">
	<resultMap id="abatorgenerated_CmsAdcolumnResult" class="com.pltfm.cms.vobject.CmsAdcolumn">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Tue Sep 03
			08:33:04 CST 2013.
		-->
		<result column="ADCOLUMN_ID" property="adcolumnId" jdbcType="DECIMAL" />
		<result column="NAME" property="name" jdbcType="VARCHAR" />
		<result column="TYPE" property="type" jdbcType="DECIMAL" />
		<result column="HEIGHT" property="height" jdbcType="VARCHAR" />
		<result column="WIDTH" property="width" jdbcType="VARCHAR" />
		<result column="REMARK" property="remark" jdbcType="VARCHAR" />
		<result column="STATUS" property="status" jdbcType="DECIMAL" />
		<result column="CREATE_DATE" property="createDate" jdbcType="Date" />
		<result column="CREATED" property="created" jdbcType="DECIMAL" />
		<result column="MODIFY_DATE" property="modifyDate" jdbcType="Date" />
		<result column="MODIFIED" property="modified" jdbcType="DECIMAL" />
		<result column="OUTPUT" property="output" jdbcType="VARCHAR" />
		<result column="SITE_ID" property="siteId" jdbcType="Integer" />
	</resultMap>
	

	
	
	<sql id="abatorgenerated_Example_Where_Clause">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Tue Sep 03
			08:33:04 CST 2013.
		-->
		<iterate property="oredCriteria" conjunction="or" prepend="where"
			removeFirstPrepend="iterate">
			<isEqual property="oredCriteria[].valid" compareValue="true">
				(
				<iterate prepend="and" property="oredCriteria[].criteriaWithoutValue"
					conjunction="and">
					$oredCriteria[].criteriaWithoutValue[]$
        </iterate>
				<iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue"
					conjunction="and">
					$oredCriteria[].criteriaWithSingleValue[].condition$
					#oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
				<iterate prepend="and" property="oredCriteria[].criteriaWithListValue"
					conjunction="and">
					$oredCriteria[].criteriaWithListValue[].condition$
					<iterate property="oredCriteria[].criteriaWithListValue[].values"
						open="(" close=")" conjunction=",">
						#oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
				</iterate>
				<iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue"
					conjunction="and">
					$oredCriteria[].criteriaWithBetweenValue[].condition$
					#oredCriteria[].criteriaWithBetweenValue[].values[0]# and
					#oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
				)
			</isEqual>
		</iterate>
	</sql>
	<select id="abatorgenerated_selectByPrimaryKey" resultMap="abatorgenerated_CmsAdcolumnResult"
		parameterClass="com.pltfm.cms.vobject.CmsAdcolumn">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Tue Sep 03
			08:33:04 CST 2013.
		-->
		select ADCOLUMN_ID, NAME, TYPE, HEIGHT, WIDTH, REMARK, STATUS,
		CREATE_DATE, CREATED,OUTPUT,SITE_ID
		MODIFY_DATE, MODIFIED
		from CMS_ADCOLUMN
		where ADCOLUMN_ID = #adcolumnId:DECIMAL#
	</select>
	<select id="abatorgenerated_selectByExample" resultMap="abatorgenerated_CmsAdcolumnResult"
		parameterClass="com.pltfm.cms.vobject.CmsAdcolumnExample">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Tue Sep 03
			08:33:04 CST 2013.
		-->
		select ADCOLUMN_ID, NAME, TYPE, HEIGHT, WIDTH, REMARK, STATUS,
		CREATE_DATE, CREATED,OUTPUT,SITE_ID
		MODIFY_DATE, MODIFIED
		from CMS_ADCOLUMN
		<isParameterPresent>
			<include refid="CMS_ADCOLUMN.abatorgenerated_Example_Where_Clause" />
			<isNotNull property="orderByClause">
				order by $orderByClause$
      </isNotNull>
		</isParameterPresent>
	</select>
	<delete id="abatorgenerated_deleteByPrimaryKey" parameterClass="com.pltfm.cms.vobject.CmsAdcolumn">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Tue Sep 03
			08:33:04 CST 2013.
		-->
		delete from CMS_ADCOLUMN
		where ADCOLUMN_ID = #adcolumnId:DECIMAL#
	</delete>
	<delete id="abatorgenerated_deleteByExample" parameterClass="com.pltfm.cms.vobject.CmsAdcolumnExample">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Tue Sep 03
			08:33:04 CST 2013.
		-->
		delete from CMS_ADCOLUMN
		<include refid="CMS_ADCOLUMN.abatorgenerated_Example_Where_Clause" />
	</delete>
	<insert id="abatorgenerated_insert" parameterClass="com.pltfm.cms.vobject.CmsAdcolumn">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Tue Sep 03
			08:33:04 CST 2013.
		-->
		<selectKey resultClass="java.lang.Integer" keyProperty="adcolumnId">
			select seq_app_cms.nextval from dual
      </selectKey>

		insert into CMS_ADCOLUMN (ADCOLUMN_ID, NAME, TYPE, HEIGHT, WIDTH,
		REMARK, STATUS, CREATE_DATE,
		CREATED, MODIFY_DATE, MODIFIED,OUTPUT,SITE_ID)
		values (#adcolumnId:DECIMAL#, #name:VARCHAR#, #type:DECIMAL#,
		#height:VARCHAR#, #width:VARCHAR#,
		#remark:VARCHAR#, #status:DECIMAL#, #createDate:Date#, #created:DECIMAL#,
		#modifyDate:Date#,
		#modified:DECIMAL#,#output:VARCHAR#,#siteId:Integer#)
	</insert>
	<update id="abatorgenerated_updateByPrimaryKey" parameterClass="com.pltfm.cms.vobject.CmsAdcolumn">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Tue Sep 03
			08:33:04 CST 2013.
		-->
		update CMS_ADCOLUMN
		set NAME = #name:VARCHAR#,
		TYPE = #type:DECIMAL#,
		HEIGHT = #height:VARCHAR#,
		WIDTH = #width:VARCHAR#,
		REMARK = #remark:VARCHAR#,
		STATUS = #status:DECIMAL#,
		CREATE_DATE = #createDate:Date#,
		CREATED = #created:DECIMAL#,
		MODIFY_DATE = #modifyDate:Date#,
		MODIFIED = #modified:DECIMAL#
		where ADCOLUMN_ID = #adcolumnId:DECIMAL#
	</update>
	<update id="abatorgenerated_updateByPrimaryKeySelective"
		parameterClass="com.pltfm.cms.vobject.CmsAdcolumn">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Tue Sep 03
			08:33:04 CST 2013.
		-->
		update CMS_ADCOLUMN
		<dynamic prepend="set">
			<isNotNull prepend="," property="name">
				NAME = #name:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="type">
				TYPE = #type:DECIMAL#
      </isNotNull>
			<isNotNull prepend="," property="height">
				HEIGHT = #height:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="width">
				WIDTH = #width:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="remark">
				REMARK = #remark:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="status">
				STATUS = #status:DECIMAL#
      </isNotNull>
			<isNotNull prepend="," property="createDate">
				CREATE_DATE = #createDate:Date#
      </isNotNull>
			<isNotNull prepend="," property="created">
				CREATED = #created:DECIMAL#
      </isNotNull>
			<isNotNull prepend="," property="modifyDate">
				MODIFY_DATE = #modifyDate:Date#
      </isNotNull>
			<isNotNull prepend="," property="modified">
				MODIFIED = #modified:DECIMAL#
      </isNotNull>
			<isNotNull prepend="," property="output">
				OUTPUT = #output:VARCHAR#
      </isNotNull>
		</dynamic>
		where ADCOLUMN_ID = #adcolumnId:DECIMAL#
	</update>
	<select id="abatorgenerated_countByExample" parameterClass="com.pltfm.cms.vobject.CmsAdcolumnExample"
		resultClass="java.lang.Integer">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Tue Sep 03
			08:33:04 CST 2013.
		-->
		select count(*) from CMS_ADCOLUMN
		<include refid="CMS_ADCOLUMN.abatorgenerated_Example_Where_Clause" />
	</select>
	<!--  查询 -->
	<select id="abatorgenerated_countByAdcolumn" parameterClass="com.pltfm.cms.vobject.CmsAdcolumn"
		resultClass="java.lang.Integer">
		select count(*) from CMS_ADCOLUMN
		<dynamic prepend="where">
			<isNotNull property="name">
				<isNotEmpty prepend="and" property="name">
					NAME like '%$name$%'
				      </isNotEmpty>
			</isNotNull>
			<isNotNull property="status">
				<isNotEmpty prepend="and" property="status">
					STATUS = '$status$'
				      </isNotEmpty>
			</isNotNull>
			<isNotNull property="output">
				<isNotEmpty prepend="and" property="output">
					OUTPUT like '%$output$%'
				      </isNotEmpty>
			</isNotNull>
			<isNotEmpty property="siteId">
				<isNotNull prepend="and" property="siteId">
					SITE_ID='$siteId$' 
					</isNotNull>
			</isNotEmpty>


		</dynamic>
	</select>
	<select id="countByAdcolumnname" parameterClass="com.pltfm.cms.vobject.CmsAdcolumn"
		resultClass="java.lang.Integer">
		select count(*) from cms_adcolumn
		<dynamic prepend="where">
			<isNotEmpty property="adcolumnId">
				<isNotNull prepend="and" property="adcolumnId">
					ADCOLUMN_ID!=#adcolumnId#
					</isNotNull>
			</isNotEmpty>
			<isNotEmpty property="name">
				<isNotNull prepend="and" property="name">
					NAME='$name$' 
					</isNotNull>
			</isNotEmpty>
			<isNotEmpty property="siteId">
				<isNotNull prepend="and" property="siteId">
					SITE_ID='$siteId$' 
					</isNotNull>
			</isNotEmpty>
		</dynamic>
	</select>
	<select id="countByAdcolumn" parameterClass="com.pltfm.cms.vobject.CmsAdcolumn"
		resultClass="java.lang.Integer">
		select count(*) from (
		select page.page_id cid,page.name
		cname,page.output_path coutput,page.site_id from cms_page page union
		select adc.adcolumn_id,adc.name,adc.output,adc.site_id from
		cms_adcolumn adc
		<dynamic prepend="where">
			<isNotEmpty property="adcolumnId">
				<isNotNull prepend="and" property="adcolumnId">
					ADCOLUMN_ID!=#adcolumnId# and OUTPUT='$output$'
					</isNotNull>
			</isNotEmpty>
		</dynamic>
		union
		select pro.id,pro.name,pro.output,pro.site_id from
		cms_promotion_task pro union
		select
		infor.infor_id,infor.name,infor.content,infor.site_id from
		cms_information infor )t
		<dynamic prepend="where">
			<isNotNull property="name">
				<isNotEmpty prepend="and" property="name">
					t.cname = '$name$'
				     </isNotEmpty>
			</isNotNull>
			<isNotNull property="output">
				<isNotEmpty prepend="and" property="output">
					t.coutput ='$output$'
				     </isNotEmpty>
			</isNotNull>
			<isNotNull property="siteId">
				<isNotEmpty prepend="and" property="siteId">
					t.site_id = #siteId#
			  		</isNotEmpty>
			</isNotNull>
		</dynamic>
	</select>
	<!--  查询 -->
	<update id="abatorgenerated_updateByExampleSelective">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Tue Sep 03
			08:33:04 CST 2013.
		-->
		update CMS_ADCOLUMN
		<dynamic prepend="set">
			<isNotNull prepend="," property="record.adcolumnId">
				ADCOLUMN_ID = #record.adcolumnId:DECIMAL#
      </isNotNull>
			<isNotNull prepend="," property="record.name">
				NAME = #record.name:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="record.type">
				TYPE = #record.type:DECIMAL#
      </isNotNull>
			<isNotNull prepend="," property="record.height">
				HEIGHT = #record.height:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="record.width">
				WIDTH = #record.width:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="record.remark">
				REMARK = #record.remark:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="record.status">
				STATUS = #record.status:DECIMAL#
      </isNotNull>
			<isNotNull prepend="," property="record.createDate">
				CREATE_DATE = #record.createDate:DATE#
      </isNotNull>
			<isNotNull prepend="," property="record.created">
				CREATED = #record.created:DECIMAL#
      </isNotNull>
			<isNotNull prepend="," property="record.modifyDate">
				MODIFY_DATE = #record.modifyDate:DATE#
      </isNotNull>
			<isNotNull prepend="," property="record.modified">
				MODIFIED = #record.modified:DECIMAL#
      </isNotNull>
		</dynamic>
		<isParameterPresent>
			<include refid="CMS_ADCOLUMN.abatorgenerated_Example_Where_Clause" />
		</isParameterPresent>
	</update>
	<update id="abatorgenerated_updateByExample">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Tue Sep 03
			08:33:04 CST 2013.
		-->
		update CMS_ADCOLUMN
		set ADCOLUMN_ID = #record.adcolumnId:DECIMAL#,
		NAME = #record.name:VARCHAR#,
		TYPE = #record.type:DECIMAL#,
		HEIGHT = #record.height:VARCHAR#,
		WIDTH = #record.width:VARCHAR#,
		REMARK = #record.remark:VARCHAR#,
		STATUS = #record.status:DECIMAL#,
		CREATE_DATE = #record.createDate:DATE#,
		CREATED = #record.created:DECIMAL#,
		MODIFY_DATE = #record.modifyDate:DATE#,
		MODIFIED = #record.modified:DECIMAL#
		<isParameterPresent>
			<include refid="CMS_ADCOLUMN.abatorgenerated_Example_Where_Clause" />
		</isParameterPresent>
	</update>

	<!-- 分页查询广告位数据列表信息 -->
	<select id="abatorgenerated_pageByAdcolumnData" resultMap="abatorgenerated_CmsAdcolumnResult"
		parameterClass="com.pltfm.cms.vobject.CmsAdcolumn">
		select
		ADCOLUMN_ID,name,type,height,width,remark,status,create_date,created,modify_date,modified,OUTPUT,site_Id
		FROM (
		select ROW_NUMBER() OVER(order by ADCOLUMN_ID desc) as view_row_number, tt.*
		FROM CMS_ADCOLUMN tt 
		
		where   tt.adcolumn_id not in
                           (select b.adcolumn_id
                              from cms_supplier_adcolumn s, cms_adcolumn b
                             where b.ADCOLUMN_ID = s.ADCOLUMN_ID)
	
			<isNotNull property="name">
				<isNotEmpty prepend="and" property="name">
					NAME like '%$name$%'
				      </isNotEmpty>
			</isNotNull>
			<isNotNull property="status">
				<isNotEmpty prepend="and" property="status">
					STATUS = '$status$'
				      </isNotEmpty>
			</isNotNull>
			<isNotNull property="output">
				<isNotEmpty prepend="and" property="output">
					OUTPUT like '%$output$%'
				      </isNotEmpty>
			</isNotNull>
			<isNotNull property="siteId">
				<isNotEmpty prepend="and" property="siteId">
					SITE_ID = '$siteId$'
				      </isNotEmpty>
			</isNotNull>

		
		) 
         <![CDATA[ where view_row_number <= #endIndex# and view_row_number > #startIndex#  ]]>
		order by modify_date desc
	</select>

	<!-- 根据ID查询广告位数据列表信息 -->

	<select id="abatorgenerated_ByIDAdcolumnData" resultMap="abatorgenerated_CmsAdcolumnResult"
		parameterClass="java.lang.Integer">
		select
		ADCOLUMN_ID,name,type,height,width,remark,status,create_date,created,modify_date,modified,OUTPUT,SITE_ID
		FROM CMS_ADCOLUMN
		WHERE ADCOLUMN_ID = #adcolumnId:DECIMAL# 
    </select>
	<select id="abatorgenerated_AdcolumnListData" resultMap="abatorgenerated_CmsAdcolumnResult"
		parameterClass="com.pltfm.cms.vobject.CmsAdcolumn">
		select
		ADCOLUMN_ID,name,type,height,width,remark,status,create_date,created,modify_date,modified,OUTPUT,SITE_ID
		FROM CMS_ADCOLUMN
		
		

		WHERE STATUS=0
		
		and 
		<!-- 过滤供应商广告位 -->
		adcolumn_id not in
                           (select b.adcolumn_id
                              from cms_supplier_adcolumn s, cms_adcolumn b
                             where b.ADCOLUMN_ID = s.ADCOLUMN_ID)
		<isNotNull property="siteId">
			<isNotEmpty prepend="and" property="siteId">
				SITE_ID = '$siteId$'
				      </isNotEmpty>
		</isNotNull>
	</select>
	<!-- 返回所有广告位列表 -->
	<select id="abatorgenerated_queryAdcolumnListData" resultMap="abatorgenerated_CmsAdcolumnResult" >
		select
		ADCOLUMN_ID,name,type,height,width,remark,status,create_date,created,modify_date,modified,OUTPUT,SITE_ID
		FROM CMS_ADCOLUMN
    </select>
    
    <!-- 返回所供应商广告位列表 -->
	<select id="abatorgenerated_queryAdcolumnListBySupplier" resultMap="abatorgenerated_CmsAdcolumnResult" parameterClass="com.pltfm.cms.vobject.CmsAdcolumn">
		select
		ADCOLUMN_ID,name,type,height,width,remark,status,create_date,created,modify_date,modified,OUTPUT,SITE_ID
		FROM CMS_ADCOLUMN
		<dynamic prepend="where">
			<isNotNull property="output">
				<isNotEmpty prepend="and" property="output">
					output like '%$output$%'
				      </isNotEmpty>
			</isNotNull>
			order by output
		</dynamic>
		
    </select>


	<!--查询供应商对应的广告位  -->
	<select id="ibatorgenerated_queryAdcolumnListBySupplierId"
		resultMap="abatorgenerated_CmsAdcolumnResult" parameterClass="com.kmzyc.supplier.model.ShopMain">

		select ca.ADCOLUMN_ID, ca.name, ca.type, ca.height, ca.width,
		ca.remark, ca.status, ca.create_date, ca.created, ca.modify_date,
		ca.modified, ca.OUTPUT, ca.SITE_ID FROM

		cms_supplier_adcolumn csa ,CMS_ADCOLUMN ca where csa.adcolumn_id=ca.adcolumn_id and
		 csa.SUPPLIER_ID = #supplierId:Integer# and csa.SITE_CODE = #shopSite:VARCHAR#
		 
		 order by adcolumn_id asc
  </select>
</sqlMap>