<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="CMS_ADV" >
  <resultMap id="abatorgenerated_CmsAdvResult" class="com.pltfm.cms.vobject.CmsAdv" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:55:19 CST 2013.
    -->
    <result column="ADV_ID" property="advId"  />
    <result column="ADCOLUMN_ID" property="adcolumnId"  />
    <result column="NAME" property="name" />
    <result column="URL" property="url" />
    <result column="UPLOAD_ADV_FILE" property="uploadAdvFile" />
    <!-- 新加字段 -->
     <result column="URL2" property="url2" />
    <result column="UPLOAD_ADV_FILE2" property="uploadAdvFile2" />
     <result column="URL3" property="url3" />
    <result column="UPLOAD_ADV_FILE3" property="uploadAdvFile3" />
     <result column="URL4" property="url4" />
    <result column="UPLOAD_ADV_FILE4" property="uploadAdvFile4"/>
    <result column="TYPES" property="types" />
    <!--  -->
    <result column="BEGIN_TIME" property="beginTime"  />
    <result column="END_TIME" property="endTime"  />
    <result column="UNIT_NAME" property="unitName" />
    <result column="LINKMAN" property="linkman"  />
    <result column="CONTACT" property="contact"  />
    <result column="CLICK_COUNT" property="clickCount"  />
    <result column="REMARK" property="remark"  />
    <result column="STATUS" property="status"  />
    <result column="CREATE_DATE" property="createDate"  />
    <result column="CREATED" property="created"  />
    <result column="MODIFY_DATE" property="modifyDate" />
    <result column="MODIFIED" property="modified" />
    <result column="P2" property="p2" />
    <result column="P3" property="p3" />
      <result column="SITE_ID" property="siteId" />
    <result column="URL6" property="url6" />
    <result column="UPLOAD_ADV_FILE6" property="uploadAdvFile6"/>
    
  </resultMap>
  
  <resultMap id="abatorgenerated_CmsAdvSupplierResult" class="com.pltfm.cms.vobject.CmsAdv" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:55:19 CST 2013.
    -->
    <result column="ADV_ID" property="advId"  />
    <result column="ADCOLUMN_ID" property="adcolumnId"  />
    <result column="NAME" property="name" />
    <result column="URL" property="url" />
    <result column="UPLOAD_ADV_FILE" property="uploadAdvFile" />
    <!-- 新加字段 -->
     <result column="URL2" property="url2" />
    <result column="UPLOAD_ADV_FILE2" property="uploadAdvFile2" />
     <result column="URL3" property="url3" />
    <result column="UPLOAD_ADV_FILE3" property="uploadAdvFile3" />
     <result column="URL4" property="url4" />
    <result column="UPLOAD_ADV_FILE4" property="uploadAdvFile4"/>
    <result column="TYPES" property="types" />
    <!--  -->
    <result column="BEGIN_TIME" property="beginTime"  />
    <result column="END_TIME" property="endTime"  />
    <result column="UNIT_NAME" property="unitName" />
    <result column="LINKMAN" property="linkman"  />
    <result column="CONTACT" property="contact"  />
    <result column="CLICK_COUNT" property="clickCount"  />
    <result column="REMARK" property="remark"  />
    <result column="STATUS" property="status"  />
    <result column="CREATE_DATE" property="createDate"  />
    <result column="CREATED" property="created"  />
    <result column="MODIFY_DATE" property="modifyDate" />
    <result column="MODIFIED" property="modified" />
    <result column="P2" property="p2" />
    <result column="P3" property="p3" />
    <result column="SITE_ID" property="siteId" />
    <result column="SITE_CODE" property="siteCode" />
    <result column="ADNAME" property="adname" />
    
  </resultMap>
  
  
  <resultMap id="abatorgenerated_CmsAdvResults" class="com.pltfm.cms.vobject.CmsAdv" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:55:19 CST 2013.
    -->
    <result column="ADV_ID" property="advId"  />
    <result column="ADCOLUMN_ID" property="adcolumnId"  />
    <result column="NAME" property="name" />
    <result column="URL" property="url" />
    <result column="UPLOAD_ADV_FILE" property="uploadAdvFile" />
    <!-- 新加字段 -->
     <result column="URL2" property="url2" />
    <result column="UPLOAD_ADV_FILE2" property="uploadAdvFile2" />
     <result column="URL3" property="url3" />
    <result column="UPLOAD_ADV_FILE3" property="uploadAdvFile3" />
     <result column="URL4" property="url4" />
    <result column="UPLOAD_ADV_FILE4" property="uploadAdvFile4"/>
    <result column="TYPES" property="types" />
    <!--  -->
    <result column="BEGIN_TIME" property="beginTime"  />
    <result column="END_TIME" property="endTime"  />
    <result column="UNIT_NAME" property="unitName" />
    <result column="LINKMAN" property="linkman"  />
    <result column="CONTACT" property="contact"  />
    <result column="CLICK_COUNT" property="clickCount"  />
    <result column="REMARK" property="remark"  />
    <result column="STATUS" property="status"  />
    <result column="CREATE_DATE" property="createDate"  />
    <result column="CREATED" property="created"  />
    <result column="MODIFY_DATE" property="modifyDate" />
    <result column="MODIFIED" property="modified" />
    <result column="ADNAME" property="adname" />
     <result column="isPublish" property="isPublish" />
     <result column="SITE_ID" property="siteId" />
  </resultMap>

  <sql id="abatorgenerated_Example_Where_Clause" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:55:19 CST 2013.
    -->
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate" >
      <isEqual property="oredCriteria[].valid" compareValue="true" >
        (
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and" >
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and" >
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and" >
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction="," >
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and" >
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  <select id="abatorgenerated_selectByPrimaryKey" resultMap="abatorgenerated_CmsAdvResult" parameterClass="com.pltfm.cms.vobject.CmsAdv" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:55:19 CST 2013.
    -->
    select ADV_ID, ADCOLUMN_ID, NAME, URL, UPLOAD_ADV_FILE, BEGIN_TIME, END_TIME, UNIT_NAME,
      LINKMAN, CONTACT, CLICK_COUNT, REMARK, STATUS, CREATE_DATE, CREATED, MODIFY_DATE, MODIFIED,SITE_ID
    
    from CMS_ADV
    where ADV_ID = #advId# and SITE_ID=#siteId#
  </select>
  <select id="abatorgenerated_selectByExample" resultMap="abatorgenerated_CmsAdvResult" parameterClass="com.pltfm.cms.vobject.CmsAdvExample" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:55:19 CST 2013.
    -->
    select ADV_ID, ADCOLUMN_ID, NAME, URL, UPLOAD_ADV_FILE, BEGIN_TIME, END_TIME, UNIT_NAME,
      LINKMAN, CONTACT, CLICK_COUNT, REMARK, STATUS, CREATE_DATE, CREATED, MODIFY_DATE, MODIFIED,SITE_ID
    from CMS_ADV
    <isParameterPresent >
      <include refid="CMS_ADV.abatorgenerated_Example_Where_Clause" />
      <isNotNull property="orderByClause" >
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <select id="abatorgenerated_selectByExampleWithBLOBs" resultMap="abatorgenerated_CmsAdvResult" parameterClass="com.pltfm.cms.vobject.CmsAdvExample" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:55:19 CST 2013.
    -->
    select ADV_ID, ADCOLUMN_ID, NAME, URL, UPLOAD_ADV_FILE, BEGIN_TIME, END_TIME, UNIT_NAME,
      LINKMAN, CONTACT, CLICK_COUNT, REMARK, STATUS, CREATE_DATE, CREATED, MODIFY_DATE, MODIFIED,SITE_ID
    from CMS_ADV
    <isParameterPresent >
      <include refid="CMS_ADV.abatorgenerated_Example_Where_Clause" />
      <isNotNull property="orderByClause" >
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <delete id="abatorgenerated_deleteByPrimaryKey" parameterClass="com.pltfm.cms.vobject.CmsAdv" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:55:19 CST 2013.
    -->
    delete from CMS_ADV
    where ADV_ID = #advId#
  </delete>
  <delete id="abatorgenerated_deleteByExample" parameterClass="com.pltfm.cms.vobject.CmsAdvExample" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:55:19 CST 2013.
    -->
    delete from CMS_ADV
    <include refid="CMS_ADV.abatorgenerated_Example_Where_Clause" />
  </delete>
  <insert id="abatorgenerated_insert" parameterClass="com.pltfm.cms.vobject.CmsAdv" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:55:19 CST 2013.
    -->
    <selectKey resultClass="java.lang.Integer" keyProperty="advId" >
           select seq_app_cms.nextval from dual
      </selectKey>
insert into CMS_ADV (ADV_ID,ADCOLUMN_ID,NAME,URL,UPLOAD_ADV_FILE,URL2,UPLOAD_ADV_FILE2,URL3,UPLOAD_ADV_FILE3,URL4, UPLOAD_ADV_FILE4,TYPES,BEGIN_TIME, END_TIME,UNIT_NAME,LINKMAN,CONTACT,CLICK_COUNT,REMARK,STATUS,CREATE_DATE,CREATED,MODIFY_DATE,MODIFIED,P2,P3,SITE_ID)
values (#advId#,#adcolumnId#,#name#,#url#,#uploadAdvFile#,#url2#,#uploadAdvFile2#,#url3#,#uploadAdvFile3#,#url4#,#uploadAdvFile4#,#types#,#beginTime#,#endTime#,#unitName#,#linkman#,#contact#,#clickCount#,#remark#,#status#,#createDate#,#created#,#modifyDate#,#modified#,#p2#,#p3#,#siteId#)
  </insert>
  <update id="abatorgenerated_updateByPrimaryKeyWithBLOBs" parameterClass="com.pltfm.cms.vobject.CmsAdv" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:55:19 CST 2013.
    -->
    update CMS_ADV
    set ADCOLUMN_ID = #adcolumnId#,
      NAME = #name#,
      URL = #url#,
      UPLOAD_ADV_FILE = #uploadAdvFile#,
      BEGIN_TIME = #beginTime#,
      END_TIME = #endTime#,
      UNIT_NAME = #unitName#,
      LINKMAN = #linkman#,
      CONTACT = #contact#,
      CLICK_COUNT = #clickCount#,
      REMARK = #remark#,
      STATUS = #status#,
      CREATE_DATE = #createDate#,
      CREATED = #created#,
      MODIFY_DATE = #modifyDate#,
      MODIFIED = #modified#
     
    where ADV_ID = #advId#
  </update>
  <update id="abatorgenerated_updateByPrimaryKey" parameterClass="com.pltfm.cms.vobject.CmsAdv" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:55:19 CST 2013.
    -->
    update CMS_ADV
    set ADCOLUMN_ID = #adcolumnId#,
      NAME = #name#,
      URL = #url#,
      UPLOAD_ADV_FILE = #uploadAdvFile#,
      BEGIN_TIME = #beginTime#,
       END_TIME = #endTime#,
      UNIT_NAME = #unitName#,
      LINKMAN = #linkman#,
      CONTACT = #contact#,
      CLICK_COUNT = #clickCount#,
      REMARK = #remark#,
      STATUS = #status#,
      CREATE_DATE = #createDate#,
      CREATED = #created#,
      MODIFY_DATE = #modifyDate#,
      MODIFIED = #modified#
    where ADV_ID = #advId#
  </update>
  <update id="abatorgenerated_updateByPrimaryKeySelective" parameterClass="com.pltfm.cms.vobject.CmsAdv" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:55:19 CST 2013.
    -->
    update CMS_ADV
    <dynamic prepend="set" >
      <isNotNull prepend="," property="adcolumnId" >
        ADCOLUMN_ID = #adcolumnId#
      </isNotNull>
      <isNotNull prepend="," property="name" >
        NAME = #name#
      </isNotNull>
      <isNotNull prepend="," property="url" >
        URL = #url#
      </isNotNull>
      <isNotNull prepend="," property="uploadAdvFile" >
        UPLOAD_ADV_FILE = #uploadAdvFile#
      </isNotNull>
       <isNotNull prepend="," property="url" >
        URL2 = #url2#
      </isNotNull>
      <isNotNull prepend="," property="uploadAdvFile2" >
        UPLOAD_ADV_FILE2 = #uploadAdvFile2#
      </isNotNull>
       <isNotNull prepend="," property="url" >
        URL3 = #url3#
      </isNotNull>
      <isNotNull prepend="," property="uploadAdvFile3" >
        UPLOAD_ADV_FILE3 = #uploadAdvFile3#
      </isNotNull>
       <isNotNull prepend="," property="url" >
        URL4 = #url4#
      </isNotNull>
      <isNotNull prepend="," property="uploadAdvFile4" >
        UPLOAD_ADV_FILE4 = #uploadAdvFile4#
      </isNotNull>
      <isNotNull prepend="," property="types" >
        TYPES = #types#
      </isNotNull>
      <isNotNull prepend="," property="beginTime" >
        BEGIN_TIME = #beginTime#
      </isNotNull>
      <isNotNull prepend="," property="endTime" >
        END_TIME = #endTime#
      </isNotNull>
      <isNotNull prepend="," property="unitName" >
        UNIT_NAME = #unitName#
      </isNotNull>
      <isNotNull prepend="," property="linkman" >
        LINKMAN = #linkman#
      </isNotNull>
      <isNotNull prepend="," property="contact" >
        CONTACT = #contact#
      </isNotNull>
      <isNotNull prepend="," property="clickCount" >
        CLICK_COUNT = #clickCount#
      </isNotNull>
      <isNotNull prepend="," property="remark" >
        REMARK = #remark#
      </isNotNull>
      <isNotNull prepend="," property="status" >
        STATUS = #status#
      </isNotNull>
      <isNotNull prepend="," property="createDate" >
        CREATE_DATE = #createDate#
      </isNotNull>
      <isNotNull prepend="," property="created" >
        CREATED = #created#
      </isNotNull>
      <isNotNull prepend="," property="modifyDate" >
        MODIFY_DATE = #modifyDate#
      </isNotNull>
      <isNotNull prepend="," property="modified" >
        MODIFIED = #modified#
      </isNotNull>
      <isNotNull prepend="," property="p2" >
        P2 = #p2#
      </isNotNull>
      <isNotNull prepend="," property="p3" >
        P3 = #p3#
      </isNotNull>
      <isNotNull prepend="," property="url6" >
        URL6 = #url6#
      </isNotNull>
      <isNotNull prepend="," property="uploadAdvFile6" >
        UPLOAD_ADV_FILE6 = #uploadAdvFile6#
      </isNotNull>
    </dynamic>
    where ADV_ID = #advId#
  </update>
  <select id="abatorgenerated_countByExample" parameterClass="com.pltfm.cms.vobject.CmsAdvExample" resultClass="java.lang.Integer" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:55:19 CST 2013.
    -->
    select count(*) from CMS_ADV
    <include refid="CMS_ADV.abatorgenerated_Example_Where_Clause" />
  </select>
  <update id="abatorgenerated_updateByExampleSelective" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:55:19 CST 2013.
    -->
    update CMS_ADV
    <dynamic prepend="set" >
      <isNotNull prepend="," property="record.advId" >
        ADV_ID = #record.advId#
      </isNotNull>
      <isNotNull prepend="," property="record.adcolumnId" >
        ADCOLUMN_ID = #record.adcolumnId#
      </isNotNull>
      <isNotNull prepend="," property="record.name" >
        NAME = #record.name#
      </isNotNull>
      <isNotNull prepend="," property="record.url" >
        URL = #record.url#
      </isNotNull>
      <isNotNull prepend="," property="record.uploadAdvFile" >
        UPLOAD_ADV_FILE = #record.uploadAdvFile#
      </isNotNull>
      <isNotNull prepend="," property="record.beginTime" >
        BEGIN_TIME = #record.beginTime#
      </isNotNull>
      <isNotNull prepend="," property="record.endTime" >
        END_TIME = #record.endTime#
      </isNotNull>
      <isNotNull prepend="," property="record.unitName" >
        UNIT_NAME = #record.unitName#
      </isNotNull>
      <isNotNull prepend="," property="record.linkman" >
        LINKMAN = #record.linkman#
      </isNotNull>
      <isNotNull prepend="," property="record.contact" >
        CONTACT = #record.contact#
      </isNotNull>
      <isNotNull prepend="," property="record.clickCount" >
        CLICK_COUNT = #record.clickCount#
      </isNotNull>
      <isNotNull prepend="," property="record.remark" >
        REMARK = #record.remark#
      </isNotNull>
      <isNotNull prepend="," property="record.status" >
        STATUS = #record.status#
      </isNotNull>
      <isNotNull prepend="," property="record.createDate" >
        CREATE_DATE = #record.createDate#
      </isNotNull>
      <isNotNull prepend="," property="record.created" >
        CREATED = #record.created#
      </isNotNull>
      <isNotNull prepend="," property="record.modifyDate" >
        MODIFY_DATE = #record.modifyDate#
      </isNotNull>
      <isNotNull prepend="," property="record.modified" >
        MODIFIED = #record.modified#
      </isNotNull>
      
    </dynamic>
    <isParameterPresent >
      <include refid="CMS_ADV.abatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="abatorgenerated_updateByExampleWithBLOBs" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:55:19 CST 2013.
    -->
    update CMS_ADV
    set ADV_ID = #record.advId#,
      ADCOLUMN_ID = #record.adcolumnId#,
      NAME = #record.name#,
      URL = #record.url#,
      UPLOAD_ADV_FILE = #record.uploadAdvFile#,
      BEGIN_TIME = #record.beginTime#,
      END_TIME = #record.endTime#,
      UNIT_NAME = #record.unitName#,
      LINKMAN = #record.linkman#,
      CONTACT = #record.contact#,
      CLICK_COUNT = #record.clickCount#,
      REMARK = #record.remark#,
      STATUS = #record.status#,
      CREATE_DATE = #record.createDate#,
      CREATED = #record.created#,
      MODIFY_DATE = #record.modifyDate#,
      MODIFIED = #record.modified#,
      
    <isParameterPresent >
      <include refid="CMS_ADV.abatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="abatorgenerated_updateByExample" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:55:19 CST 2013.
    -->
    update CMS_ADV
    set ADV_ID = #record.advId#,
      ADCOLUMN_ID = #record.adcolumnId#,
      NAME = #record.name#,
      URL = #record.url#,
      UPLOAD_ADV_FILE = #record.uploadAdvFile#,
      BEGIN_TIME = #record.beginTime#,
      END_TIME = #record.endTime#,
      UNIT_NAME = #record.unitName#,
      LINKMAN = #record.linkman#,
      CONTACT = #record.contact#,
      CLICK_COUNT = #record.clickCount#,
      REMARK = #record.remark#,
      STATUS = #record.status#,
      CREATE_DATE = #record.createDate#,
      CREATED = #record.created#,
      MODIFY_DATE = #record.modifyDate#,
      MODIFIED = #record.modified#
    <isParameterPresent >
      <include refid="CMS_ADV.abatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
   <!-- 分页查询广告位数据列表信息 -->
    <select id="abatorgenerated_pageByAdv"  resultMap="abatorgenerated_CmsAdvResults"  parameterClass="com.pltfm.cms.vobject.CmsAdv">
                           
 SELECT  s.ADV_ID,s.ADCOLUMN_ID,s.NAME,s.URL,s.ADNAME,s.UPLOAD_ADV_FILE,s.URL2,s.UPLOAD_ADV_FILE2,s.URL3,s.UPLOAD_ADV_FILE3,s.URL4,s.UPLOAD_ADV_FILE4,s.BEGIN_TIME,s.END_TIME,s.UNIT_NAME,s.LINKMAN,s.CONTACT,s.CLICK_COUNT,s.REMARK,s.STATUS,s.CREATE_DATE,s.CREATED,s.MODIFY_DATE,s.MODIFIED,s.TYPES,s.SITE_ID,
 case  when  to_char(begin_time, 'yyyy-MM-dd HH24:mm:ss') >
to_char(sysdate, 'yyyy-MM-dd HH24:mm:ss') then 0 else 1 end isPublish 
  FROM  ( select  ROW_NUMBER() OVER(order by ADV_ID desc) as view_row_number, tt.* ,b.name as  ADNAME FROM CMS_ADV tt
  
  ,cms_adcolumn b
  
   where 
  tt.ADCOLUMN_ID=b.adcolumn_id   
  
    and b.adcolumn_id not in
               (select b.adcolumn_id
                  from cms_supplier_adcolumn s, cms_adcolumn b
                 where b.ADCOLUMN_ID = s.ADCOLUMN_ID)
				    
				   <isNotNull property="name">
				     <isNotEmpty prepend="and" property="name">
				     tt.NAME like '%$name$%'
				      </isNotEmpty>
			       </isNotNull>
			         <isNotNull property="adcolumnId">
				     <isNotEmpty prepend="and" property="adcolumnId">
				    tt.ADCOLUMN_ID = '$adcolumnId$'
				      </isNotEmpty>
				       </isNotNull>
				       <isNotNull property="status">
				     <isNotEmpty prepend="and" property="status">
				     tt.STATUS = '$status$'
				      </isNotEmpty>
				      </isNotNull>
				      
		             <isNotNull property="beginTime">
				     <isNotEmpty prepend="and" property="beginTime">
				    <![CDATA[ tt.BEGIN_TIME >= #beginTime#]]>
				      </isNotEmpty>
				      </isNotNull>
				      
				       <isNotNull property="endTime">
				     <isNotEmpty prepend="and" property="endTime">
				  <![CDATA[   tt.END_TIME <= #endTime#]]>
				      </isNotEmpty>
				      </isNotNull>
				      
				       <isNotNull property="siteId">
				     <isNotEmpty prepend="and" property="siteId">
				   tt.SITE_ID = #siteId#
				      </isNotEmpty>
				      </isNotNull>
					
					<isNotNull property="ids">
				     <isNotEmpty prepend="and" property="ids">
				    $ids$
				      </isNotEmpty>
				      </isNotNull>
				      
				
              ) s
              <!--过滤供应商广告位数据-->
               <![CDATA[ where  
               
            
 
               view_row_number <= #endIndex# and view_row_number > #startIndex# ]]>
               
              order by MODIFY_DATE desc
    </select>
   <!--  查询 条数 -->
  <select id="abatorgenerated_countByAdv" parameterClass="com.pltfm.cms.vobject.CmsAdv" resultClass="java.lang.Integer" >
	select count(*) from  CMS_ADV a ,cms_adcolumn b
	
	where a.ADCOLUMN_ID=b.adcolumn_id
	
		
	          <isNotNull property="name">
				     <isNotEmpty prepend="and" property="name">
				     a.NAME like '%$name$%'
				      </isNotEmpty>
			         </isNotNull>
		      <isNotNull property="adcolumnId">
				     <isNotEmpty prepend="and" property="adcolumnId">
				     a.ADCOLUMN_ID= '$adcolumnId$'
				      </isNotEmpty>
		     </isNotNull>
		      <isNotNull property="status">
				     <isNotEmpty prepend="and" property="status">
				     a.STATUS = '$status$'
				      </isNotEmpty>
				      </isNotNull>
				      
		              <isNotNull property="beginTime">
				     <isNotEmpty prepend="and" property="beginTime">
				      <![CDATA[ a.BEGIN_TIME >= #beginTime#]]>
				      </isNotEmpty>
				      </isNotNull>
				      
				       <isNotNull property="endTime">
				     <isNotEmpty prepend="and" property="endTime">
				    <![CDATA[   a.END_TIME <= #endTime#]]>
				      </isNotEmpty>
				      </isNotNull>
				          <isNotNull property="siteId">
				     <isNotEmpty prepend="and" property="siteId">
				   a.SITE_ID = #siteId#
				      </isNotEmpty>
				      </isNotNull>
				      
				       <isNotNull property="ids">
				     <isNotEmpty prepend="and" property="ids">
				     $ids$
				      </isNotEmpty>
				      </isNotNull>
				      
				      
		
		
		
		
		
	  and b.adcolumn_id not in ( select b.adcolumn_id
 from cms_supplier_adcolumn s ,cms_adcolumn b where  b.ADCOLUMN_ID = s.ADCOLUMN_ID)
 
              
  </select>
  
  <!--根据广告位返回广告对象  --><!--
   
    <select id="abatorgenerated_queryAdvList"  resultMap="abatorgenerated_CmsAdvResult"  parameterClass="com.pltfm.cms.vobject.CmsAdcolumn">
    

  
   SELECT a.ADV_ID,
         a.ADCOLUMN_ID,
         a.NAME,
         a.URL,
         a.UPLOAD_ADV_FILE,
         a.URL2,
         a.UPLOAD_ADV_FILE2,
         a.URL3,
         a.UPLOAD_ADV_FILE3,
         a.URL4,
         a.UPLOAD_ADV_FILE4,
         a.BEGIN_TIME,
         a.END_TIME,
         a.UNIT_NAME,
         a.LINKMAN,
         a.CONTACT,
         a.CLICK_COUNT,
         a.REMARK,
         a.STATUS,
         a.CREATE_DATE,
         a.CREATED,
         a.MODIFY_DATE,
         a.MODIFIED,
         a.TYPES,
         a.P2,
         a.P3,
          a.SITE_ID
    FROM CMS_ADV a,cms_adcolumn b
    WHERE  a.adcolumn_id=b.adcolumn_id  
     
    and  b.adcolumn_id= #adcolumnId#  
    </select>
    
    -->
    
    <!--根据广告位返回广告对象  -->
     <select id="abatorgenerated_queryAdvList"  resultMap="abatorgenerated_CmsAdvSupplierResult"  parameterClass="com.pltfm.cms.vobject.CmsAdv">
                           
   SELECT a.ADV_ID,a.ADCOLUMN_ID,a.NAME,a.URL,a.UPLOAD_ADV_FILE,a.URL2,a.UPLOAD_ADV_FILE2,a.URL3,a.UPLOAD_ADV_FILE3,a.URL4,a.UPLOAD_ADV_FILE4,a.BEGIN_TIME,a.END_TIME,a.UNIT_NAME,a.LINKMAN,a.CONTACT,a.CLICK_COUNT,a.REMARK,a.STATUS,a.CREATE_DATE,a.CREATED,a.MODIFY_DATE,a.MODIFIED,a.TYPES,a.P2,a.P3,a.SITE_ID,a.SITE_CODE,a.adname
  FROM  ( select  ROW_NUMBER() OVER(order by  a.STATUS asc) as view_row_number, a.*,s.site_code,b.name adname FROM CMS_ADV a,cms_supplier_adcolumn s,cms_adcolumn b 
				     where 
				     a.ADCOLUMN_ID= b.ADCOLUMN_ID and b.ADCOLUMN_ID = s.ADCOLUMN_ID
				   <isNotNull property="supplierId">
				     <isNotEmpty prepend="and" property="supplierId">
				      s.SUPPLIER_ID = '$supplierId$'
				      </isNotEmpty>
			       </isNotNull>
				     
				   <isNotNull property="name">
				     <isNotEmpty prepend="and" property="name">
				     a.NAME like '%$name$%'
				      </isNotEmpty>
			       </isNotNull>
			         <isNotNull property="adcolumnId">
				     <isNotEmpty prepend="and" property="adcolumnId">
				    a.ADCOLUMN_ID = '$adcolumnId$'
				      </isNotEmpty>
				       </isNotNull>
				       <isNotNull property="status">
				     <isNotEmpty prepend="and" property="status">
				     a.STATUS = '$status$'
				      </isNotEmpty>
				      </isNotNull>
				      
		             <isNotNull property="beginTime">
				     <isNotEmpty prepend="and" property="beginTime">
				    <![CDATA[ a.BEGIN_TIME >= #beginTime#]]>
				      </isNotEmpty>
				      </isNotNull>
				      
				       <isNotNull property="endTime">
				     <isNotEmpty prepend="and" property="endTime">
				  <![CDATA[   a.END_TIME <= #endTime#]]>
				      </isNotEmpty>
				      </isNotNull>
				      
				       <isNotNull property="siteId">
				     <isNotEmpty prepend="and" property="siteId">
				   a.SITE_ID = #siteId#
				      </isNotEmpty>
				      </isNotNull>
				      
				      <isNotNull property="siteCode">
					     <isNotEmpty prepend="and" property="siteCode">
					   		s.SITE_CODE like '%$siteCode$%'
					      </isNotEmpty>
				      </isNotNull>
				      
				      <isNotNull property="adname">
					     <isNotEmpty prepend="and" property="adname">
					   		b.NAME like '%$adname$%'
					      </isNotEmpty>
				      </isNotNull>
                  order by a.status,a.adcolumn_id 
				
              ) a 
               <![CDATA[ where  view_row_number <= #endIndex# and view_row_number >= #startIndex# ]]>
               
             
    </select>
    
    
       <!--  查询 条数 -->
  <select id="abatorgenerated_countBySupplierAdv" parameterClass="com.pltfm.cms.vobject.CmsAdv" resultClass="java.lang.Integer" >
	select count(*) from  CMS_ADV a,cms_supplier_adcolumn s,cms_adcolumn b
		  where 
				     a.ADCOLUMN_ID = b.ADCOLUMN_ID and b.ADCOLUMN_ID = s.ADCOLUMN_ID
				   <isNotNull property="supplierId">
				     <isNotEmpty prepend="and" property="supplierId">
				      s.SUPPLIER_ID = '$supplierId$'
				      </isNotEmpty>
			       </isNotNull>
				     
				   <isNotNull property="name">
				     <isNotEmpty prepend="and" property="name">
				     a.NAME like '%$name$%'
				      </isNotEmpty>
			       </isNotNull>
			       
			         <isNotNull property="adcolumnId">
				     <isNotEmpty prepend="and" property="adcolumnId">
				    a.ADCOLUMN_ID = '$adcolumnId$'
				      </isNotEmpty>
				       </isNotNull>
				       <isNotNull property="status">
				     <isNotEmpty prepend="and" property="status">
				     a.STATUS = '$status$'
				      </isNotEmpty>
				      </isNotNull>
				      
		             <isNotNull property="beginTime">
				     <isNotEmpty prepend="and" property="beginTime">
				    <![CDATA[ a.BEGIN_TIME >= #beginTime#]]>
				      </isNotEmpty>
				      </isNotNull>
				      
				       <isNotNull property="endTime">
				     <isNotEmpty prepend="and" property="endTime">
				  <![CDATA[   a.END_TIME <= #endTime#]]>
				      </isNotEmpty>
				      </isNotNull>
				      
				       <isNotNull property="siteId">
				     <isNotEmpty prepend="and" property="siteId">
				   		a.SITE_ID = #siteId#
				      </isNotEmpty>
				      </isNotNull>
				      
				       <isNotNull property="siteCode">
					     <isNotEmpty prepend="and" property="siteCode">
					   		s.SITE_CODE like '%$siteCode$%'
					      </isNotEmpty>
				      </isNotNull>
				      
				         <isNotNull property="adname">
					     <isNotEmpty prepend="and" property="adname">
					   		b.NAME like '%$adname$%'
					      </isNotEmpty>
				      </isNotNull>

  </select>
    
    
    
    
       <select id="abatorgenerated_ByIDAdvData"  resultMap="abatorgenerated_CmsAdvResult"  parameterClass="java.lang.Integer"  >
   SELECT  ADV_ID,ADCOLUMN_ID,NAME,URL,UPLOAD_ADV_FILE,URL2,UPLOAD_ADV_FILE2,URL3,UPLOAD_ADV_FILE3,URL4,UPLOAD_ADV_FILE4,URL6,UPLOAD_ADV_FILE6,
   BEGIN_TIME,END_TIME,UNIT_NAME,LINKMAN,CONTACT,CLICK_COUNT,REMARK,STATUS,CREATE_DATE,CREATED,MODIFY_DATE,MODIFIED,TYPES,P2,P3,SITE_ID
  FROM  CMS_ADV
    WHERE  ADV_ID = #advId# 
    </select>

    
     <select id="abatorgenerated_checkAllAdv"  resultMap="abatorgenerated_CmsAdvResult" >
select a.*
  from cms_adv a, cms_adcolumn b
 where a.status != 1
   and a.adcolumn_id = b.adcolumn_id
   and 
    to_char(sysdate, 'yyyy-MM-dd HH24:mm:ss') >
   to_char(begin_time, 'yyyy-MM-dd HH24:mm:ss') 

 and a.site_id is not null
 
 order by begin_time
    </select>
    
        <select id="abatorgenerated_ByAdId" resultClass="java.lang.Integer"  parameterClass="java.lang.Integer"  >
   SELECT count(*)   FROM  CMS_ADV     WHERE  ADCOLUMN_ID = #advId#
    </select>
    <!-- 名字惟一性 -->
<select id="abatorgenerated_countAdv" parameterClass="com.pltfm.cms.vobject.CmsAdv" resultClass="java.lang.Integer" >
	select count(*) from  CMS_ADV
	<dynamic prepend="where">
				<isNotEmpty property="advId">
					<isNotNull prepend="and" property="advId">
						ADV_ID!='$advId$' 
					</isNotNull>
				</isNotEmpty>
				<isNotEmpty property="name">
					<isNotNull prepend="and" property="name">
						NAME='$name$' 
					</isNotNull>
				</isNotEmpty>
				<isNotEmpty property="siteId">
					<isNotNull prepend="and" property="siteId">
						SITE_ID='$siteId$' 
					</isNotNull>
				</isNotEmpty>
			</dynamic>
	</select>
	
	
		<!--查询供应商对应的广告  -->
	<select id="ibatorgenerated_queryAdvByShopMianId"
		resultMap="abatorgenerated_CmsAdvResult" parameterClass="com.kmzyc.supplier.model.ShopMain">

		  select  cadv.ADV_ID,
         cadv.ADCOLUMN_ID,
         cadv.NAME,
         cadv.URL,
         cadv.UPLOAD_ADV_FILE,
         cadv.URL2,
         cadv.UPLOAD_ADV_FILE2,
         cadv.URL3,
         cadv.UPLOAD_ADV_FILE3,
         cadv.URL4,
         cadv.UPLOAD_ADV_FILE4,
         cadv.BEGIN_TIME,
         cadv.END_TIME,
         cadv.UNIT_NAME,
         cadv.LINKMAN,
         cadv.CONTACT,
         cadv.CLICK_COUNT,
         cadv.REMARK,
         cadv.STATUS,
         cadv.CREATE_DATE,
         cadv.CREATED,
         cadv.MODIFY_DATE,
         cadv.MODIFIED,
         cadv.TYPES,
         cadv.P2,
         cadv.P3,
         cadv.URL6,
         cadv.UPLOAD_ADV_FILE6,
          cadv.SITE_ID  FROM

    cms_supplier_adcolumn csa ,CMS_ADCOLUMN ca ,CMS_ADV cadv  where csa.adcolumn_id=ca.adcolumn_id and ca.adcolumn_id=cadv.adcolumn_id
    
    	and csa.SUPPLIER_ID = #supplierId:Integer# and csa.SITE_CODE = #shopSite:VARCHAR#
    	
    	
  </select>
  
 		<!--//查询需要更新的广告数据  -->
	<select id="ibatorgenerated_queryUpdateAdvTempList"
		resultMap="abatorgenerated_CmsAdvResult" parameterClass="com.pltfm.cms.vobject.CmsAdcolumn">

		  select  cadv.ADV_ID,
         cadv.ADCOLUMN_ID,
         cadv.NAME,
         cadv.URL,
         cadv.UPLOAD_ADV_FILE,
         cadv.URL2,
         cadv.UPLOAD_ADV_FILE2,
         cadv.URL3,
         cadv.UPLOAD_ADV_FILE3,
         cadv.URL4,
         cadv.UPLOAD_ADV_FILE4,
         cadv.BEGIN_TIME,
         cadv.END_TIME,
         cadv.UNIT_NAME,
         cadv.LINKMAN,
         cadv.CONTACT,
         cadv.CLICK_COUNT,
         cadv.REMARK,
         cadv.STATUS,
         cadv.CREATE_DATE,
         cadv.CREATED,
         cadv.MODIFY_DATE,
         cadv.MODIFIED,
         cadv.TYPES,
         cadv.P2,
         cadv.P3,
         cadv.URL6,
         cadv.UPLOAD_ADV_FILE6,
          cadv.SITE_ID  FROM

   CMS_ADCOLUMN ca ,CMS_ADV cadv  where ca.adcolumn_id=cadv.adcolumn_id 
    
    and ca.output   like #output:VARCHAR#ESCAPE '/'
     and ca.output like '/portal/adv/supplier/shopMain%'
    	
    	
  </select>
  
</sqlMap>