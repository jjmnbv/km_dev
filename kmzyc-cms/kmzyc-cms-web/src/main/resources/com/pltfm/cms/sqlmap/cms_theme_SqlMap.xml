<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="CMS_THEME">
	<resultMap id="abatorgenerated_CmsThemeResult" class="com.pltfm.cms.vobject.CmsTheme">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Mon Jun 09
			15:13:41 CST 2014.
		-->
		<result column="THEME_ID" property="themeId" jdbcType="Integer" />
		<result column="NAME" property="name" jdbcType="VARCHAR" />
		<result column="PICTURE" property="picture" jdbcType="VARCHAR" />
		<result column="TYPE" property="type" jdbcType="Integer" />
		<result column="SITE_ID" property="siteId" jdbcType="Integer" />
		<result column="REMARK" property="remark" jdbcType="VARCHAR" />
		<result column="STATUS" property="status" jdbcType="Integer" />
		<result column="CREATE_DATE" property="createDate" />
		<result column="CREATED" property="created" jdbcType="Integer" />
		<result column="MODIFY_DATE" property="modifyDate" />
		<result column="MODIFIED" property="modified" jdbcType="Integer" />
	</resultMap>

	<select id="abatorgenerated_selectByPrimaryKey" resultMap="abatorgenerated_CmsThemeResult"
		parameterClass="com.pltfm.cms.vobject.CmsTheme">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Mon Jun 09
			15:13:41 CST 2014.
		-->
		select THEME_ID, NAME, PICTURE, TYPE, SITE_ID, REMARK, STATUS,
		CREATE_DATE, CREATED,
		MODIFY_DATE, MODIFIED
		from CMS_THEME
		where THEME_ID = #themeId:Integer#
	</select>
	<!-- 列表 -->
	<select id="abatorgenerated_themeList" resultMap="abatorgenerated_CmsThemeResult"
		parameterClass="com.pltfm.cms.vobject.CmsTheme">

		select THEME_ID, NAME, PICTURE, TYPE, SITE_ID, REMARK, STATUS,
		CREATE_DATE, CREATED,
		MODIFY_DATE, MODIFIED
		from CMS_THEME

		<dynamic prepend="where">
			<isNotNull property="themeId">
				<isNotEmpty prepend="and" property="themeId">
					THEME_ID = #themeId#
							  </isNotEmpty>
			</isNotNull>
		</dynamic>

	</select>

	<!-- 分页列表 -->
	<select id="abatorgenerated_themeListForPage" resultMap="abatorgenerated_CmsThemeResult"
		parameterClass="com.pltfm.cms.vobject.CmsTheme">

		select THEME_ID, NAME, PICTURE, TYPE, SITE_ID, REMARK, STATUS,
		CREATE_DATE, CREATED,
		MODIFY_DATE, MODIFIED
		from ( select ROW_NUMBER() OVER(order by MODIFY_DATE desc nulls last) as
		view_row_number,ct.* from CMS_THEME ct

		<dynamic prepend="where">
			<isNotNull property="themeId">
				<isNotEmpty prepend="and" property="themeId">
					ct.THEME_ID = #themeId#
							  </isNotEmpty>
			</isNotNull>
			<isNotNull property="name">
				<isNotEmpty prepend="and" property="name">
					ct.name like '%$name$%'
							  </isNotEmpty>
			</isNotNull>
			<isNotNull property="type">
				<isNotEmpty prepend="and" property="type">
					ct.type = #type#
							  </isNotEmpty>
			</isNotNull>
			<isNotNull property="siteId">
				<isNotEmpty prepend="and" property="siteId">
					ct.site_Id = #siteId#
							  </isNotEmpty>
			</isNotNull>
		</dynamic>
		)
         <![CDATA[ where view_row_number <= #endIndex# and view_row_number > #startIndex# ]]>
	</select>

	<!-- 分页列表条数 -->
	<select id="abatorgenerated_themeCount" parameterClass="com.pltfm.cms.vobject.CmsTheme"
		resultClass="java.lang.Integer">
		select count(*) from CMS_THEME tt
		<dynamic prepend="where">
			<isNotNull property="themeId">
				<isNotEmpty prepend="and" property="themeId">
					THEME_ID = #themeId#
							  </isNotEmpty>
			</isNotNull>
			<isNotNull property="name">
				<isNotEmpty prepend="and" property="name">
					name like '%$name$%'
							  </isNotEmpty>
			</isNotNull>
			<isNotNull property="type">
				<isNotEmpty prepend="and" property="type">
					type = #type#
							  </isNotEmpty>
			</isNotNull>
			<isNotNull property="siteId">
				<isNotEmpty prepend="and" property="siteId">
					site_Id = #siteId#
							  </isNotEmpty>
			</isNotNull>
		</dynamic>
	</select>
	<delete id="abatorgenerated_deleteByPrimaryKey" parameterClass="com.pltfm.cms.vobject.CmsTheme">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Mon Jun 09
			15:13:41 CST 2014.
		-->
		BEGIN


		delete from CMS_THEME_TEMPLATE
		where THEME_ID = #themeId#;

		delete from CMS_THEME
		where THEME_ID = #themeId#;

		END;


	</delete>

	<insert id="abatorgenerated_insert" parameterClass="com.pltfm.cms.vobject.CmsTheme">
		<selectKey keyProperty="themeId">
			select SEQ_CMS_THEME.nextval from dual
    </selectKey>
		insert into CMS_THEME (THEME_ID, NAME, PICTURE, TYPE, SITE_ID, REMARK,
		STATUS, CREATE_DATE,
		CREATED, MODIFY_DATE, MODIFIED)
		values (#themeId:Integer#, #name:VARCHAR#, #picture:VARCHAR#,
		#type:Integer#, #siteId:Integer#,
		#remark:VARCHAR#, #status:Integer#, #createDate#, #created:Integer#,
		#modifyDate#,
		#modified:Integer#)
	</insert>
	<update id="abatorgenerated_updateByPrimaryKey" parameterClass="com.pltfm.cms.vobject.CmsTheme">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Mon Jun 09
			15:13:41 CST 2014.
		-->
		update CMS_THEME
		set NAME = #name:VARCHAR#,
		PICTURE = #picture:VARCHAR#,
		TYPE = #type:Integer#,
		SITE_ID = #siteId:Integer#,
		REMARK = #remark:VARCHAR#,
		STATUS = #status:Integer#,
		CREATE_DATE = #createDate#,
		CREATED = #created:Integer#,
		MODIFY_DATE = #modifyDate#,
		MODIFIED = #modified:Integer#
		where THEME_ID = #themeId:Integer#
	</update>
	<update id="abatorgenerated_updateByPrimaryKeySelective"
		parameterClass="com.pltfm.cms.vobject.CmsTheme">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Mon Jun 09
			15:13:41 CST 2014.
		-->
		update CMS_THEME
		<dynamic prepend="set">
			<isNotNull prepend="," property="name">
				NAME = #name:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="picture">
				PICTURE = #picture:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="type">
				TYPE = #type:Integer#
      </isNotNull>
			<isNotNull prepend="," property="siteId">
				SITE_ID = #siteId:Integer#
      </isNotNull>
			<isNotNull prepend="," property="remark">
				REMARK = #remark:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="status">
				STATUS = #status:Integer#
      </isNotNull>
			<isNotNull prepend="," property="createDate">
				CREATE_DATE = #createDate#
      </isNotNull>
			<isNotNull prepend="," property="created">
				CREATED = #created:Integer#
      </isNotNull>
			<isNotNull prepend="," property="modifyDate">
				MODIFY_DATE = #modifyDate#
      </isNotNull>
			<isNotNull prepend="," property="modified">
				MODIFIED = #modified:Integer#
      </isNotNull>
		</dynamic>
		where THEME_ID = #themeId:Integer#
	</update>

	<!-- 跟据类型和站点查询 -->
	<select id="abatorgenerated_themeType" resultMap="abatorgenerated_CmsThemeResult"
		parameterClass="com.pltfm.cms.vobject.CmsTheme">
		select THEME_ID, NAME, PICTURE, TYPE, SITE_ID, REMARK, STATUS,
		CREATE_DATE, CREATED,
		MODIFY_DATE, MODIFIED
		from CMS_THEME
		<dynamic prepend="where">
			<isNotNull property="themeId">
				<isNotEmpty prepend="and" property="themeId">
					THEME_ID = #themeId#
							  </isNotEmpty>
			</isNotNull>

			<isNotNull property="type">
				<isNotEmpty prepend="and" property="type">
					TYPE = #type:Integer#
							  </isNotEmpty>
			</isNotNull>

			<isNotNull property="siteId">
				<isNotEmpty prepend="and" property="siteId">
					SITE_ID = #siteId:Integer#
							  </isNotEmpty>
			</isNotNull>
		</dynamic>

	</select>
	 
	 
	 <select id="QY_THEMETYPE" resultMap="abatorgenerated_CmsThemeResult"
		parameterClass="com.pltfm.cms.vobject.CmsTheme">
		select THEME_ID, NAME, PICTURE, TYPE, SITE_ID, REMARK, STATUS,
		CREATE_DATE, CREATED,
		MODIFY_DATE, MODIFIED
		from CMS_THEME
		<dynamic prepend="where">
			<isNotNull property="themeId">
				<isNotEmpty prepend="and" property="themeId">
					THEME_ID = #themeId#
							  </isNotEmpty>
			</isNotNull>

			<isNotNull property="type">
				<isNotEmpty prepend="and" property="type">
					TYPE = #type:Integer#
							  </isNotEmpty>
			</isNotNull>

			<isNotNull property="siteId">
				<isNotEmpty prepend="and" property="siteId">
					SITE_ID = #siteId:Integer#
							  </isNotEmpty>
			</isNotNull>
		</dynamic>

	</select>
	 
		<!-- 跟据类型和站点查询 -->
	<select id="abatorgenerated_themeTypeAll" resultMap="abatorgenerated_CmsThemeResult"
		parameterClass="com.pltfm.cms.vobject.CmsTheme">
		select THEME_ID, NAME, PICTURE, TYPE, SITE_ID, REMARK, STATUS,
		CREATE_DATE, CREATED,
		MODIFY_DATE, MODIFIED
		from CMS_THEME 
		<dynamic prepend="where">
			<isNotNull property="themeId">
				<isNotEmpty prepend="and" property="themeId">
					THEME_ID = #themeId#
							  </isNotEmpty>
			</isNotNull>

			
			<isNotNull property="siteId">
				<isNotEmpty prepend="and" property="siteId">
					SITE_ID = #siteId:Integer#
							  </isNotEmpty>
			</isNotNull>
			<isNotNull property="type">
				<isNotEmpty prepend="and" property="type">
					
					TYPE in(4,5,#type:Integer#) 
							  </isNotEmpty>
			</isNotNull>
          </dynamic>
	</select>


</sqlMap>