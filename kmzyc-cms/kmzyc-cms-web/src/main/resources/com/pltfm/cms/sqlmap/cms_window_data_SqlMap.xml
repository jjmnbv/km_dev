<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
        "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="CMS_WINDOW_DATA">
    <resultMap id="abatorgenerated_CmsWindowDataResult" class="com.pltfm.cms.vobject.CmsWindowData">
        <!--
          WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
          This element was generated on Tue Sep 03 08:57:00 CST 2013.
        -->
        <result column="WINDOW_DATA_ID" property="windowDataId" jdbcType="DECIMAL"/>
        <result column="WINDOW_ID" property="windowId" jdbcType="DECIMAL"/>
        <result column="DATA_TYPE" property="dataType" jdbcType="DECIMAL"/>
        <result column="DATA_ID" property="dataId" jdbcType="DECIMAL"/>
        <result column="SORT" property="sort" jdbcType="DECIMAL"/>
        <result column="REMARK" property="remark" jdbcType="VARCHAR"/>
        <result column="STATUS" property="status" jdbcType="DECIMAL"/>
        <result column="CREATE_DATE" property="createDate" jdbcType="DATE"/>
        <result column="CREATED" property="created" jdbcType="DECIMAL"/>
        <result column="MODIFY_DATE" property="modifyDate" jdbcType="DATE"/>
        <result column="MODIFIED" property="modified" jdbcType="DECIMAL"/>
        <result column="USER_DEFINED_NAME" property="user_defined_name" jdbcType="VARCHAR"/>
        <result column="USER_DEFINED_URL" property="user_defined_url" jdbcType="VARCHAR"/>
        <result column="USER_DEFINED_TYPE" property="user_defined_type" jdbcType="DECIMAL"/>
        <result column="USER_DEFINED_PICPATH" property="user_defined_picpath" jdbcType="VARCHAR"/>
        <result column="SITE_ID" property="siteId" jdbcType="DECIMAL"/>
        <result column="PRODUCT_SKU_ID" property="productSkuId" jdbcType="DECIMAL"/>
    </resultMap>

    <!--window对象  -->

    <resultMap id="abatorgenerated_CmsWindowResult" class="com.pltfm.cms.vobject.CmsWindow">

        <result column="winId" property="windowId" jdbcType="Integer"/>
        <result column="winName" property="name" jdbcType="VARCHAR"/>
        <result column="paramsType" property="paramsType" jdbcType="VARCHAR"/>
        <result column="winPath" property="path" jdbcType="VARCHAR"/>
    </resultMap>

    <resultMap id="abatorgenerated_CmsWindowDataResult1"
               class="com.pltfm.cms.vobject.CmsWindowData">
        <!--
          WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
          This element was generated on Tue Sep 03 08:57:00 CST 2013.
        -->
        <result column="WINDOW_DATA_ID" property="windowDataId" jdbcType="DECIMAL"/>
        <result column="WINDOW_ID" property="windowId" jdbcType="DECIMAL"/>
        <result column="USER_DEFINED_NAME" property="user_defined_name" jdbcType="VARCHAR"/>
        <result column="STATUS" property="status" jdbcType="DECIMAL"/>
    </resultMap>


    <parameterMap id="cmsWindowNameMap" class="java.util.HashMap">

        <parameter property="p_categoryWindowName" jdbcType="VARCHAR" javaType="String" mode="IN"/>
        <parameter property="p_searchCategoryName" jdbcType="VARCHAR" javaType="String" mode="IN"/>

    </parameterMap>
    <sql id="abatorgenerated_Example_Where_Clause">
        <!--
          WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
          This element was generated on Tue Sep 03 08:57:00 CST 2013.
        -->
        <iterate property="oredCriteria" conjunction="or" prepend="where"
                 removeFirstPrepend="iterate">
            <isEqual property="oredCriteria[].valid" compareValue="true">
                (
                <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue"
                         conjunction="and">
                    $oredCriteria[].criteriaWithoutValue[]$
                </iterate>
                <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue"
                         conjunction="and">
                    $oredCriteria[].criteriaWithSingleValue[].condition$
                    #oredCriteria[].criteriaWithSingleValue[].value#
                </iterate>
                <iterate prepend="and" property="oredCriteria[].criteriaWithListValue"
                         conjunction="and">
                    $oredCriteria[].criteriaWithListValue[].condition$
                    <iterate property="oredCriteria[].criteriaWithListValue[].values" open="("
                             close=")" conjunction=",">
                        #oredCriteria[].criteriaWithListValue[].values[]#
                    </iterate>
                </iterate>
                <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue"
                         conjunction="and">
                    $oredCriteria[].criteriaWithBetweenValue[].condition$
                    #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
                    #oredCriteria[].criteriaWithBetweenValue[].values[1]#
                </iterate>
                )
            </isEqual>
        </iterate>
    </sql>
    <!-- 根据窗口对象返回窗口数据集 -->
    <select id="abatorgenerated_queryWindowData" resultMap="abatorgenerated_CmsWindowDataResult"
            parameterClass="com.pltfm.cms.vobject.CmsWindowData">
   
    select WINDOW_DATA_ID, WINDOW_ID, DATA_TYPE, DATA_ID, SORT, REMARK, STATUS, CREATE_DATE,SITE_ID,
      CREATED, MODIFY_DATE, MODIFIED,USER_DEFINED_NAME,USER_DEFINED_URL,USER_DEFINED_TYPE,USER_DEFINED_PICPATH,PRODUCT_SKU_ID
    from CMS_WINDOW_DATA
    where WINDOW_ID = #windowId:INTEGER# and  data_type=#dataType:INTEGER# order by sort asc
  </select>

    <!-- 根据dataid返回-->
    <select id="abatorgenerated_queryWindowDataId" resultMap="abatorgenerated_CmsWindowDataResult"
            parameterClass="com.pltfm.cms.vobject.CmsWindowData">

        select WINDOW_DATA_ID, WINDOW_ID, DATA_TYPE, DATA_ID, SORT, REMARK, STATUS, CREATE_DATE,
        CREATED, MODIFY_DATE,
        MODIFIED,USER_DEFINED_NAME,USER_DEFINED_URL,USER_DEFINED_TYPE,USER_DEFINED_PICPATH,SITE_ID,PRODUCT_SKU_ID
        from CMS_WINDOW_DATA where WINDOW_ID
        in (select WINDOW_ID from cms_page_window where page_id in
        <iterate open="(" close=")" conjunction="," property="pageIds">
            #pageIds[]#
        </iterate>
        ) and DATA_TYPE=#dataType:INTEGER# and SITE_ID =#siteId:INTEGER#
    </select>

    <!-- 根据站点返回窗口数据集 -->
    <select id="abatorgenerated_queryWindowDataBySite"
            resultMap="abatorgenerated_CmsWindowDataResult" parameterClass="java.lang.Integer">
   
  
    
    
     select a.WINDOW_DATA_ID, a.WINDOW_ID, a.DATA_TYPE, a.DATA_ID, a.SORT, a.REMARK, a.STATUS, a.CREATE_DATE,a.SITE_ID,
      a.CREATED, a.MODIFY_DATE, a.MODIFIED,a.USER_DEFINED_NAME,a.USER_DEFINED_URL,a.USER_DEFINED_TYPE,a.USER_DEFINED_PICPATH,a.PRODUCT_SKU_ID
    from CMS_WINDOW_DATA a,cms_window b
    
    where a.window_id=b.window_id and b.paramstype=2 and a.site_id =#site:INTEGER#  and  a.data_type=2 order by sort asc
    
  </select>


    <!-- 返回子窗口 -->
    <select id="abatorgenerated_querySubWindowData" resultMap="abatorgenerated_CmsWindowResult"
            parameterClass="com.pltfm.cms.vobject.CmsWindowData">
   
  select   w.window_id     winId,
          w.name          winName,
          w.path          winPath,
          w.paramsType    paramsType
    from CMS_WINDOW_DATA wd, cms_window w  where
    wd.data_id=w.window_id and w.status=0 and  wd.data_type=#dataType:INTEGER#
    
    and    wd.WINDOW_ID = #windowId:INTEGER# order by wd.sort asc
  </select>

    <!-- 根据窗口对象返回窗口绑定数据类型 -->
    <select id="abatorgenerated_queryWindowDataType" resultClass="java.lang.Integer"
            parameterClass="com.pltfm.cms.vobject.CmsWindow">
   
   select t.data_type from CMS_WINDOW_DATA t 
    where t.window_id = #windowId:INTEGER# group by t.data_type
  </select>


    <!-- 根据数据类型号和产品ID,返回所有涉及到的页面列表   递归窗口绑窗口的数据 -->
    <select id="abatorgenerated_queryAllPage" resultClass="java.lang.Integer"
            parameterClass="java.lang.String">
   
	  select distinct page_id from cms_page_window pw where exists 
	(select 1 from 
	(select window_id  from  cms_window_data  where data_type=0 and  
	
	

 data_id in
                       (select /*+ cardinality(tab_num1,200) */
                         column_value
                          from table(cast(fun_numlist(#sqlParam:VARCHAR#) as number_tt))  tab_num1
                                     where rownum >= 0)
  group by window_id) wd where  
	
	wd.window_id =pw.window_id)

	  union
           
               select distinct page_id
    from cms_page_window  pw
    
   where exists (select 1
            from ( select /*+ connect_by_filtering */ distinct window_id from cms_window_data where data_type=4  start with  
            
             window_id  in (select window_id from cms_window_data  where  
             
            data_id in
                       (select /*+ cardinality(tab_num2,200) */
                         column_value
                          from table(cast(fun_numlist(#sqlParam:VARCHAR#) as number_tt)) tab_num2
                                     where rownum >= 0)
            
             and data_type=0 group by window_id)
             
            connect by prior window_id=data_id) wd
           where
          
           wd.window_id = pw.window_id)

  </select>


    <select id="abatorgenerated_selectByPrimaryKey" resultMap="abatorgenerated_CmsWindowDataResult"
            parameterClass="com.pltfm.cms.vobject.CmsWindowData">
        <!--
          WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
          This element was generated on Tue Sep 03 08:57:00 CST 2013.
        -->
        select WINDOW_DATA_ID, WINDOW_ID, DATA_TYPE, DATA_ID, SORT, REMARK, STATUS, CREATE_DATE,
        CREATED, MODIFY_DATE,
        MODIFIED,USER_DEFINED_NAME,USER_DEFINED_URL,USER_DEFINED_TYPE,USER_DEFINED_PICPATH,SITE_ID,PRODUCT_SKU_ID
        from CMS_WINDOW_DATA
        where WINDOW_DATA_ID = #windowDataId:DECIMAL#
    </select>
    <select id="abatorgenerated_selectByExample" resultMap="abatorgenerated_CmsWindowDataResult"
            parameterClass="com.pltfm.cms.vobject.CmsWindowDataExample">
        <!--
          WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
          This element was generated on Tue Sep 03 08:57:00 CST 2013.
        -->
        select WINDOW_DATA_ID, WINDOW_ID, DATA_TYPE, DATA_ID, SORT, REMARK, STATUS, CREATE_DATE,
        CREATED, MODIFY_DATE,
        MODIFIED,USER_DEFINED_NAME,USER_DEFINED_URL,USER_DEFINED_TYPE,USER_DEFINED_PICPATH,SITE_ID,PRODUCT_SKU_ID
        from CMS_WINDOW_DATA
        <isParameterPresent>
            <include refid="CMS_WINDOW_DATA.abatorgenerated_Example_Where_Clause"/>
            <isNotNull property="orderByClause">
                order by $orderByClause$
            </isNotNull>
        </isParameterPresent>
    </select>
    <select id="maxSortByExample" resultClass="java.lang.Integer"
            parameterClass="com.pltfm.cms.vobject.CmsWindowDataExample">
        select max(SORT)
        from CMS_WINDOW_DATA
        <isParameterPresent>
            <include refid="CMS_WINDOW_DATA.abatorgenerated_Example_Where_Clause"/>
        </isParameterPresent>
    </select>
    <delete id="abatorgenerated_deleteByPrimaryKey"
            parameterClass="com.pltfm.cms.vobject.CmsWindowData">
        <!--
          WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
          This element was generated on Tue Sep 03 08:57:00 CST 2013.
        -->
        delete from CMS_WINDOW_DATA
        where WINDOW_DATA_ID = #windowDataId:DECIMAL#
    </delete>
    <delete id="abatorgenerated_deleteByExample"
            parameterClass="com.pltfm.cms.vobject.CmsWindowDataExample">
        <!--
          WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
          This element was generated on Tue Sep 03 08:57:00 CST 2013.
        -->
        delete from CMS_WINDOW_DATA
        <include refid="CMS_WINDOW_DATA.abatorgenerated_Example_Where_Clause"/>
    </delete>
    <insert id="abatorgenerated_insert" parameterClass="com.pltfm.cms.vobject.CmsWindowData">
        <!--
          WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
          This element was generated on Tue Sep 03 08:57:00 CST 2013.
        -->

        <selectKey resultClass="java.lang.Integer" keyProperty="windowDataId">
            select seq_app_cms.nextval from dual
        </selectKey>


        insert into CMS_WINDOW_DATA (WINDOW_DATA_ID, WINDOW_ID, DATA_TYPE, DATA_ID, SORT, REMARK,
        STATUS, CREATE_DATE, CREATED, MODIFY_DATE, MODIFIED,USER_DEFINED_NAME,USER_DEFINED_URL,
        USER_DEFINED_TYPE,USER_DEFINED_PICPATH,SITE_ID,PRODUCT_SKU_ID)
        values (#windowDataId:DECIMAL#, #windowId:DECIMAL#, #dataType:DECIMAL#, #dataId:DECIMAL#,
        #sort:DECIMAL#, #remark:VARCHAR#, #status:DECIMAL#, #createDate:DATE#, #created:DECIMAL#,
        #modifyDate:DATE#,
        #modified:DECIMAL#,#user_defined_name:VARCHAR#,#user_defined_url:VARCHAR#,
        #user_defined_type:DECIMAL#,#user_defined_picpath:VARCHAR#,#siteId:DECIMAL#,#productSkuId:DECIMAL#
        )
    </insert>
    <insert id="abatorgenerated_addcmsWindowData"
            parameterClass="com.pltfm.cms.vobject.CmsWindowData">
        <selectKey resultClass="java.lang.Integer" keyProperty="windowDataId">
            select seq_app_cms.nextval from dual
        </selectKey>
        insert into CMS_WINDOW_DATA (WINDOW_DATA_ID, WINDOW_ID, DATA_TYPE, DATA_ID, SORT, REMARK,
        STATUS, CREATE_DATE, CREATED, MODIFY_DATE, MODIFIED,USER_DEFINED_NAME,USER_DEFINED_URL,
        USER_DEFINED_TYPE,USER_DEFINED_PICPATH,SITE_ID,PRODUCT_SKU_ID)
        values (#windowDataId:DECIMAL#, #windowId:DECIMAL#, #dataType:DECIMAL#, #dataId:DECIMAL#,
        #sort:DECIMAL#, #remark:VARCHAR#, #status:DECIMAL#, #createDate:DATE#, #created:DECIMAL#,
        #modifyDate:DATE#,
        #modified:DECIMAL#,#user_defined_name:VARCHAR#,#user_defined_url:VARCHAR#,
        #user_defined_type:DECIMAL#,#user_defined_picpath:VARCHAR#,#siteId:DECIMAL#,#productSkuId:DECIMAL#
        )
    </insert>
    <update id="abatorgenerated_updateByPrimaryKey"
            parameterClass="com.pltfm.cms.vobject.CmsWindowData">
        <!--
          WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
          This element was generated on Tue Sep 03 08:57:00 CST 2013.
        -->
        update CMS_WINDOW_DATA
        set WINDOW_ID = #windowId:DECIMAL#,
        DATA_TYPE = #dataType:DECIMAL#,
        DATA_ID = #dataId:DECIMAL#,
        SORT = #sort:DECIMAL#,
        REMARK = #remark:VARCHAR#,
        STATUS = #status:DECIMAL#,
        CREATE_DATE = #createDate:DATE#,
        CREATED = #created:DECIMAL#,
        MODIFY_DATE = #modifyDate:DATE#,
        MODIFIED = #modified:DECIMAL#,
        USER_DEFINED_NAME = #user_defined_name:VARCHAR#,
        USER_DEFINED_URL = #user_defined_url:VARCHAR#,
        USER_DEFINED_TYPE = #user_defined_type:DECIMAL#,
        USER_DEFINED_PICPATH= #user_defined_picpath:VARCHAR#
        where WINDOW_DATA_ID = #windowDataId:DECIMAL#
    </update>
    <update id="abatorgenerated_updateByPrimaryKeySelective"
            parameterClass="com.pltfm.cms.vobject.CmsWindowData">
        <!--
          WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
          This element was generated on Tue Sep 03 08:57:00 CST 2013.
        -->
        update CMS_WINDOW_DATA
        <dynamic prepend="set">
            <isNotNull prepend="," property="windowId">
                WINDOW_ID = #windowId:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="dataType">
                DATA_TYPE = #dataType:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="dataId">
                DATA_ID = #dataId:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="sort">
                SORT = #sort:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="remark">
                REMARK = #remark:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="status">
                STATUS = #status:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="createDate">
                CREATE_DATE = #createDate:DATE#
            </isNotNull>
            <isNotNull prepend="," property="created">
                CREATED = #created:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="modifyDate">
                MODIFY_DATE = #modifyDate:DATE#
            </isNotNull>
            <isNotNull prepend="," property="modified">
                MODIFIED = #modified:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="user_defined_name">
                USER_DEFINED_NAME = #user_defined_name:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="user_defined_url">
                USER_DEFINED_URL = #user_defined_url:VARCHAR#
            </isNotNull>
        </dynamic>
        where WINDOW_DATA_ID = #windowDataId:DECIMAL#
    </update>

    <!--
       动态修改
     -->
    <update id="abatorgenerated_update" parameterClass="com.pltfm.cms.vobject.CmsWindowData">
        <!--
          WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
          This element was generated on Tue Sep 03 08:57:00 CST 2013.
        -->
        update CMS_WINDOW_DATA
        <dynamic prepend="set">
            <isNotNull prepend="," property="windowId">
                WINDOW_ID = #windowId:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="dataType">
                DATA_TYPE = #dataType:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="dataId">
                DATA_ID = #dataId:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="sort">
                SORT = #sort:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="remark">
                REMARK = #remark:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="status">
                STATUS = #status:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="createDate">
                CREATE_DATE = #createDate:DATE#
            </isNotNull>

            <isNotNull prepend="," property="created">
                CREATED = #created:DECIMAL#
            </isNotNull>

            <isNotNull prepend="," property="modifyDate">
                MODIFY_DATE = #modifyDate:DATE#
            </isNotNull>

            <isNotNull prepend="," property="modified">
                MODIFIED = #modified:DECIMAL#
            </isNotNull>

            <isNotNull prepend="," property="user_defined_name">
                USER_DEFINED_NAME = #user_defined_name:VARCHAR#
            </isNotNull>


            <isNotNull prepend="," property="user_defined_url">
                USER_DEFINED_URL = #user_defined_url:VARCHAR#
            </isNotNull>

            <isNotNull prepend="," property="user_defined_type">
                USER_DEFINED_TYPE = #user_defined_type:DECIMAL#
            </isNotNull>

            <isNotNull prepend="," property="user_defined_picpath">
                USER_DEFINED_PICPATH = #user_defined_picpath:VARCHAR#
            </isNotNull>
        </dynamic>
        where WINDOW_DATA_ID = #windowDataId:DECIMAL#
    </update>


    <select id="abatorgenerated_countByExample"
            parameterClass="com.pltfm.cms.vobject.CmsWindowDataExample"
            resultClass="java.lang.Integer">
        <!--
          WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
          This element was generated on Tue Sep 03 08:57:00 CST 2013.
        -->
        select count(*) from CMS_WINDOW_DATA
        <include refid="CMS_WINDOW_DATA.abatorgenerated_Example_Where_Clause"/>
    </select>
    <update id="abatorgenerated_updateByExampleSelective">
        <!--
          WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
          This element was generated on Tue Sep 03 08:57:00 CST 2013.
        -->
        update CMS_WINDOW_DATA
        <dynamic prepend="set">
            <isNotNull prepend="," property="record.windowDataId">
                WINDOW_DATA_ID = #record.windowDataId:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="record.windowId">
                WINDOW_ID = #record.windowId:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="record.dataType">
                DATA_TYPE = #record.dataType:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="record.dataId">
                DATA_ID = #record.dataId:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="record.sort">
                SORT = #record.sort:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="record.remark">
                REMARK = #record.remark:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.status">
                STATUS = #record.status:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="record.createDate">
                CREATE_DATE = #record.createDate:DATE#
            </isNotNull>
            <isNotNull prepend="," property="record.created">
                CREATED = #record.created:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="record.modifyDate">
                MODIFY_DATE = #record.modifyDate:DATE#
            </isNotNull>
            <isNotNull prepend="," property="record.modified">
                MODIFIED = #record.modified:DECIMAL#
            </isNotNull>
        </dynamic>
        <isParameterPresent>
            <include refid="CMS_WINDOW_DATA.abatorgenerated_Example_Where_Clause"/>
        </isParameterPresent>
    </update>
    <update id="abatorgenerated_updateByExample">
        <!--
          WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
          This element was generated on Tue Sep 03 08:57:00 CST 2013.
        -->
        update CMS_WINDOW_DATA
        set WINDOW_DATA_ID = #record.windowDataId:DECIMAL#,
        WINDOW_ID = #record.windowId:DECIMAL#,
        DATA_TYPE = #record.dataType:DECIMAL#,
        DATA_ID = #record.dataId:DECIMAL#,
        SORT = #record.sort:DECIMAL#,
        REMARK = #record.remark:VARCHAR#,
        STATUS = #record.status:DECIMAL#,
        CREATE_DATE = #record.createDate:DATE#,
        CREATED = #record.created:DECIMAL#,
        MODIFY_DATE = #record.modifyDate:DATE#,
        MODIFIED = #record.modified:DECIMAL#
        <isParameterPresent>
            <include refid="CMS_WINDOW_DATA.abatorgenerated_Example_Where_Clause"/>
        </isParameterPresent>
    </update>


    <!-- 分页查询窗口数据列表信息 -->
    <select id="abatorgenerated_pageByWindowData" resultMap="abatorgenerated_CmsWindowDataResult"
            parameterClass="com.pltfm.cms.vobject.CmsWindowData">
        select WINDOW_DATA_ID, WINDOW_ID, DATA_TYPE, DATA_ID, SORT, REMARK, STATUS, CREATE_DATE,
        CREATED, MODIFY_DATE,
        MODIFIED,USER_DEFINED_NAME,USER_DEFINED_URL,USER_DEFINED_TYPE,USER_DEFINED_PICPATH,SITE_ID,PRODUCT_SKU_ID
        FROM (
        select ROW_NUMBER() OVER(order by WINDOW_DATA_ID desc) as view_row_number, tt.* FROM
        CMS_WINDOW_DATA tt
        <dynamic prepend="where">
            <isNotNull property="dataType">
                <isNotEmpty prepend="and" property="dataType">
                    DATA_TYPE = #dataType:INTEGER#
                </isNotEmpty>
            </isNotNull>

            <isNotNull property="siteId">
                <isNotEmpty prepend="and" property="siteId">
                    SITE_ID = #siteId:INTEGER#
                </isNotEmpty>
            </isNotNull>

            <isNotNull property="dataId">
                <isNotEmpty prepend="and" property="dataId">
                    DATA_ID = #dataId:INTEGER#
                </isNotEmpty>
            </isNotNull>

            <isNotNull property="windowId">
                <isNotEmpty prepend="and" property="windowId">
                    WINDOW_ID = #windowId:INTEGER#
                </isNotEmpty>
            </isNotNull>
        </dynamic>
        )
        <![CDATA[ where view_row_number <= #endIndex# and view_row_number > #startIndex# ]]>
    </select>
    <!-- 通过多条件查询统计窗口数据总条数 -->
    <select id="abatorgenerated_countByWindowData"
            parameterClass="com.pltfm.cms.vobject.CmsWindowData" resultClass="java.lang.Integer">
        select count(*) from CMS_WINDOW_DATA tt
        <dynamic prepend="where">
            <isNotNull property="dataType">
                <isNotEmpty prepend="and" property="dataType">
                    DATA_TYPE = #dataType:INTEGER#
                </isNotEmpty>
            </isNotNull>

            <isNotNull property="siteId">
                <isNotEmpty prepend="and" property="siteId">
                    SITE_ID = #siteId:INTEGER#
                </isNotEmpty>
            </isNotNull>

            <isNotNull property="dataId">
                <isNotEmpty prepend="and" property="dataId">
                    DATA_ID = #dataId:INTEGER#
                </isNotEmpty>
            </isNotNull>

            <isNotNull property="windowId">
                <isNotEmpty prepend="and" property="windowId">
                    WINDOW_ID = #windowId:INTEGER#
                </isNotEmpty>
            </isNotNull>
        </dynamic>
    </select>
    <delete id="abatorgenerated_deleteByWindowData"
            parameterClass="com.pltfm.cms.vobject.CmsWindowData">
        delete from CMS_WINDOW_DATA
        <dynamic prepend="where">
            <isNotEmpty property="windowDataId">
                <isNotNull prepend="and" property="windowDataId">
                    WINDOW_DATA_ID = #windowDataId#
                </isNotNull>
            </isNotEmpty>
            <isNotEmpty property="windowId">
                <isNotNull prepend="and" property="windowId">
                    WINDOW_ID = #windowId#
                </isNotNull>
            </isNotEmpty>
        </dynamic>
    </delete>

    <select id="abatorgenerated_selectByWindowAndSkuId"
            resultMap="abatorgenerated_CmsWindowDataResult"
            parameterClass="com.pltfm.cms.vobject.CmsWindowData">
        <!--
          WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
          This element was generated on Tue Sep 03 08:57:00 CST 2013.
        -->
        select WINDOW_DATA_ID, WINDOW_ID, DATA_TYPE, DATA_ID, SORT, REMARK, STATUS, CREATE_DATE,
        CREATED, MODIFY_DATE,
        MODIFIED,USER_DEFINED_NAME,USER_DEFINED_URL,USER_DEFINED_TYPE,USER_DEFINED_PICPATH,SITE_ID,PRODUCT_SKU_ID
        from CMS_WINDOW_DATA
        where WINDOW_ID = #windowId:DECIMAL# and PRODUCT_SKU_ID = #productSkuId:DECIMAL#
    </select>

    <update id="sort_updateByPrimaryKey" parameterClass="com.pltfm.cms.vobject.CmsWindowData">
    update CMS_WINDOW_DATA
    set SORT = #sort:DECIMAL# where WINDOW_DATA_ID = #windowDataId:DECIMAL#
  </update>
    <update id="userDefinedName_updateByPrimaryKey"
            parameterClass="com.pltfm.cms.vobject.CmsWindowData">
    update CMS_WINDOW_DATA
    set USER_DEFINED_NAME = #user_defined_name:VARCHAR#,status = #status:DECIMAL#  where WINDOW_DATA_ID = #windowDataId:DECIMAL#
  </update>

    <select id="selectUserDefinedNameByWindId" resultMap="abatorgenerated_CmsWindowDataResult1"
            parameterClass="com.pltfm.cms.vobject.CmsWindowData">
    select WINDOW_DATA_ID, WINDOW_ID,USER_DEFINED_NAME,status from CMS_WINDOW_DATA
    where WINDOW_ID = #windowId:DECIMAL# and data_type=6 and USER_DEFINED_NAME is not null
  </select>

    <select id="queryByWindIdAndUserDefinedName" resultMap="abatorgenerated_CmsWindowDataResult1"
            parameterClass="com.pltfm.cms.vobject.CmsWindowData">
    select WINDOW_DATA_ID, WINDOW_ID,USER_DEFINED_NAME,status from CMS_WINDOW_DATA
    where WINDOW_ID = #windowId:DECIMAL# and data_type=6
  </select>
    <!-- 默认添加至搜索类目窗口 -->

    <procedure id="abatorgenerated_addcmsWindowDataToSearchCategory"
               parameterMap="cmsWindowNameMap">
        {call p_addSearchCategory(?,?)}
    </procedure>

</sqlMap>
