<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="CMS_THEME_TEMPLATE" >
  <resultMap id="abatorgenerated_CmsThemeTempletResult" class="com.pltfm.cms.vobject.CmsThemeTemplate" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Jun 09 15:14:03 CST 2014.
    -->
    <result column="THEME_TEMPLATE_ID" property="themeTemplateId" jdbcType="Integer" />
    <result column="THEME_ID" property="themeId" jdbcType="Integer" />
    <result column="TEMPLATE_ID" property="templateId" jdbcType="Integer" />
    <result column="TYPE" property="type" jdbcType="Integer" />
    <result column="SITE_ID" property="siteId" jdbcType="Integer" />
    <result column="REMARK" property="remark" jdbcType="VARCHAR" />
    <result column="STATUS" property="status" jdbcType="Integer" />
    <result column="CREATE_DATE" property="createDate" jdbcType="DATE" />
    <result column="CREATED" property="created" jdbcType="Integer" />
    <result column="MODIFY_DATE" property="modifyDate" jdbcType="DATE" />
    <result column="MODIFIED" property="modified" jdbcType="Integer" />
  </resultMap>
  
  
  <resultMap id="abatorgenerated_CmsThemeBandResult" class="com.pltfm.cms.vobject.CmsThemeTemplate" >
    <result column="TYPE" property="type" jdbcType="Integer" />
    <result column="Name" property="name" jdbcType="VARCHAR" />
    <result column="content" property="content" jdbcType="VARCHAR" />
     <result column="theme_template_id" property="themeTemplateId" jdbcType="Integer" />
     
      <result column="theme_id" property="themeId" jdbcType="Integer" />
    
 
  </resultMap>
  
   <!-- 分页查询窗口数据列表信息 -->
   <select id="abatorgenerated_themeTempList" resultMap="abatorgenerated_CmsThemeBandResult"  parameterClass="com.pltfm.cms.vobject.CmsThemeTemplate">
    

    
    
          select ct.name,ct.theme as content,ct.type,ctt.theme_id,ctt.theme_template_id    
       from
            (
               select  ROW_NUMBER() OVER(order by MODIFY_DATE desc nulls last) as view_row_number, tt.* FROM CMS_THEME_TEMPLATE tt               
                 <dynamic prepend="where">
				     
				     	  <isNotNull property="themeId">
							  <isNotEmpty prepend="and" property="themeId">
								tt.THEME_ID = #themeId#
							  </isNotEmpty>
						  </isNotNull>
						    <isNotNull property="type">
							  <isNotEmpty prepend="and" property="type">
								tt.type = #type#
							  </isNotEmpty>
						  </isNotNull>
				</dynamic>
						  
				   ) ctt ,cms_template ct where ctt.template_id=ct.template_id                    
                                                                 	
              
         <![CDATA[ and view_row_number <= #endIndex# and view_row_number > #startIndex# ]]>
    </select>
  
     <!-- 通过多条件查询统计窗口数据总条数 -->
  <select id="abatorgenerated_themeTempCount" parameterClass="com.pltfm.cms.vobject.CmsThemeTemplate" resultClass="java.lang.Integer" >
	select count(*) from  CMS_THEME_TEMPLATE tt
		   <dynamic prepend="where">
				     	   <isNotNull property="themeId">
							  <isNotEmpty prepend="and" property="themeId">
								tt.THEME_ID = #themeId#
							  </isNotEmpty>
						  </isNotNull>
						    <isNotNull property="type">
							  <isNotEmpty prepend="and" property="type">
								tt.type = #type#
							  </isNotEmpty>
						  </isNotNull>
						 
					</dynamic>
	</select>
	
 
  <select id="abatorgenerated_selectByPrimaryKey" resultMap="abatorgenerated_CmsThemeTempletResult" parameterClass="com.pltfm.cms.vobject.CmsThemeTemplate" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Jun 09 15:14:03 CST 2014.
    -->
    select THEME_TEMPLATE_ID, THEME_ID, TEMPLATE_ID, TYPE, SITE_ID, REMARK, STATUS, CREATE_DATE,
      CREATED, MODIFY_DATE, MODIFIED
    from CMS_THEME_TEMPLATE
    where THEME_TEMPLATE_ID = #themeTemplateId:Integer#
  </select>
 
  <delete id="abatorgenerated_deleteByPrimaryKey" parameterClass="java.lang.Integer" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Jun 09 15:14:03 CST 2014.
    -->
    delete from CMS_THEME_TEMPLATE
    where THEME_TEMPLATE_ID = #themeTemplateId:Integer#
  </delete>
 
  <insert id="abatorgenerated_insert" parameterClass="com.pltfm.cms.vobject.CmsThemeTemplate" >
     <selectKey keyProperty="themeTemplateId">
    	select SEQ_CMS_THEME.nextval from dual
    </selectKey>
    insert into CMS_THEME_TEMPLATE (THEME_TEMPLATE_ID, THEME_ID, TEMPLATE_ID, TYPE, SITE_ID, REMARK,
      STATUS, CREATE_DATE, CREATED, MODIFY_DATE, MODIFIED)
    values (#themeTemplateId:Integer#, #themeId:Integer#, #templateId:Integer#, #type:Integer#,
      #siteId:Integer#, #remark:VARCHAR#, #status:Integer#, #createDate:DATE#, #created:Integer#,
      #modifyDate:DATE#, #modified:Integer#)
  </insert>
  
  <update id="abatorgenerated_updateByPrimaryKey" parameterClass="com.pltfm.cms.vobject.CmsThemeTemplate" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Jun 09 15:14:03 CST 2014.
    -->
    update CMS_THEME_TEMPLATE
    set THEME_ID = #themeId:Integer#,
      TEMPLATE_ID = #templateId:Integer#,
      TYPE = #type:Integer#,
      SITE_ID = #siteId:Integer#,
      REMARK = #remark:VARCHAR#,
      STATUS = #status:Integer#,
      CREATE_DATE = #createDate:DATE#,
      CREATED = #created:Integer#,
      MODIFY_DATE = #modifyDate:DATE#,
      MODIFIED = #modified:Integer#
    where THEME_TEMPLATE_ID = #themeTemplateId:Integer#
  </update>
  <update id="abatorgenerated_updateByPrimaryKeySelective" parameterClass="com.pltfm.cms.vobject.CmsThemeTemplate" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Jun 09 15:14:03 CST 2014.
    -->
    update CMS_THEME_TEMPLATE
    <dynamic prepend="set" >
      <isNotNull prepend="," property="themeId" >
        THEME_ID = #themeId:Integer#
      </isNotNull>
      <isNotNull prepend="," property="templateId" >
        TEMPLATE_ID = #templateId:Integer#
      </isNotNull>
      <isNotNull prepend="," property="type" >
        TYPE = #type:Integer#
      </isNotNull>
      <isNotNull prepend="," property="siteId" >
        SITE_ID = #siteId:Integer#
      </isNotNull>
      <isNotNull prepend="," property="remark" >
        REMARK = #remark:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="status" >
        STATUS = #status:Integer#
      </isNotNull>
      <isNotNull prepend="," property="createDate" >
        CREATE_DATE = #createDate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="created" >
        CREATED = #created:Integer#
      </isNotNull>
      <isNotNull prepend="," property="modifyDate" >
        MODIFY_DATE = #modifyDate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="modified" >
        MODIFIED = #modified:Integer#
      </isNotNull>
    </dynamic>
    where THEME_TEMPLATE_ID = #themeTemplateId:Integer#
  </update>


<!-- 查询主题模板列表信息 -->
   <select id="abatorgenerated_bythemeTemp" resultMap="abatorgenerated_CmsThemeTempletResult"  parameterClass="com.pltfm.cms.vobject.CmsThemeTemplate">
    
   select THEME_TEMPLATE_ID, THEME_ID, TEMPLATE_ID, TYPE, SITE_ID, REMARK, STATUS, CREATE_DATE,
      CREATED, MODIFY_DATE, MODIFIED
    from CMS_THEME_TEMPLATE
				     <dynamic prepend="where">
				     	  <isNotNull property="themeId">
							  <isNotEmpty prepend="and" property="themeId">
								THEME_ID = #themeId#
							  </isNotEmpty>
						  </isNotNull>
						   <isNotNull property="type">
							  <isNotEmpty prepend="and" property="type">
								TYPE = #type#
							  </isNotEmpty>
						  </isNotNull>
					</dynamic>
    </select>
     
  
</sqlMap>