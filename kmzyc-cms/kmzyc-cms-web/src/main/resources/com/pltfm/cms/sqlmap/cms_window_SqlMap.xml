<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="CMS_WINDOW" >
  <resultMap id="abatorgenerated_CmsWindowResult" class="com.pltfm.cms.vobject.CmsWindow" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:56:38 CST 2013.
    -->
    <result column="WINDOW_ID" property="windowId"/>
    <result column="TEMPLATE_ID" property="templateId" />
    <result column="NAME" property="name"/>
    <result column="THEME" property="theme" />
    <result column="PATH" property="path" />
    <result column="PARAMSTYPE" property="paramsType" />
    <result column="REMARK" property="remark"/>
    <result column="STATUS" property="status" />
    <result column="CREATE_DATE" property="createDate" />
    <result column="CREATED" property="created"  />
    <result column="MODIFY_DATE" property="modifyDate"  />
    <result column="MODIFIED" property="modified" />
    <result column="SITE_ID" property="siteId" />
  </resultMap>
  <sql id="abatorgenerated_Example_Where_Clause" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:56:38 CST 2013.
    -->
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate" >
      <isEqual property="oredCriteria[].valid" compareValue="true" >
        (
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and" >
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and" >
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and" >
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction="," >
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and" >
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  <select id="abatorgenerated_selectByPrimaryKey" resultMap="abatorgenerated_CmsWindowResult" parameterClass="com.pltfm.cms.vobject.CmsWindow" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:56:38 CST 2013.
    -->
    select WINDOW_ID, TEMPLATE_ID, NAME, THEME, PATH, REMARK,PARAMSTYPE,STATUS, CREATE_DATE, CREATED,
      MODIFY_DATE, MODIFIED,SITE_ID
    from CMS_WINDOW
    where WINDOW_ID = #windowId#
  </select>
  <select id="abatorgenerated_selectByExample" resultMap="abatorgenerated_CmsWindowResult" parameterClass="com.pltfm.cms.vobject.CmsWindowExample" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:56:38 CST 2013.
    -->
    select WINDOW_ID, TEMPLATE_ID, NAME, THEME, PATH, REMARK,PARAMSTYPE,STATUS, CREATE_DATE, CREATED,
      MODIFY_DATE, MODIFIED,SITE_ID
    from CMS_WINDOW
    <isParameterPresent >
      <include refid="CMS_WINDOW.abatorgenerated_Example_Where_Clause" />
      <isNotNull property="orderByClause" >
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <delete id="abatorgenerated_deleteByPrimaryKey" parameterClass="com.pltfm.cms.vobject.CmsWindow" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:56:38 CST 2013.
    -->
    delete from CMS_WINDOW
    where WINDOW_ID = #windowId#
  </delete>
  <delete id="abatorgenerated_deleteByExample" parameterClass="com.pltfm.cms.vobject.CmsWindowExample" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:56:38 CST 2013.
    -->
    delete from CMS_WINDOW
    <include refid="CMS_WINDOW.abatorgenerated_Example_Where_Clause" />
  </delete>
  <insert id="abatorgenerated_insert" parameterClass="com.pltfm.cms.vobject.CmsWindow" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:56:38 CST 2013.
    -->
    <selectKey keyProperty="windowId">
    	select SEQ_CMS_WINDOW.nextval from dual
    </selectKey>
    insert into CMS_WINDOW (WINDOW_ID, TEMPLATE_ID, NAME,THEME,PARAMSTYPE,PATH, REMARK, STATUS, CREATE_DATE,
      CREATED, MODIFY_DATE, MODIFIED,SITE_ID)
    values (#windowId#, #templateId#, #name#, #theme#,#paramsType#,
      #path#, #remark#, #status#, #createDate#, #created#,
      #modifyDate#, #modified#,#siteId#)
  </insert>
  <update id="abatorgenerated_updateByPrimaryKey" parameterClass="com.pltfm.cms.vobject.CmsWindow" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:56:38 CST 2013.
    -->
    update CMS_WINDOW
    set TEMPLATE_ID = #templateId#,
      NAME = #name#,
      THEME = #theme#,
      PATH = #path#,
      PARAMSTYPE=#paramsType#,
      REMARK = #remark#,
      STATUS = #status#,
      CREATE_DATE = #createDate#,
      CREATED = #created#,
      MODIFY_DATE = #modifyDate#,
      MODIFIED = #modified#
    where WINDOW_ID = #windowId#
  </update>
  <update id="abatorgenerated_updateByPrimaryKeySelective" parameterClass="com.pltfm.cms.vobject.CmsWindow" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:56:38 CST 2013.
    -->
    update CMS_WINDOW
    <dynamic prepend="set" >
      <isNotNull prepend="," property="templateId" >
        TEMPLATE_ID = #templateId#
      </isNotNull>
      <isNotNull prepend="," property="name" >
        NAME = #name#
      </isNotNull>
      <isNotNull prepend="," property="theme" >
        THEME = #theme#
      </isNotNull>
      <isNotNull prepend="," property="path" >
        PATH = #path#
      </isNotNull>
      <isNotNull prepend="," property="paramsType" >
        PARAMSTYPE = #paramsType#
      </isNotNull>
      <isNotNull prepend="," property="remark" >
        REMARK = #remark#
      </isNotNull>
      <isNotNull prepend="," property="status" >
        STATUS = #status#
      </isNotNull>
      <isNotNull prepend="," property="createDate" >
        CREATE_DATE = #createDate#
      </isNotNull>
      <isNotNull prepend="," property="created" >
        CREATED = #created#
      </isNotNull>
      <isNotNull prepend="," property="modifyDate" >
        MODIFY_DATE = #modifyDate#
      </isNotNull>
      <isNotNull prepend="," property="modified" >
        MODIFIED = #modified#
      </isNotNull>
    </dynamic>
    where WINDOW_ID = #windowId#
  </update>
  <select id="abatorgenerated_countByExample" parameterClass="com.pltfm.cms.vobject.CmsWindowExample" resultClass="java.lang.Integer" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:56:38 CST 2013.
    -->
    select count(*) from CMS_WINDOW
    <include refid="CMS_WINDOW.abatorgenerated_Example_Where_Clause" />
  </select>
  <update id="abatorgenerated_updateByExampleSelective" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:56:38 CST 2013.
    -->
    update CMS_WINDOW
    <dynamic prepend="set" >
      <isNotNull prepend="," property="record.windowId" >
        WINDOW_ID = #record.windowId#
      </isNotNull>
      <isNotNull prepend="," property="record.templateId" >
        TEMPLATE_ID = #record.templateId#
      </isNotNull>
      <isNotNull prepend="," property="record.name" >
        NAME = #record.name#
      </isNotNull>
      <isNotNull prepend="," property="record.theme" >
        THEME = #record.theme#
      </isNotNull>
      <isNotNull prepend="," property="record.path" >
        PATH = #record.path#
      </isNotNull>
      <isNotNull prepend="," property="record.paramsType" >
        PARAMSTYPE = #record.paramsType#
      </isNotNull>
      <isNotNull prepend="," property="record.remark" >
        REMARK = #record.remark#
      </isNotNull>
      <isNotNull prepend="," property="record.status" >
        STATUS = #record.status#
      </isNotNull>
      <isNotNull prepend="," property="record.createDate" >
        CREATE_DATE = #record.createDate#
      </isNotNull>
      <isNotNull prepend="," property="record.created" >
        CREATED = #record.created#
      </isNotNull>
      <isNotNull prepend="," property="record.modifyDate" >
        MODIFY_DATE = #record.modifyDate#
      </isNotNull>
      <isNotNull prepend="," property="record.modified" >
        MODIFIED = #record.modified#
      </isNotNull>
    </dynamic>
    <isParameterPresent >
      <include refid="CMS_WINDOW.abatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="abatorgenerated_updateByExample" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Sep 03 08:56:38 CST 2013.
    -->
    update CMS_WINDOW
    set WINDOW_ID = #record.windowId#,
      TEMPLATE_ID = #record.templateId#,
      NAME = #record.name#,
      THEME = #record.theme#,
      PATH = #record.path#,
      PARAMSTYPE = #record.paramsType#,
      REMARK = #record.remark#,
      STATUS = #record.status#,
      CREATE_DATE = #record.createDate#,
      CREATED = #record.created#,
      MODIFY_DATE = #record.modifyDate#,
      MODIFIED = #record.modified#
    <isParameterPresent >
      <include refid="CMS_WINDOW.abatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  
   
  <!-- 分页查询窗口数据列表信息 -->
   <select id="abatorgenerated_pageByWindow" resultMap="abatorgenerated_CmsWindowResult"  parameterClass="com.pltfm.cms.vobject.CmsWindow">
    
   select WINDOW_ID, TEMPLATE_ID, NAME, THEME, PATH,PARAMSTYPE,REMARK, STATUS, CREATE_DATE, CREATED,
   MODIFY_DATE, MODIFIED,SITE_ID
    from  (
                       select  ROW_NUMBER() OVER(order by WINDOW_ID desc) as view_row_number, tt.* FROM CMS_WINDOW tt
				     <dynamic prepend="where">
				     	  <isNotNull property="windowId">
							  <isNotEmpty prepend="and" property="windowId">
								tt.WINDOW_ID = #windowId#
							  </isNotEmpty>
						  </isNotNull>
						  				  
				          <isNotNull property="name">
							  <isNotEmpty prepend="and" property="name">
								tt.NAME like '%$name$%'
							  </isNotEmpty>
						  </isNotNull>
						  
						  <isNotNull property="theme">
							  <isNotEmpty prepend="and" property="theme">
								tt.THEME like '%$theme$%'
							  </isNotEmpty>
						  </isNotNull>
						  
						  <isNotNull property="ids">
						      <isNotEmpty prepend="and" property="ids">
						    	$ids$
						      </isNotEmpty>
						  </isNotNull>
						  
						  <isNotNull property="status">
						  	<isNotNull prepend="and" property="status">
						  		tt.STATUS = #status#
						  	</isNotNull>
						  </isNotNull>
						  <isNotNull property="paramsType">
						  	<isNotEmpty prepend="and" property="paramsType">
						  		tt.PARAMSTYPE = #paramsType# 
						  	</isNotEmpty>
						  </isNotNull>
						  
						  
						  	<isNotEmpty property="siteId">
				    		<isNotNull prepend="and" property="siteId">
				    			SITE_ID= #siteId#
				    			
				    		</isNotNull>
				    	</isNotEmpty>
					</dynamic>
              ) 
         <![CDATA[ where view_row_number <= #endIndex# and view_row_number > #startIndex# ]]>
    </select>
    <!-- 通过多条件查询统计窗口数据总条数 -->
  <select id="abatorgenerated_countByWindow" parameterClass="com.pltfm.cms.vobject.CmsWindow" resultClass="java.lang.Integer" >
	select count(*) from  CMS_WINDOW tt
		 <dynamic prepend="where">
				     	  <isNotNull property="windowId">
							  <isNotEmpty prepend="and" property="windowId">
								tt.WINDOW_ID = #windowId#
							  </isNotEmpty>
						  </isNotNull>
						  				  
				          <isNotNull property="name">
							  <isNotEmpty prepend="and" property="name">
								tt.NAME like '%$name$%'
							  </isNotEmpty>
						  </isNotNull>
						  
						  <isNotNull property="theme">
							  <isNotEmpty prepend="and" property="theme">
								tt.THEME like '%$theme$%'
							  </isNotEmpty>
						  </isNotNull>	
						  <isNotNull property="status">
						  	<isNotNull prepend="and" property="status">
						  		tt.STATUS = #status#
						  	</isNotNull>
						  </isNotNull>
						  
						  <isNotNull property="ids">
					     	<isNotEmpty prepend="and" property="ids">
					    	$ids$
					      	</isNotEmpty>
				      	  </isNotNull>
						  
						  <isNotNull property="paramsType">
						  	<isNotEmpty prepend="and" property="paramsType">
						  		tt.PARAMSTYPE = #paramsType# 
						  	</isNotEmpty>
						  </isNotNull>
						  	<isNotEmpty property="siteId">
				    		<isNotNull prepend="and" property="siteId">
				    			SITE_ID= #siteId#
				    			
				    		</isNotNull>
				    	</isNotEmpty>
					</dynamic>
  </select>
  <!-- 根据页面ID查询未绑定的窗口 -->
 <select id="abatorgenerated_getWindowByPageId_Not_In" resultMap="abatorgenerated_CmsWindowResult"  parameterClass="com.pltfm.cms.vobject.CmsWindow">
   select WINDOW_ID, TEMPLATE_ID, NAME, THEME, PATH,PARAMSTYPE,REMARK, STATUS, CREATE_DATE, CREATED,
   MODIFY_DATE, MODIFIED,SITE_ID
    from  (
    	select  ROW_NUMBER() OVER(order by WINDOW_ID desc) as view_row_number, tt.* FROM (
    		select * from cms_window where window_id not in(select window_id from cms_page_window where page_id=#pageId#) and status=0
    		<isNotEmpty property="windowId">
    			<isNotNull prepend="and" property="windowId">
    				WINDOW_ID = #windowId#
    			</isNotNull>
    		</isNotEmpty>
    		<isNotEmpty property="name">
    			<isNotNull prepend="and" property="name">
    				NAME like '%$name$%'
    			</isNotNull>
    		</isNotEmpty>
    		<isNotEmpty property="theme">
    			<isNotNull prepend="and" property="theme">
    				THEME like '%$theme$%'
    			</isNotNull>
    		</isNotEmpty>
    		<isNotEmpty property="startTime">
    			<isNotNull prepend="and" property="startTime">
    				<![CDATA[ CREATE_DATE>=#startTime# ]]>
    			</isNotNull>
    		</isNotEmpty>
    		<isNotEmpty property="endTime">
    			<isNotNull prepend="and" property="endTime">
    				<![CDATA[ CREATE_DATE<=#endTime# ]]>
    			</isNotNull>
    		</isNotEmpty>
    		<isNotEmpty property="siteId">
				  <isNotNull prepend="and" property="siteId">
				    SITE_ID= #siteId#
				  </isNotNull>
			</isNotEmpty>
    		) tt
    	)
          <![CDATA[ where view_row_number <= #endIndex# and view_row_number > #startIndex# ]]>
    </select>
  <select id="abatorgenerated_countByPageId_Not_In" parameterClass="com.pltfm.cms.vobject.CmsWindow" resultClass="java.lang.Integer" >
	select count(*) from  (
    	select  ROW_NUMBER() OVER(order by WINDOW_ID desc) as view_row_number, tt.* FROM (
    		select * from cms_window where window_id not in(select window_id from cms_page_window where page_id=#pageId#) and status=0
    		<isNotEmpty property="windowId">
    			<isNotNull prepend="and" property="windowId">
    				WINDOW_ID = #windowId#
    			</isNotNull>
    		</isNotEmpty>
    		<isNotEmpty property="name">
    			<isNotNull prepend="and" property="name">
    				NAME like '%$name$%'
    			</isNotNull>
    		</isNotEmpty>
    		<isNotEmpty property="theme">
    			<isNotNull prepend="and" property="theme">
    				THEME like '%$theme$%'
    			</isNotNull>
    		</isNotEmpty>
    		<isNotEmpty property="startTime">
    			<isNotNull prepend="and" property="startTime">
    				<![CDATA[ CREATE_DATE>=#startTime#]]>
    			</isNotNull>
    		</isNotEmpty>
    		<isNotEmpty property="endTime">
    			<isNotNull prepend="and" property="endTime">
    				<![CDATA[ CREATE_DATE<=#endTime#]]>
    			</isNotNull>
    		</isNotEmpty>
    		<isNotEmpty property="siteId">
				  <isNotNull prepend="and" property="siteId">
				    SITE_ID= #siteId#
				  </isNotNull>
			</isNotEmpty>
    		) tt  		
    	)
  </select>
    <!-- 根据页面ID查询已绑定的窗口 -->
  <select id="abatorgenerated_getWindowByPageId_In" resultMap="abatorgenerated_CmsWindowResult"  parameterClass="com.pltfm.cms.vobject.CmsWindow">
   select WINDOW_ID, TEMPLATE_ID, NAME, THEME, PATH,PARAMSTYPE,REMARK, STATUS, CREATE_DATE, CREATED,
   MODIFY_DATE, MODIFIED,SITE_ID
    from  (
    	select  ROW_NUMBER() OVER(order by WINDOW_ID desc) as view_row_number, tt.* FROM (
    		select * from cms_window where window_id in(select window_id from cms_page_window where page_id=#pageId#)) tt
    		) 
          <![CDATA[ where view_row_number <= #endIndex# and view_row_number > #startIndex# ]]>
    </select>
  <select id="abatorgenerated_countByPageId_In" parameterClass="java.lang.Integer" resultClass="java.lang.Integer" >
	select count(*) from  (
    	select  ROW_NUMBER() OVER(order by WINDOW_ID desc) as view_row_number, tt.* FROM (
    		select * from cms_window where window_id in(select window_id from cms_page_window where page_id=#pageId#)) tt
    		) 
  </select>
  <select id="abatorgenerated_getWindow" resultMap="abatorgenerated_CmsWindowResult"  parameterClass="com.pltfm.cms.vobject.CmsWindow">
  	select * from CMS_WINDOW 
  	<dynamic prepend="where">
  		<isNotEmpty property="name">
  			<isNotNull prepend="and" property="name">
  				NAME = #name#
  			</isNotNull>
  		</isNotEmpty>
  		<isNotEmpty property="siteId">
  			<isNotNull prepend="and" property="siteId">
  				SITE_ID	 = #siteId#
  			</isNotNull>
  		</isNotEmpty>
  	</dynamic>
  </select>
</sqlMap>