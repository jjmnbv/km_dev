<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="CMS_USER_SITE">
	<resultMap id="ibatorgenerated_BaseResultMap" class="com.pltfm.cms.vobject.CmsUserSite">
		<result column="USER_SITE_ID" property="userSiteId" jdbcType="Integer" />
		<result column="USER_ID" property="userId" jdbcType="Integer" />
		<result column="SITE_ID" property="siteId" jdbcType="Integer" />
		<result column="USER_ID" property="sysUser"
			select="CMS_USER_SITE.ibatorgenerated_selectByUserId" />
		<result column="SITE_ID" property="cmsSite"
			select="CMS_USER_SITE.ibatorgenerated_selectBySiteId" />
		<result column="REMARK" property="remark" jdbcType="VARCHAR" />
		<result column="STATUS" property="status" jdbcType="Integer" />
		<result column="CREATE_DATE" property="createDate" jdbcType="DATE" />
		<result column="CREATED" property="created" jdbcType="Integer" />
		<result column="MODIFY_DATE" property="modifyDate" jdbcType="DATE" />
		<result column="MODIFIED" property="modified" jdbcType="Integer" />
	</resultMap>

	<!-- 站点实体 -->
	<resultMap id="ibatorgenerated_CmsSiteResultMap" class="com.pltfm.cms.vobject.CmsSite">
		<result column="SITE_ID" property="siteId" jdbcType="Integer" />
		<result column="NAME" property="name" jdbcType="VARCHAR" />
		<result column="URL" property="url" jdbcType="VARCHAR" />
		<result column="TEMPLATE_PATH" property="templatePath"
			jdbcType="VARCHAR" />
		<result column="PAGE_OUTPUT_PATH" property="pageOutputPath"
			jdbcType="VARCHAR" />
		<result column="REMARK" property="remark" jdbcType="VARCHAR" />
		<result column="STATUS" property="status" jdbcType="Integer" />
		<result column="CREATE_DATE" property="createDate" jdbcType="DATE" />
		<result column="CREATED" property="created" jdbcType="Integer" />
		<result column="MODIFY_DATE" property="modifyDate" jdbcType="DATE" />
		<result column="MODIFIED" property="modified" jdbcType="Integer" />
	</resultMap>

	<resultMap id="ibatorgenerated_BaseResultMap2" class="com.pltfm.cms.vobject.CmsUserSite">
		<!--
			WARNING - This element is automatically generated by Apache iBATIS
			ibator, do not modify. This element was generated on Fri Nov 15
			13:56:27 CST 2013.
		-->
		<result column="USER_SITE_ID" property="userSiteId" jdbcType="Integer" />
		<result column="USER_ID" property="userId" jdbcType="Integer" />
		<result column="SITE_ID" property="siteId" jdbcType="Integer" />
		<result column="REMARK" property="remark" jdbcType="VARCHAR" />
		<result column="STATUS" property="status" jdbcType="Integer" />
		<result column="CREATE_DATE" property="createDate" jdbcType="DATE" />
		<result column="CREATED" property="created" jdbcType="Integer" />
		<result column="MODIFY_DATE" property="modifyDate" jdbcType="DATE" />
		<result column="MODIFIED" property="modified" jdbcType="Integer" />
		<result column="NAME" property="siteName" jdbcType="VARCHAR" />
	</resultMap>

	<resultMap id="ibatorgenerated_BaseResultMap3" class="com.pltfm.cms.vobject.CmsUserSite">
		<!--
			WARNING - This element is automatically generated by Apache iBATIS
			ibator, do not modify. This element was generated on Fri Nov 15
			13:56:27 CST 2013.
		-->
		<result column="USER_SITE_ID" property="userSiteId" jdbcType="Integer" />
		<result column="USER_ID" property="userId" jdbcType="Integer" />
		<result column="SITE_ID" property="siteId" jdbcType="Integer" />
		<result column="REMARK" property="remark" jdbcType="VARCHAR" />
		<result column="STATUS" property="status" jdbcType="Integer" />
		<result column="CREATE_DATE" property="createDate" jdbcType="DATE" />
		<result column="CREATED" property="created" jdbcType="Integer" />
		<result column="MODIFY_DATE" property="modifyDate" jdbcType="DATE" />
		<result column="MODIFIED" property="modified" jdbcType="Integer" />
		<result column="SITENAME" property="siteName" jdbcType="VARCHAR" />
	</resultMap>

	<resultMap id="ibatorgenerated_BaseResultMap4" class="com.pltfm.cms.vobject.CmsUserSite">
		<result column="USER_SITE_ID" property="userSiteId" jdbcType="Integer" />
		<result column="USER_ID" property="userId" jdbcType="Integer" />
		<result column="SITE_ID" property="siteId" jdbcType="Integer" />
		<result column="REMARK" property="remark" jdbcType="VARCHAR" />
		<result column="STATUS" property="status" jdbcType="Integer" />
		<result column="CREATE_DATE" property="createDate" jdbcType="DATE" />
		<result column="CREATED" property="created" jdbcType="Integer" />
		<result column="MODIFY_DATE" property="modifyDate" jdbcType="DATE" />
		<result column="MODIFIED" property="modified" jdbcType="Integer" />
		<result column="SITENAME" property="siteName" jdbcType="VARCHAR" />
		<!--
			<result column="USERNAME" property="userName" jdbcType="VARCHAR" />
		-->
	</resultMap>

	<resultMap id="ibatorgenerated_BaseResultMap5" class="com.pltfm.cms.vobject.CmsUserSite">
		<result column="USER_SITE_ID" property="userSiteId" jdbcType="Integer" />
		<result column="USER_ID" property="userId" jdbcType="Integer" />
		<result column="SITE_ID" property="siteId" jdbcType="Integer" />
		<result column="REMARK" property="remark" jdbcType="VARCHAR" />
		<result column="STATUS" property="status" jdbcType="Integer" />
		<result column="CREATE_DATE" property="createDate" jdbcType="DATE" />
		<result column="CREATED" property="created" jdbcType="Integer" />
		<result column="MODIFY_DATE" property="modifyDate" jdbcType="DATE" />
		<result column="MODIFIED" property="modified" jdbcType="Integer" />
		<result column="SITENAME" property="siteName" jdbcType="VARCHAR" />
		<result column="URL" property="url" jdbcType="VARCHAR" />
		<result column="TEMPLATE_PATH" property="templatePath"
			jdbcType="VARCHAR" />

		<result column="PAGE_OUTPUT_PATH" property="pageOutputPath"
			jdbcType="VARCHAR" />

		<!--<result column="CHANNEL" property="channel" jdbcType="VARCHAR" />-->

	</resultMap>

	<resultMap id="ibatorgenerated_BaseResultMap6" class="com.pltfm.cms.vobject.CmsUserSite">
		<result column="USER_ID" property="userId" jdbcType="Integer" />
		<result column="SITENAME" property="siteName" jdbcType="VARCHAR" />
	</resultMap>

	<!-- 用户所拥有的站点信息 -->
	<resultMap id="ibatorgenerated_CmsSiteInfo" class="com.pltfm.cms.vobject.CmsUserSiteShow">
		<result column="USER_ID" property="userId" jdbcType="Integer" />
		<result column="USER_ID" property="siteList"
			select="CMS_USER_SITE.selectByIdCmsSite" />
	</resultMap>
	<resultMap id="ibatorgenerated_SiteResultMap" class="com.pltfm.cms.vobject.CmsSite">
		<result column="SITE_ID" property="siteId" jdbcType="Integer" />
		<result column="NAME" property="name" jdbcType="VARCHAR" />
	</resultMap>

	<!-- 用户实体 -->
	<resultMap id="ibatorgenerated_SysUserResultMap" class="com.pltfm.sys.model.SysUser">
		<!--
			WARNING - This element is automatically generated by Apache iBATIS
			ibator, do not modify. This element was generated on Fri Nov 25
			22:18:12 CST 2011.
		-->
		<result column="USER_ID" property="userId" jdbcType="INTEGER" />
		<result column="DEPT_ID" property="deptId" jdbcType="INTEGER" />
		<result column="USER_NAME" property="userName" jdbcType="VARCHAR" />
		<result column="USER_PWD" property="userPwd" jdbcType="VARCHAR" />
		<result column="USER_REAL" property="userReal" jdbcType="VARCHAR" />
		<result column="USER_SEX" property="userSex" jdbcType="VARCHAR" />
		<result column="USER_BIRTHDAY" property="userBirthday"
			jdbcType="DATE" />
		<result column="USER_CARDNO" property="userCardno" jdbcType="VARCHAR" />
		<result column="USER_PHONE" property="userPhone" jdbcType="VARCHAR" />
		<result column="USER_MPHONE" property="userMphone" jdbcType="VARCHAR" />
		<result column="USER_IP" property="userIp" jdbcType="VARCHAR" />
		<result column="USER_LASTTIME" property="userLasttime"
			jdbcType="DATE" />
		<result column="USER_ST" property="userSt" jdbcType="VARCHAR" />
		<result column="USER_REMARK" property="userRemark" jdbcType="VARCHAR" />
		<result column="IS_ENABLE" property="isEnable" jdbcType="CHAR" />
		<result column="CREATE_DATE" property="createDate" jdbcType="DATE" />
		<result column="CREATE_USER" property="createUser" jdbcType="INTEGER" />
		<result column="UPDATE_DATE" property="updateDate" jdbcType="DATE" />
		<result column="UPDATE_USER" property="updateUser" jdbcType="INTEGER" />
		<result column="USER_ALIAS" property="userAlias" jdbcType="VARCHAR" />
	</resultMap>


	<!-- 根据站点主键查询站点实体 -->
	<select id="ibatorgenerated_selectBySiteId" resultMap="ibatorgenerated_CmsSiteResultMap"
		parameterClass="int">
		select SITE_ID, NAME, URL, TEMPLATE_PATH,
		PAGE_OUTPUT_PATH, REMARK, STATUS,
		CREATE_DATE,
		CREATED, MODIFY_DATE,
		MODIFIED
		from CMS_SITE
		where SITE_ID = #siteId#
  </select>



	<select id="ibatorgenerated_selectByUserId" resultMap="ibatorgenerated_SysUserResultMap"
		parameterClass="int">
		select USER_ID, DEPT_ID, USER_NAME, USER_PWD,
		USER_REAL, USER_SEX,
		USER_BIRTHDAY, USER_CARDNO,
		USER_PHONE,
		USER_MPHONE, USER_IP, USER_LASTTIME, USER_ST, USER_REMARK, IS_ENABLE,
		CREATE_DATE,
		CREATE_USER, UPDATE_DATE, UPDATE_USER, USER_ALIAS
		from
		SYS_USER
		where USER_ID = #userId#
  </select>


	<!-- 根据用户查询询站点 -->
	<select id="ibatorgenerated_selUser_Site" resultMap="ibatorgenerated_BaseResultMap3"
		parameterClass="int">
		select c.USER_SITE_ID, c.USER_ID, c.SITE_ID, c.REMARK,
		c.STATUS,
		c.CREATE_DATE, c.CREATED, c.MODIFY_DATE,
		c.MODIFIED,s.name as
		SITENAME
		from cms_user_site c,cms_site s where c.site_id=s.site_id and
		c.user_id=#userId#
  </select>




	<select id="ibatorgenerated_selectUserSiteId" resultMap="ibatorgenerated_BaseResultMap"
		parameterClass="com.pltfm.cms.vobject.CmsUserSite">
		select USER_SITE_ID, USER_ID, SITE_ID, REMARK, STATUS,
		CREATE_DATE, CREATED,
		MODIFY_DATE,
		MODIFIED
		from CMS_USER_SITE
		where
		USER_SITE_ID = #userSiteId:Integer#
  </select>
	<!-- 据站点id查询是否关系到用户站点表 -->
	<select id="ibatorgenerated_checkUserSite" parameterClass="int"
		resultClass="java.lang.Integer">
		select count(*) from CMS_USER_SITE
		where
		SITE_ID =
		#siteId:Integer#
  </select>
	<delete id="ibatorgenerated_delete" parameterClass="com.pltfm.cms.vobject.CmsUserSite">
		delete from
		CMS_USER_SITE
		where USER_SITE_ID = #userSiteId:Integer#
  </delete>


	<insert id="ibatorgenerated_insert" parameterClass="com.pltfm.cms.vobject.CmsUserSite">
		<selectKey resultClass="java.lang.Integer" keyProperty="userSiteId">
			select seq_app_cms.nextval from dual
      </selectKey>
		insert into CMS_USER_SITE
		<dynamic prepend="(">
			<isNotNull prepend="," property="userSiteId">
				USER_SITE_ID
      </isNotNull>
			<isNotNull prepend="," property="userId">
				USER_ID
      </isNotNull>
			<isNotNull prepend="," property="siteId">
				SITE_ID
      </isNotNull>
			<isNotNull prepend="," property="remark">
				REMARK
      </isNotNull>
			<isNotNull prepend="," property="status">
				STATUS
      </isNotNull>
			<isNotNull prepend="," property="createDate">
				CREATE_DATE
      </isNotNull>
			<isNotNull prepend="," property="created">
				CREATED
      </isNotNull>
			<isNotNull prepend="," property="modifyDate">
				MODIFY_DATE
      </isNotNull>
			<isNotNull prepend="," property="modified">
				MODIFIED
      </isNotNull>
			)
		</dynamic>
		values
		<dynamic prepend="(">
			<isNotNull prepend="," property="userSiteId">
				#userSiteId:Integer#
			</isNotNull>
			<isNotNull prepend="," property="userId">
				#userId:Integer#
			</isNotNull>
			<isNotNull prepend="," property="siteId">
				#siteId:Integer#
			</isNotNull>
			<isNotNull prepend="," property="remark">
				#remark:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="status">
				#status:Integer#
			</isNotNull>
			<isNotNull prepend="," property="createDate">
				#createDate:DATE#
			</isNotNull>
			<isNotNull prepend="," property="created">
				#created:Integer#
			</isNotNull>
			<isNotNull prepend="," property="modifyDate">
				#modifyDate:DATE#
			</isNotNull>
			<isNotNull prepend="," property="modified">
				#modified:Integer#
			</isNotNull>
			)
		</dynamic>
	</insert>

	<update id="ibatorgenerated_update" parameterClass="com.pltfm.cms.vobject.CmsUserSite">
		update CMS_USER_SITE
		<dynamic prepend="set">
			<isNotNull prepend="," property="userId">
				USER_ID = #userId:Integer#
			</isNotNull>
			<isNotNull prepend="," property="siteId">
				SITE_ID = #siteId:Integer#
			</isNotNull>
			<isNotNull prepend="," property="remark">
				REMARK = #remark:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="status">
				STATUS = #status:Integer#
			</isNotNull>
			<isNotNull prepend="," property="createDate">
				CREATE_DATE =
				#createDate:DATE#
      </isNotNull>
			<isNotNull prepend="," property="created">
				CREATED = #created:Integer#
			</isNotNull>
			<isNotNull prepend="," property="modifyDate">
				MODIFY_DATE =
				#modifyDate:DATE#
      </isNotNull>
			<isNotNull prepend="," property="modified">
				MODIFIED =
				#modified:Integer#
      </isNotNull>
		</dynamic>
		where USER_SITE_ID = #userSiteId:Integer#
	</update>

	<!-- 分页查询用户列表信息 -->
	<select id="abatorgenerated_UserSite" resultMap="ibatorgenerated_BaseResultMap"
		parameterClass="com.pltfm.cms.vobject.CmsUserSite">
		select USER_SITE_ID, USER_ID, SITE_ID, REMARK, STATUS, CREATE_DATE,
		CREATED, MODIFY_DATE,
		MODIFIED FROM (select ROW_NUMBER() OVER(order by
		USER_SITE_ID desc) as
		view_row_number, tt.* FROM CMS_USER_SITE
		tt,SYS_USER ss,CMS_SITE cc
		where tt.user_id=ss.user_id and
		tt.site_id=cc.site_id
		<isNotNull property="userSiteId">
			<isNotEmpty prepend="and" property="userSiteId">
				tt.USER_SITE_ID =
				#userSiteId:INTEGER#
							  </isNotEmpty>
		</isNotNull>

		<isNotNull property="sysUser.userName">
			<isNotEmpty prepend="and" property="sysUser.userName">
				ss.USER_NAME like
				'%'||#sysUser.userName#||'%'
								
							</isNotEmpty>
		</isNotNull>

		<isNotNull property="cmsSite.name">
			<isNotEmpty prepend="and" property="cmsSite.name">
				cc.NAME like
				'%'||#cmsSite.name#||'%'
							</isNotEmpty>
		</isNotNull>

		<isNotNull property="cmsSite.url">
			<isNotEmpty prepend="and" property="cmsSite.url">
				cc.URL like
				'%'||#cmsSite.url#||'%'
							</isNotEmpty>
		</isNotNull>
		) 
         <![CDATA[ where view_row_number <= #endIndex# and view_row_number > #startIndex# ]]>
	</select>

	<!-- 通过多条件查询统计窗口数据总条数 -->
	<select id="abatorgenerated_countByUserSite" parameterClass="com.pltfm.cms.vobject.CmsUserSite"
		resultClass="java.lang.Integer">
		select count(*) FROM CMS_USER_SITE tt,SYS_USER ss,CMS_SITE cc
		where
		tt.user_id=ss.user_id and tt.site_id=cc.site_id
		<isNotNull property="userSiteId">
			<isNotEmpty prepend="and" property="userSiteId">
				tt.USER_SITE_ID =
				#userSiteId:INTEGER#
							  </isNotEmpty>
		</isNotNull>

		<isNotNull property="sysUser.userName">
			<isNotEmpty prepend="and" property="sysUser.userName">
				ss.USER_NAME like
				'%'||#sysUser.userName#||'%'
								
							</isNotEmpty>
		</isNotNull>

		<isNotNull property="cmsSite.name">
			<isNotEmpty prepend="and" property="cmsSite.name">
				cc.NAME like
				'%'||#cmsSite.name#||'%'
							</isNotEmpty>
		</isNotNull>

		<isNotNull property="cmsSite.url">
			<isNotEmpty prepend="and" property="cmsSite.url">
				cc.URL like
				'%'||#cmsSite.url#||'%'
							</isNotEmpty>
		</isNotNull>
	</select>

	<!-- 根据站点查询用户 -->
	<select id="ibatorgenerated_selUse" resultMap="ibatorgenerated_BaseResultMap"
		parameterClass="int">
		select USER_SITE_ID, USER_ID, SITE_ID, REMARK, STATUS,
		CREATE_DATE,
		CREATED,MODIFY_DATE,MODIFIED
		from cms_user_site where
		SITE_ID=#siteId:Integer#
  </select>

	<!--
		站点名和ID <select id="ByUserIdData"
		resultMap="ibatorgenerated_BaseResultMap2"
		parameterClass="java.lang.Integer" > select s.* , ds.name from
		cms_user_site s,(select * from cms_site d) ds where
		s.site_id=ds.site_id and s.user_id=#userSiteId# where USER_SITE_ID =
		#userSiteId:Integer# </select>
	-->
	<!--
		<select id="searchPageByVo" resultMap="ibatorgenerated_BaseResultMap4"
		parameterClass="com.pltfm.cms.vobject.CmsUserSite"> select
		USER_SITE_ID, USER_ID, SITE_ID, REMARK, STATUS, CREATE_DATE, CREATED,
		MODIFY_DATE,MODIFIED,SITENAME FROM ( select ROW_NUMBER() OVER(order by
		USER_SITE_ID desc) as view_row_number, u.*,cc.name as SITENAME from
		CMS_USER_SITE u,CMS_SITE cc where u.site_id=cc.site_id <isNotNull
		property="siteName"> <isNotEmpty prepend="and" property="siteName">
		cc.name like '%'||#siteName#||'%' </isNotEmpty> </isNotNull>

		<isNotNull property="siteId"> <isNotEmpty prepend="and"
		property="siteId"> u.SITE_ID=#siteId:Integer# </isNotEmpty>
		</isNotNull> <isNotNull property="userIds"> <isNotEmpty prepend="and"
		property="userIds"> $userIds$ </isNotEmpty> </isNotNull> <isNotNull
		property="userId"> <isNotEmpty prepend="and" property="userId">
		user_id =#userId:Integer# </isNotEmpty> </isNotNull> ) <![CDATA[ where
		view_row_number <= #endIndex# and view_row_number > #startIndex# ]]>
		</select> 分页查询
	-->
	<select id="searchPageByVo" resultMap="ibatorgenerated_BaseResultMap5"
		parameterClass="com.pltfm.cms.vobject.CmsUserSite">
		select USER_SITE_ID, USER_ID, SITE_ID, REMARK, STATUS, CREATE_DATE,
		CREATED,
		MODIFY_DATE,MODIFIED,SITENAME,URL, TEMPLATE_PATH,
		PAGE_OUTPUT_PATH /*,CHANNEL*/
		FROM (
		select
		ROW_NUMBER()
		OVER(order by USER_SITE_ID
		desc) as view_row_number,
		u.*,cc.name as
		SITENAME,cc.url as URL,cc.template_path as TEMPLATE_PATH,cc.page_output_path as
		PAGE_OUTPUT_PATH/*,cc.channel as CHANNEL*/ from CMS_USER_SITE
		u,CMS_SITE cc where u.site_id=cc.site_id
		<isNotNull property="siteName">
			<isNotEmpty prepend="and" property="siteName">
				cc.name like
				'%'||#siteName#||'%'
			  </isNotEmpty>
		</isNotNull>

		<isNotNull property="siteId">
			<isNotEmpty prepend="and" property="siteId">
				u.SITE_ID=#siteId:Integer#
			  </isNotEmpty>
		</isNotNull>
		<isNotNull property="userIds">
			<isNotEmpty prepend="and" property="userIds">
				$userIds$
			  </isNotEmpty>
		</isNotNull>

		<isNotNull property="userId">
			<isNotEmpty prepend="and" property="userId">
				user_id
				=#userId:Integer#
			  </isNotEmpty>
		</isNotNull>
		)
  <![CDATA[ where view_row_number <= #endIndex# and view_row_number > #startIndex# ]]>
	</select>
	<!--  通过多条件查询统数据总条数 -->
	<select id="selectCountByVo" parameterClass="com.pltfm.cms.vobject.CmsUserSite"
		resultClass="java.lang.Integer">
		select count(*) from CMS_USER_SITE u,CMS_SITE cc where
		u.site_id=cc.site_id
		<isNotNull property="siteName">
			<isNotEmpty prepend="and" property="siteName">
				cc.name like
				'%'||#siteName#||'%'
			  </isNotEmpty>
		</isNotNull>
		<isNotNull property="siteId">
			<isNotEmpty prepend="and" property="siteId">
				u.SITE_ID=#siteId:Integer#
			  </isNotEmpty>
		</isNotNull>
		<isNotNull property="userIds">
			<isNotEmpty prepend="and" property="userIds">
				$userIds$
			  </isNotEmpty>
		</isNotNull>
		<isNotNull property="userId">
			<isNotEmpty prepend="and" property="userId">
				user_id
				=#userId:Integer#
			  </isNotEmpty>
		</isNotNull>
	</select>

	<!-- 站点名和ID  -->
	<select id="ByUserIdData" resultMap="ibatorgenerated_BaseResultMap2"
		parameterClass="java.lang.Integer">
		select s.* , ds.name from cms_user_site s,(select *
		from cms_site d) ds
		where s.site_id=ds.site_id and
		s.user_id=#userSiteId#   
   </select>
	<!-- 查询用户所用的站点信息总数 -->
	<select id="queryUserSiteCount" resultClass="java.lang.Integer"
		parameterClass="com.pltfm.cms.vobject.CmsUserSite">
		select count(*) from(select user_id
		from cms_user_site
		group by user_id
		having count(user_id) >= 1)
		<dynamic prepend="where">
			<isNotNull property="userId">
				<isNotEmpty prepend="and" property="userId">
					user_id
					=#userId:Integer#
			  </isNotEmpty>
			</isNotNull>
			<isNotNull property="userIds">
				<isNotEmpty prepend="and" property="userIds">
					$userIds$
			  </isNotEmpty>
			</isNotNull>
		</dynamic>
	</select>
	<!-- 查询用户所用的站点信息信息 -->
	<select id="querUserSiteList" resultMap="ibatorgenerated_CmsSiteInfo"
		parameterClass="com.pltfm.cms.vobject.CmsUserSite">
		select user_id from(
		select ROW_NUMBER() OVER(order by user_id
		desc) as
		view_row_number,user_id
		from (select user_id
		from cms_user_site
		group by
		user_id
		having count(user_id) >= 1)
		<dynamic prepend="where">
			<isNotNull property="userId">
				<isNotEmpty prepend="and" property="userId">
					user_id
					=#userId:Integer#
					  </isNotEmpty>
			</isNotNull>
			<isNotNull property="userIds">
				<isNotEmpty prepend="and" property="userIds">
					$userIds$
					  </isNotEmpty>
			</isNotNull>
		</dynamic>
		)
  <![CDATA[ where view_row_number <= #endIndex# and view_row_number > #startIndex# ]]>
	</select>

	<!-- 通过用户id和站点id查询所拥有的站点 -->
	<select id="selectByIdCmsSite" resultMap="ibatorgenerated_SiteResultMap"
		parameterClass="int">
		select s.site_id, s.name
		from cms_site s
		right join
		cms_user_site us
		on s.site_id = us.site_id
		where us.user_id = #userId#
	</select>


	<!-- 通过用户id查询用户所拥有的站点 -->
	<select id="searchUserId" resultMap="ibatorgenerated_BaseResultMap6"
		parameterClass="int">
		 select c.user_id,s.name as SITENAME
          from CMS_USER_SITE c,CMS_SITE s where c.site_id=s.site_id
	</select>

</sqlMap>