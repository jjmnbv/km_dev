<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
        "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="VIEW_PROMOTION">
    <resultMap id="abatorgenerated_ViewPromotionResult" class="com.pltfm.app.vobject.ViewPromotion">
        <!--
          WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
          This element was generated on Tue Sep 03 16:15:27 CST 2013.
        -->
        <result column="PROMOTION_ID" property="promotionId" jdbcType="DECIMAL"/>
        <result column="PROMOTION_NAME" property="promotionName" jdbcType="VARCHAR"/>
        <result column="SLOGAN" property="slogan" jdbcType="VARCHAR"/>
        <result column="PROMOTION_DESCRIBE" property="promotionDescribe" jdbcType="VARCHAR"/>
        <result column="STATUS" property="status" jdbcType="DECIMAL"/>
        <result column="IS_USE_COUPON" property="isUseCoupon" jdbcType="DECIMAL"/>
        <result column="START_TIME" property="startTime" jdbcType="Date"/>
        <result column="END_TIME" property="endTime" jdbcType="Date"/>
        <result column="MUTEX_PROMOTION_ID" property="mutexPromotionId" jdbcType="VARCHAR"/>
        <result column="PROMOTION_PRIORITY" property="promotionPriority" jdbcType="DECIMAL"/>
        <result column="PROMOTION_RULE_ID" property="promotionRuleId" jdbcType="DECIMAL"/>
        <result column="PRODUCT_FILTER_TYPE" property="productFilterType" jdbcType="DECIMAL"/>
        <result column="PRODUCT_FILTER_SQL" property="productFilterSql" jdbcType="VARCHAR"/>
        <result column="CREATER_USER" property="createrUser" jdbcType="DECIMAL"/>
        <result column="CREATETIME" property="createtime" jdbcType="DATE"/>
        <result column="PROMOTION_RULE_RULE_NAME" property="promotionRuleRuleName"
                jdbcType="VARCHAR"/>
        <result column="PROMOTION_RULE_EXPRESSION" property="promotionRuleExpression"
                jdbcType="VARCHAR"/>
        <result column="PROMOTION_TYPE_ID" property="promotionTypeId" jdbcType="DECIMAL"/>
        <result column="PROMOTION_ATTR_ID" property="promotionAttrId" jdbcType="DECIMAL"/>
        <result column="PROMOTION_IMG_FIRST" property="promotionImgFirst" jdbcType="VARCHAR"/>
        <result column="PROMOTION_IMG_SECOND" property="promotionImgSecond" jdbcType="VARCHAR"/>
        <result column="PROMOTION_URL" property="promotionUrl" jdbcType="VARCHAR"/>
        <result column="PROMOTION_TINY_ICON" property="promotionTinyIcon" jdbcType="VARCHAR"/>
        <result column="PROMOTION_BIG_ICON" property="promotionBigIcon" jdbcType="VARCHAR"/>
        <result column="PROMOTION_TAG" property="promotionTag" jdbcType="VARCHAR"/>
        <result column="PROMOTION_REMARK1" property="promotionRemark1" jdbcType="VARCHAR"/>
        <result column="PROMOTION_REMARK2" property="promotionRemark2" jdbcType="VARCHAR"/>
        <result column="ONLINE_STATUS" property="onlineStatus" jdbcType="DECIMAL"/>
    </resultMap>
    <resultMap id="abatorgenerated_ViewPromotionProResult"
               class="com.pltfm.app.vobject.ViewPromotion">
        <!--
          WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
          This element was generated on Tue Sep 03 16:15:27 CST 2013.
        -->
        <result column="PROMOTION_ID" property="promotionId" jdbcType="DECIMAL"/>
        <result column="PROMOTION_NAME" property="promotionName" jdbcType="VARCHAR"/>
        <result column="SLOGAN" property="slogan" jdbcType="VARCHAR"/>
        <result column="PROMOTION_DESCRIBE" property="promotionDescribe" jdbcType="VARCHAR"/>
        <result column="STATUS" property="status" jdbcType="DECIMAL"/>
        <result column="IS_USE_COUPON" property="isUseCoupon" jdbcType="DECIMAL"/>
        <result column="START_TIME" property="startTime" jdbcType="Date"/>
        <result column="END_TIME" property="endTime" jdbcType="Date"/>
        <result column="MUTEX_PROMOTION_ID" property="mutexPromotionId" jdbcType="VARCHAR"/>
        <result column="PROMOTION_PRIORITY" property="promotionPriority" jdbcType="DECIMAL"/>
        <result column="PROMOTION_RULE_ID" property="promotionRuleId" jdbcType="DECIMAL"/>
        <result column="PRODUCT_FILTER_TYPE" property="productFilterType" jdbcType="DECIMAL"/>
        <result column="PRODUCT_FILTER_SQL" property="productFilterSql" jdbcType="VARCHAR"/>
        <result column="CREATER_USER" property="createrUser" jdbcType="DECIMAL"/>
        <result column="CREATETIME" property="createtime" jdbcType="DATE"/>
        <result column="PROMOTION_TITLE" property="promotionTitle" jdbcType="VARCHAR"/>
        <result column="PROMOTION_RULE_RULE_NAME" property="promotionRuleRuleName"
                jdbcType="VARCHAR"/>
        <result column="PROMOTION_RULE_EXPRESSION" property="promotionRuleExpression"
                jdbcType="VARCHAR"/>
        <result column="PROMOTION_TYPE_ID" property="promotionTypeId" jdbcType="DECIMAL"/>
        <result column="PROMOTION_ATTR_ID" property="promotionAttrId" jdbcType="DECIMAL"/>
        <result column="PROMOTION_IMG_FIRST" property="promotionImgFirst" jdbcType="VARCHAR"/>
        <result column="PROMOTION_IMG_SECOND" property="promotionImgSecond" jdbcType="VARCHAR"/>
        <result column="PROMOTION_URL" property="promotionUrl" jdbcType="VARCHAR"/>
        <result column="PROMOTION_TINY_ICON" property="promotionTinyIcon" jdbcType="VARCHAR"/>
        <result column="PROMOTION_BIG_ICON" property="promotionBigIcon" jdbcType="VARCHAR"/>
        <result column="PROMOTION_TAG" property="promotionTag" jdbcType="VARCHAR"/>
        <result column="PROMOTION_REMARK1" property="promotionRemark1" jdbcType="VARCHAR"/>
        <result column="PROMOTION_REMARK2" property="promotionRemark2" jdbcType="VARCHAR"/>
        <result column="ONLINE_STATUS" property="onlineStatus" jdbcType="DECIMAL"/>
    </resultMap>
    <sql id="abatorgenerated_Example_Where_Clause">
        <!--
          WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
          This element was generated on Tue Sep 03 16:15:27 CST 2013.
        -->
        <iterate property="oredCriteria" conjunction="or" prepend="where"
                 removeFirstPrepend="iterate">
            <isEqual property="oredCriteria[].valid" compareValue="true">
                (
                <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue"
                         conjunction="and">
                    $oredCriteria[].criteriaWithoutValue[]$
                </iterate>
                <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue"
                         conjunction="and">
                    $oredCriteria[].criteriaWithSingleValue[].condition$
                    #oredCriteria[].criteriaWithSingleValue[].value#
                </iterate>
                <iterate prepend="and" property="oredCriteria[].criteriaWithListValue"
                         conjunction="and">
                    $oredCriteria[].criteriaWithListValue[].condition$
                    <iterate property="oredCriteria[].criteriaWithListValue[].values" open="("
                             close=")" conjunction=",">
                        #oredCriteria[].criteriaWithListValue[].values[]#
                    </iterate>
                </iterate>
                <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue"
                         conjunction="and">
                    $oredCriteria[].criteriaWithBetweenValue[].condition$
                    #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
                    #oredCriteria[].criteriaWithBetweenValue[].values[1]#
                </iterate>
                )
            </isEqual>
        </iterate>
    </sql>
    <select id="abatorgenerated_selectByExample" resultMap="abatorgenerated_ViewPromotionResult"
            parameterClass="com.pltfm.app.vobject.ViewPromotionExample">
        <!--
          WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
          This element was generated on Tue Sep 03 16:15:27 CST 2013.
        -->
        select PROMOTION_ID, PROMOTION_NAME, SLOGAN, PROMOTION_DESCRIBE, STATUS, IS_USE_COUPON,
        START_TIME, END_TIME, MUTEX_PROMOTION_ID, PROMOTION_PRIORITY, PROMOTION_RULE_ID,
        PRODUCT_FILTER_TYPE, PRODUCT_FILTER_SQL, CREATER_USER, CREATETIME, PROMOTION_RULE_RULE_NAME,
        PROMOTION_RULE_EXPRESSION, PROMOTION_TYPE_ID, , PROMOTION_ATTR_ID,
        PROMOTION_IMG_FIRST, PROMOTION_IMG_SECOND, PROMOTION_URL, PROMOTION_TINY_ICON,
        PROMOTION_BIG_ICON, PROMOTION_TAG, PROMOTION_REMARK1, PROMOTION_REMARK2
        ,ONLINE_STATUS
        from VIEW_PROMOTION
        <isParameterPresent>
            <include refid="VIEW_PROMOTION.abatorgenerated_Example_Where_Clause"/>
            <isNotNull property="orderByClause">
                order by $orderByClause$
            </isNotNull>
        </isParameterPresent>
    </select>

    <select id="abatorgenerated_selectByPrimaryKey" resultMap="abatorgenerated_ViewPromotionResult"
            parameterClass="com.pltfm.app.vobject.ViewPromotion">
        <!--
          WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
          This element was generated on Tue Sep 03 16:15:27 CST 2013.
        -->
        select PROMOTION_ID, PROMOTION_NAME, SLOGAN, PROMOTION_DESCRIBE, STATUS, IS_USE_COUPON,
        START_TIME, END_TIME, MUTEX_PROMOTION_ID, PROMOTION_PRIORITY, PROMOTION_RULE_ID,
        PRODUCT_FILTER_TYPE, PRODUCT_FILTER_SQL, CREATER_USER, CREATETIME, PROMOTION_RULE_RULE_NAME,
        PROMOTION_RULE_EXPRESSION, PROMOTION_TYPE_ID, PROMOTION_ATTR_ID,
        PROMOTION_IMG_FIRST, PROMOTION_IMG_SECOND, PROMOTION_URL, PROMOTION_TINY_ICON,
        PROMOTION_BIG_ICON, PROMOTION_TAG, PROMOTION_REMARK1, PROMOTION_REMARK2
        ,ONLINE_STATUS
        from VIEW_PROMOTION where PROMOTION_ID = #promotionId:DECIMAL#
    </select>

    <delete id="abatorgenerated_deleteByExample"
            parameterClass="com.pltfm.app.vobject.ViewPromotionExample">
        <!--
          WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
          This element was generated on Tue Sep 03 16:15:27 CST 2013.
        -->
        delete from VIEW_PROMOTION
        <include refid="VIEW_PROMOTION.abatorgenerated_Example_Where_Clause"/>
    </delete>
    <insert id="abatorgenerated_insert" parameterClass="com.pltfm.app.vobject.ViewPromotion">
        <!--
          WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
          This element was generated on Tue Sep 03 16:15:27 CST 2013.
        -->
        insert into VIEW_PROMOTION (PROMOTION_ID, PROMOTION_NAME, SLOGAN, PROMOTION_DESCRIBE,
        STATUS,
        IS_USE_COUPON, START_TIME, END_TIME, MUTEX_PROMOTION_ID, PROMOTION_PRIORITY,
        PROMOTION_RULE_ID, PRODUCT_FILTER_TYPE, PRODUCT_FILTER_SQL, CREATER_USER, CREATETIME,
        PROMOTION_RULE_RULE_NAME, PROMOTION_RULE_EXPRESSION, PROMOTION_TYPE_ID, ,
        PROMOTION_ATTR_ID, PROMOTION_IMG_FIRST, PROMOTION_IMG_SECOND, PROMOTION_URL,
        PROMOTION_TINY_ICON, PROMOTION_BIG_ICON, PROMOTION_TAG, PROMOTION_REMARK1,
        PROMOTION_REMARK2)
        values (#promotionId:DECIMAL#, #promotionName:VARCHAR#, #slogan:VARCHAR#,
        #promotionDescribe:VARCHAR#, #status:DECIMAL#, #isUseCoupon:DECIMAL#, #startTime:DATE#,
        #endTime:DATE#, #mutexPromotionId:VARCHAR#, #promotionPriority:DECIMAL#,
        #promotionRuleId:DECIMAL#, #productFilterType:DECIMAL#, #productFilterSql:VARCHAR#,
        #createrUser:DECIMAL#, #createtime:DATE#, #promotionRuleRuleName:VARCHAR#,
        #promotionRuleExpression:VARCHAR#, #promotionTypeId:DECIMAL#,
        #promotionAttrId:DECIMAL#, #promotionImgFirst:VARCHAR#, #promotionImgSecond:VARCHAR#,
        #promotionUrl:VARCHAR#, #promotionTinyIcon:VARCHAR#, #promotionBigIcon:VARCHAR#,
        #promotionTag:VARCHAR#, #promotionRemark1:VARCHAR#, #promotionRemark2:VARCHAR#)
    </insert>
    <select id="abatorgenerated_countByExample"
            parameterClass="com.pltfm.app.vobject.ViewPromotionExample"
            resultClass="java.lang.Integer">
        <!--
          WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
          This element was generated on Tue Sep 03 16:15:27 CST 2013.
        -->
        select count(*) from VIEW_PROMOTION
        <include refid="VIEW_PROMOTION.abatorgenerated_Example_Where_Clause"/>
    </select>
    <update id="abatorgenerated_updateByExampleSelective">
        <!--
          WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
          This element was generated on Tue Sep 03 16:15:27 CST 2013.
        -->
        update VIEW_PROMOTION
        <dynamic prepend="set">
            <isNotNull prepend="," property="record.promotionId">
                PROMOTION_ID = #record.promotionId:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="record.promotionName">
                PROMOTION_NAME = #record.promotionName:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.slogan">
                SLOGAN = #record.slogan:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.promotionDescribe">
                PROMOTION_DESCRIBE = #record.promotionDescribe:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.status">
                STATUS = #record.status:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="record.isUseCoupon">
                IS_USE_COUPON = #record.isUseCoupon:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="record.startTime">
                START_TIME = #record.startTime:DATE#
            </isNotNull>
            <isNotNull prepend="," property="record.endTime">
                END_TIME = #record.endTime:DATE#
            </isNotNull>
            <isNotNull prepend="," property="record.mutexPromotionId">
                MUTEX_PROMOTION_ID = #record.mutexPromotionId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.promotionPriority">
                PROMOTION_PRIORITY = #record.promotionPriority:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="record.promotionRuleId">
                PROMOTION_RULE_ID = #record.promotionRuleId:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="record.productFilterType">
                PRODUCT_FILTER_TYPE = #record.productFilterType:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="record.productFilterSql">
                PRODUCT_FILTER_SQL = #record.productFilterSql:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.createrUser">
                CREATER_USER = #record.createrUser:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="record.createtime">
                CREATETIME = #record.createtime:DATE#
            </isNotNull>
            <isNotNull prepend="," property="record.promotionRuleRuleName">
                PROMOTION_RULE_RULE_NAME = #record.promotionRuleRuleName:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.promotionRuleExpression">
                PROMOTION_RULE_EXPRESSION = #record.promotionRuleExpression:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.promotionTypeId">
                PROMOTION_TYPE_ID = #record.promotionTypeId:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="record.promotionAttrId">
                PROMOTION_ATTR_ID = #record.promotionAttrId:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="record.promotionImgFirst">
                PROMOTION_IMG_FIRST = #record.promotionImgFirst:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.promotionImgSecond">
                PROMOTION_IMG_SECOND = #record.promotionImgSecond:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.promotionUrl">
                PROMOTION_URL = #record.promotionUrl:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.promotionTinyIcon">
                PROMOTION_TINY_ICON = #record.promotionTinyIcon:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.promotionBigIcon">
                PROMOTION_BIG_ICON = #record.promotionBigIcon:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.promotionTag">
                PROMOTION_TAG = #record.promotionTag:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.promotionRemark1">
                PROMOTION_REMARK1 = #record.promotionRemark1:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.promotionRemark2">
                PROMOTION_REMARK2 = #record.promotionRemark2:VARCHAR#
            </isNotNull>
        </dynamic>
        <isParameterPresent>
            <include refid="VIEW_PROMOTION.abatorgenerated_Example_Where_Clause"/>
        </isParameterPresent>
    </update>
    <update id="abatorgenerated_updateByExample">
        <!--
          WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
          This element was generated on Tue Sep 03 16:15:27 CST 2013.
        -->
        update VIEW_PROMOTION
        set PROMOTION_ID = #record.promotionId:DECIMAL#,
        PROMOTION_NAME = #record.promotionName:VARCHAR#,
        SLOGAN = #record.slogan:VARCHAR#,
        PROMOTION_DESCRIBE = #record.promotionDescribe:VARCHAR#,
        STATUS = #record.status:DECIMAL#,
        IS_USE_COUPON = #record.isUseCoupon:DECIMAL#,
        START_TIME = #record.startTime:DATE#,
        END_TIME = #record.endTime:DATE#,
        MUTEX_PROMOTION_ID = #record.mutexPromotionId:VARCHAR#,
        PROMOTION_PRIORITY = #record.promotionPriority:DECIMAL#,
        PROMOTION_RULE_ID = #record.promotionRuleId:DECIMAL#,
        PRODUCT_FILTER_TYPE = #record.productFilterType:DECIMAL#,
        PRODUCT_FILTER_SQL = #record.productFilterSql:VARCHAR#,
        CREATER_USER = #record.createrUser:DECIMAL#,
        CREATETIME = #record.createtime:DATE#,
        PROMOTION_RULE_RULE_NAME = #record.promotionRuleRuleName:VARCHAR#,
        PROMOTION_RULE_EXPRESSION = #record.promotionRuleExpression:VARCHAR#,
        PROMOTION_TYPE_ID = #record.promotionTypeId:DECIMAL#,
        PROMOTION_ATTR_ID = #record.promotionAttrId:DECIMAL#,
        PROMOTION_IMG_FIRST = #record.promotionImgFirst:VARCHAR#,
        PROMOTION_IMG_SECOND = #record.promotionImgSecond:VARCHAR#,
        PROMOTION_URL = #record.promotionUrl:VARCHAR#,
        PROMOTION_TINY_ICON = #record.promotionTinyIcon:VARCHAR#,
        PROMOTION_BIG_ICON = #record.promotionBigIcon:VARCHAR#,
        PROMOTION_TAG = #record.promotionTag:VARCHAR#,
        PROMOTION_REMARK1 = #record.promotionRemark1:VARCHAR#,
        PROMOTION_REMARK2 = #record.promotionRemark2:VARCHAR#
        <isParameterPresent>
            <include refid="VIEW_PROMOTION.abatorgenerated_Example_Where_Clause"/>
        </isParameterPresent>
    </update>


    <!-- 分页查询窗口数据列表信息 -->
    <select id="abatorgenerated_pageByViewPromotion" resultMap="abatorgenerated_ViewPromotionResult"
            parameterClass="com.pltfm.app.vobject.ViewPromotion">

        select PROMOTION_ID, PROMOTION_NAME, SLOGAN, PROMOTION_DESCRIBE, STATUS, IS_USE_COUPON,
        START_TIME, END_TIME, MUTEX_PROMOTION_ID, PROMOTION_PRIORITY, PROMOTION_RULE_ID,
        PRODUCT_FILTER_TYPE, PRODUCT_FILTER_SQL, CREATER_USER, CREATETIME, PROMOTION_RULE_RULE_NAME,
        PROMOTION_RULE_EXPRESSION, PROMOTION_TYPE_ID, PROMOTION_ATTR_ID,
        PROMOTION_IMG_FIRST, PROMOTION_IMG_SECOND, PROMOTION_URL, PROMOTION_TINY_ICON,
        PROMOTION_BIG_ICON, PROMOTION_TAG, PROMOTION_REMARK1,
        PROMOTION_REMARK2,ONLINE_STATUS FROM (
        select ROW_NUMBER() OVER(order by PROMOTION_ID desc) as view_row_number, tt.* FROM
        VIEW_PROMOTION tt
        <dynamic prepend="where">
            <isNotNull property="promotionId">
                <isNotEmpty prepend="and" property="promotionId">
                    tt.PROMOTION_ID = #promotionId:INTEGER#
                </isNotEmpty>
            </isNotNull>

            <isNotNull property="promotionName">
                <isNotEmpty prepend="and" property="promotionName">
                    tt.PROMOTION_NAME like '%$promotionName$%'
                </isNotEmpty>
            </isNotNull>

            <isNotNull property="promotionTypeId">
                <isNotEmpty prepend="and" property="promotionTypeId">
                    tt.PROMOTION_TYPE_ID = #promotionTypeId:INTEGER#
                </isNotEmpty>
            </isNotNull>

            <isNotNull property="productFilterType">
                <isNotEmpty prepend="and" property="productFilterType">
                    tt.PRODUCT_FILTER_TYPE != #productFilterType#
                </isNotEmpty>
            </isNotNull>

            <isNotNull property="startTime">
                <isNotEmpty prepend="and" property="startTime">
                    <![CDATA[	tt.START_TIME >= #startTime:Date#	]]>
                </isNotEmpty>
            </isNotNull>

            <isNotNull property="endTime">
                <isNotEmpty prepend="and" property="endTime">
                    <![CDATA[	tt.END_TIME <= #endTime:Date#   ]]>
                </isNotEmpty>
            </isNotNull>


            <isNotNull property="expiredFlag">
                <isEqual prepend="and" property="expiredFlag" compareValue="1">
                    <![CDATA[	tt.END_TIME > #nowTime:Date#   ]]>
                </isEqual>
            </isNotNull>
            <isNotNull property="expiredFlag">
                <isEqual prepend="and" property="expiredFlag" compareValue="2">
                    <![CDATA[	tt.END_TIME <= #nowTime:Date#   ]]>
                </isEqual>
            </isNotNull>
        </dynamic>
        )
        <![CDATA[ where view_row_number <= #endIndex# and view_row_number > #startIndex# ]]>
    </select>
    <!-- 通过多条件查询统计窗口数据总条数 -->
    <select id="abatorgenerated_countByViewPromotion"
            parameterClass="com.pltfm.app.vobject.ViewPromotion" resultClass="java.lang.Integer">
        select count(*) from VIEW_PROMOTION tt
        <dynamic prepend="where">
            <isNotNull property="promotionId">
                <isNotEmpty prepend="and" property="promotionId">
                    tt.PROMOTION_ID = #promotionId:INTEGER#
                </isNotEmpty>
            </isNotNull>

            <isNotNull property="promotionName">
                <isNotEmpty prepend="and" property="promotionName">
                    tt.PROMOTION_NAME like '%$promotionName$%'
                </isNotEmpty>
            </isNotNull>

            <isNotNull property="promotionTypeId">
                <isNotEmpty prepend="and" property="promotionTypeId">
                    tt.PROMOTION_TYPE_ID = #promotionTypeId:INTEGER#
                </isNotEmpty>
            </isNotNull>

            <isNotNull property="startTime">
                <isNotEmpty prepend="and" property="startTime">
                    <![CDATA[	tt.START_TIME >= #startTime:Date#	]]>
                </isNotEmpty>
            </isNotNull>

            <isNotNull property="endTime">
                <isNotEmpty prepend="and" property="endTime">
                    <![CDATA[	tt.END_TIME <= #endTime:Date#   ]]>
                </isNotEmpty>
            </isNotNull>
            <isNotNull property="productFilterType">
                <isNotEmpty prepend="and" property="productFilterType">
                    tt.PRODUCT_FILTER_TYPE != #productFilterType#
                </isNotEmpty>
            </isNotNull>
        </dynamic>
    </select>

    <!-- 通过多条件查询统计窗口数据总条数(for添加活动商品) -->
    <select id="abatorgenerated_countByViewPromotionPro"
            parameterClass="com.pltfm.app.vobject.ViewPromotion" resultClass="java.lang.Integer">
        select count(0) from VIEW_PROMOTION tt
        WHERE tt.PROMOTION_TYPE_ID IN
        <iterate open="(" close=")" conjunction="," property="promotionTypeIdList">
            #promotionTypeIdList[]#
        </iterate>
        <dynamic>
            <isNotNull property="promotionId">
                <isNotEmpty prepend="and" property="promotionId">
                    tt.PROMOTION_ID = #promotionId:INTEGER#
                </isNotEmpty>
            </isNotNull>

            <isNotNull property="promotionName">
                <isNotEmpty prepend="and" property="promotionName">
                    tt.PROMOTION_NAME like '%$promotionName$%'
                </isNotEmpty>
            </isNotNull>

            <isNotNull property="promotionTitle">
                <isNotEmpty prepend="and" property="promotionTitle">
                    tt.PROMOTION_TITLE like '%$promotionTitle$%'
                </isNotEmpty>
            </isNotNull>

            <isNotNull property="startTime">
                <isNotEmpty prepend="and" property="startTime">
                    <![CDATA[	tt.START_TIME >= #startTime:Date#	]]>
                </isNotEmpty>
            </isNotNull>

            <isNotNull property="endTime">
                <isNotEmpty prepend="and" property="endTime">
                    <![CDATA[	tt.END_TIME <= #endTime:Date#   ]]>
                </isNotEmpty>
            </isNotNull>


            <isNotNull property="productFilterType">
                <isNotEmpty prepend="and" property="productFilterType">
                    tt.PRODUCT_FILTER_TYPE != #productFilterType#
                </isNotEmpty>
            </isNotNull>
        </dynamic>
    </select>

    <!-- 分页查询窗口数据列表信息 -->
    <select id="abatorgenerated_pageByViewPromotionPro"
            resultMap="abatorgenerated_ViewPromotionProResult"
            parameterClass="com.pltfm.app.vobject.ViewPromotion">
        select PROMOTION_ID, PROMOTION_NAME, SLOGAN, PROMOTION_DESCRIBE, STATUS, IS_USE_COUPON,
        START_TIME, END_TIME, MUTEX_PROMOTION_ID, PROMOTION_PRIORITY, PROMOTION_RULE_ID,
        PRODUCT_FILTER_TYPE, PRODUCT_FILTER_SQL, CREATER_USER, CREATETIME, PROMOTION_TITLE,
        PROMOTION_RULE_RULE_NAME,
        PROMOTION_RULE_EXPRESSION, PROMOTION_TYPE_ID, PROMOTION_ATTR_ID,
        PROMOTION_IMG_FIRST, PROMOTION_IMG_SECOND, PROMOTION_URL, PROMOTION_TINY_ICON,
        PROMOTION_BIG_ICON, PROMOTION_TAG, PROMOTION_REMARK1,
        PROMOTION_REMARK2,ONLINE_STATUS FROM (
        select ROW_NUMBER() OVER(order by PROMOTION_ID desc) as view_row_number, tt.* FROM
        VIEW_PROMOTION tt
        WHERE tt.PROMOTION_TYPE_ID IN
        <iterate open="(" close=")" conjunction="," property="promotionTypeIdList">
            #promotionTypeIdList[]#
        </iterate>
        <dynamic>
            <isNotNull property="promotionId">
                <isNotEmpty prepend="and" property="promotionId">
                    tt.PROMOTION_ID = #promotionId:INTEGER#
                </isNotEmpty>
            </isNotNull>

            <isNotNull property="promotionName">
                <isNotEmpty prepend="and" property="promotionName">
                    tt.PROMOTION_NAME like '%$promotionName$%'
                </isNotEmpty>
            </isNotNull>

            <isNotNull property="promotionTitle">
                <isNotEmpty prepend="and" property="promotionTitle">
                    tt.PROMOTION_TITLE like '%$promotionTitle$%'
                </isNotEmpty>
            </isNotNull>

            <isNotNull property="productFilterType">
                <isNotEmpty prepend="and" property="productFilterType">
                    tt.PRODUCT_FILTER_TYPE != #productFilterType#
                </isNotEmpty>
            </isNotNull>

            <isNotNull property="startTime">
                <isNotEmpty prepend="and" property="startTime">
                    <![CDATA[	tt.START_TIME >= #startTime:Date#	]]>
                </isNotEmpty>
            </isNotNull>

            <isNotNull property="endTime">
                <isNotEmpty prepend="and" property="endTime">
                    <![CDATA[	tt.END_TIME <= #endTime:Date#   ]]>
                </isNotEmpty>
            </isNotNull>


            <isNotNull property="expiredFlag">
                <isEqual prepend="and" property="expiredFlag" compareValue="1">
                    <![CDATA[	tt.END_TIME > #nowTime:Date#   ]]>
                </isEqual>
            </isNotNull>
            <isNotNull property="expiredFlag">
                <isEqual prepend="and" property="expiredFlag" compareValue="2">
                    <![CDATA[	tt.END_TIME <= #nowTime:Date#   ]]>
                </isEqual>
            </isNotNull>
        </dynamic>
        )
        <![CDATA[ where view_row_number <= #endIndex# and view_row_number > #startIndex# ]]>
    </select>

    <!-- 返回活动对象 -->
    <select id="abatorgenerated_queryPromotionData" resultMap="abatorgenerated_ViewPromotionResult"
            parameterClass="com.pltfm.app.vobject.ViewPromotion">

        select PROMOTION_ID, PROMOTION_NAME, SLOGAN, PROMOTION_DESCRIBE, STATUS, IS_USE_COUPON,
        START_TIME, END_TIME, MUTEX_PROMOTION_ID, PROMOTION_PRIORITY, PROMOTION_RULE_ID,
        PRODUCT_FILTER_TYPE, PRODUCT_FILTER_SQL, CREATER_USER, CREATETIME, PROMOTION_RULE_RULE_NAME,
        PROMOTION_RULE_EXPRESSION, PROMOTION_TYPE_ID, PROMOTION_ATTR_ID,
        PROMOTION_IMG_FIRST, PROMOTION_IMG_SECOND, PROMOTION_URL, PROMOTION_TINY_ICON,
        PROMOTION_BIG_ICON, PROMOTION_TAG, PROMOTION_REMARK1,
        PROMOTION_REMARK2,ONLINE_STATUS
        from VIEW_PROMOTION
        where PROMOTION_ID in
        <iterate open="(" close=")" conjunction="," property="promotionIds">
            #promotionIds[]#

        </iterate>

        order by decode (PROMOTION_ID,
        <iterate close=")" conjunction="," property="promotionIdsSort">
            #promotionIdsSort[]#
        </iterate>
    </select>

</sqlMap>