<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="BNES_BROWSING_HIS">





<typeAlias alias="keyWords" type="com.pltfm.app.vobject.KeyWords"/>
    <resultMap class="keyWords" id="Words">
    	<result column="KEY_WORDS" property="keyWords" jdbcType="VARCHAR" />
    	<result column="REP_WORDS" property="repWords" jdbcType="VARCHAR" />
    	<result column="STATUS" property="status" jdbcType="DECIMAL"></result>
    	<result column="WORDS_TYPE" property="wordsType" jdbcType="DECIMAL" />
    </resultMap>
    
    <select id="Words" resultMap="Words">
    	<![CDATA[ 
           select KEY_WORDS,REP_WORDS,STATUS,WORDS_TYPE from key_words where words_type=1
           ]]>
    </select>

<typeAlias alias="users" type="com.pltfm.shiro.vobject.User" />
	<resultMap id="userMap" class="users">
		<result jdbcType="DECIMAL" property="loginId" column="N_LOGIN_ID" />
		<result jdbcType="DECIMAL" property="levelId" column="N_LEVEL_ID" />
		<result jdbcType="DECIMAL" property="customerTypeId" column="N_CUSTOMER_TYPE_ID" />
		<result jdbcType="VARCHAR" property="loginAccount" column="LOGIN_ACCOUNT" />
		<result jdbcType="VARCHAR" property="loginPassword" column="LOGIN_PASSWORD" />
		<result jdbcType="VARCHAR" property="mobile" column="MOBILE" />
		<result jdbcType="VARCHAR" property="email" column="EMAIL" />
		<result jdbcType="DECIMAL" property="status" column="N_STATUS" />
		<result jdbcType="DATE" property="createDate" column="D_CREATE_DATE" />
		<result jdbcType="DECIMAL" property="created" column="N_CREATED" />
		<result jdbcType="DATE" property="modifyDate" column="D_MODIFY_DATE" />
		<result jdbcType="DECIMAL" property="modified" column="N_MODIFIED" />
	</resultMap>

	
	<sql id="findByLogin">
		(
		<isNotEmpty property="email">
			email = #email:VARCHAR2(50)#
		</isNotEmpty>
		<isNotEmpty property="loginAccount">
			<isNotEmpty property="email">
				or
	   	 	</isNotEmpty>
			LOGIN_ACCOUNT = #loginAccount:VARCHAR2(50)#
		</isNotEmpty>
		<isNotEmpty property="mobile">
			<isNotEmpty property="email">or</isNotEmpty>
			<isEmpty property="email">
				<isNotEmpty prepend="loginAccount">or</isNotEmpty>
			</isEmpty>
			mobile = #mobile:VARCHAR2(50)#
		</isNotEmpty>
		)
		<isNotEmpty property="loginPassword">
			and LOGIN_PASSWORD = #loginPassword:VARCHAR2(50)#
	    </isNotEmpty>
	</sql>

	<select id="findUser" resultMap="userMap" parameterClass="users">
		<![CDATA[
			SELECT * FROM LOGIN_INFO 
		]]>
		<dynamic prepend="where">
			<include refid="findByLogin" />
		</dynamic>
	</select>



	<resultMap id="abatorgenerated_BnesBrowsingHisResult" class="com.pltfm.app.vobject.BnesBrowsingHis">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Thu Oct 24
			15:55:47 CST 2013.
		-->
		<result column="BROWSING_HIS_ID" property="browsingHisId"
			jdbcType="DECIMAL" />
		<result column="LOGIN_ID" property="loginId" jdbcType="DECIMAL" />
		<result column="CONTENT_CODE" property="contentCode" jdbcType="VARCHAR" />
		<result column="CREATE_DATE" property="createDate" jdbcType="DATE" />
		<result column="BROWSING_TYPE" property="browsingType"
			jdbcType="DECIMAL" />
		<result column="UPDATE_DATE" property="updateDate" jdbcType="DATE" />
	</resultMap>
	<sql id="abatorgenerated_Example_Where_Clause">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Thu Oct 24
			15:55:47 CST 2013.
		-->
		<iterate property="oredCriteria" conjunction="or" prepend="where"
			removeFirstPrepend="iterate">
			<isEqual property="oredCriteria[].valid" compareValue="true">
				(
				<iterate prepend="and" property="oredCriteria[].criteriaWithoutValue"
					conjunction="and">
					$oredCriteria[].criteriaWithoutValue[]$
        </iterate>
				<iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue"
					conjunction="and">
					$oredCriteria[].criteriaWithSingleValue[].condition$
					#oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
				<iterate prepend="and" property="oredCriteria[].criteriaWithListValue"
					conjunction="and">
					$oredCriteria[].criteriaWithListValue[].condition$
					<iterate property="oredCriteria[].criteriaWithListValue[].values"
						open="(" close=")" conjunction=",">
						#oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
				</iterate>
				<iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue"
					conjunction="and">
					$oredCriteria[].criteriaWithBetweenValue[].condition$
					#oredCriteria[].criteriaWithBetweenValue[].values[0]# and
					#oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
				)
			</isEqual>
		</iterate>
	</sql>
	<select id="abatorgenerated_selectByPrimaryKey" resultMap="abatorgenerated_BnesBrowsingHisResult"
		parameterClass="com.pltfm.app.vobject.BnesBrowsingHis">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Thu Oct 24
			15:55:47 CST 2013.
		-->
		select BROWSING_HIS_ID, LOGIN_ID, CONTENT_CODE, CREATE_DATE,
		BROWSING_TYPE, UPDATE_DATE
		from BNES_BROWSING_HIS
		where BROWSING_HIS_ID = #browsingHisId:DECIMAL#
	</select>
	<select id="abatorgenerated_selectByExample" resultMap="abatorgenerated_BnesBrowsingHisResult"
		parameterClass="com.pltfm.app.vobject.BnesBrowsingHisExample">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Thu Oct 24
			15:55:47 CST 2013.
		-->
		select BROWSING_HIS_ID, LOGIN_ID, CONTENT_CODE, CREATE_DATE,
		BROWSING_TYPE, UPDATE_DATE
		from BNES_BROWSING_HIS
		<isParameterPresent>
			<include refid="BNES_BROWSING_HIS.abatorgenerated_Example_Where_Clause" />
			<isNotNull property="orderByClause">
				order by $orderByClause$
      </isNotNull>
		</isParameterPresent>
	</select>
	<delete id="abatorgenerated_deleteByPrimaryKey" parameterClass="com.pltfm.app.vobject.BnesBrowsingHis">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Thu Oct 24
			15:55:47 CST 2013.
		-->
		delete from BNES_BROWSING_HIS
		where BROWSING_HIS_ID = #browsingHisId:DECIMAL#
	</delete>
	<delete id="abatorgenerated_deleteByExample" parameterClass="com.pltfm.app.vobject.BnesBrowsingHisExample">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Thu Oct 24
			15:55:47 CST 2013.
		-->
		delete from BNES_BROWSING_HIS
		<include refid="BNES_BROWSING_HIS.abatorgenerated_Example_Where_Clause" />
	</delete>
	<insert id="abatorgenerated_insert" parameterClass="com.pltfm.app.vobject.BnesBrowsingHis">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Thu Oct 24
			15:55:47 CST 2013.
		-->
		insert into BNES_BROWSING_HIS (BROWSING_HIS_ID, LOGIN_ID,
		CONTENT_CODE, CREATE_DATE,
		BROWSING_TYPE, UPDATE_DATE)
		values (#browsingHisId:DECIMAL#, #loginId:DECIMAL#, #contentCode:VARCHAR#,
		#createDate:DATE#,
		#browsingType:DECIMAL#, #updateDate:DATE#)
	</insert>
	<update id="abatorgenerated_updateByPrimaryKey" parameterClass="com.pltfm.app.vobject.BnesBrowsingHis">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Thu Oct 24
			15:55:47 CST 2013.
		-->
		update BNES_BROWSING_HIS
		set LOGIN_ID = #loginId:DECIMAL#,
		CONTENT_CODE = #contentCode:VARCHAR#,
		CREATE_DATE = #createDate:DATE#,
		BROWSING_TYPE = #browsingType:DECIMAL#,
		UPDATE_DATE = #updateDate:DATE#
		where BROWSING_HIS_ID = #browsingHisId:DECIMAL#
	</update>
	<update id="abatorgenerated_updateByPrimaryKeySelective"
		parameterClass="com.pltfm.app.vobject.BnesBrowsingHis">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Thu Oct 24
			15:55:47 CST 2013.
		-->
		update BNES_BROWSING_HIS
		<dynamic prepend="set">
			<isNotNull prepend="," property="loginId">
				LOGIN_ID = #loginId:DECIMAL#
      </isNotNull>
			<isNotNull prepend="," property="contentCode">
				CONTENT_CODE = #contentCode:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="createDate">
				CREATE_DATE = #createDate:DATE#
      </isNotNull>
			<isNotNull prepend="," property="browsingType">
				BROWSING_TYPE = #browsingType:DECIMAL#
      </isNotNull>
			<isNotNull prepend="," property="updateDate">
				UPDATE_DATE = #updateDate:DATE#
      </isNotNull>
		</dynamic>
		where BROWSING_HIS_ID = #browsingHisId:DECIMAL#
	</update>
	<select id="abatorgenerated_countByExample" parameterClass="com.pltfm.app.vobject.BnesBrowsingHisExample"
		resultClass="java.lang.Integer">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Thu Oct 24
			15:55:47 CST 2013.
		-->
		select count(*) from BNES_BROWSING_HIS
		<include refid="BNES_BROWSING_HIS.abatorgenerated_Example_Where_Clause" />
	</select>
	<update id="abatorgenerated_updateByExampleSelective">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Thu Oct 24
			15:55:47 CST 2013.
		-->
		update BNES_BROWSING_HIS
		<dynamic prepend="set">
			<isNotNull prepend="," property="record.browsingHisId">
				BROWSING_HIS_ID = #record.browsingHisId:DECIMAL#
      </isNotNull>
			<isNotNull prepend="," property="record.loginId">
				LOGIN_ID = #record.loginId:DECIMAL#
      </isNotNull>
			<isNotNull prepend="," property="record.contentCode">
				CONTENT_CODE = #record.contentCode:VARCHAR#
      </isNotNull>
			<isNotNull prepend="," property="record.createDate">
				CREATE_DATE = #record.createDate:DATE#
      </isNotNull>
			<isNotNull prepend="," property="record.browsingType">
				BROWSING_TYPE = #record.browsingType:DECIMAL#
      </isNotNull>
			<isNotNull prepend="," property="record.updateDate">
				UPDATE_DATE = #record.updateDate:DATE#
      </isNotNull>
		</dynamic>
		<isParameterPresent>
			<include refid="BNES_BROWSING_HIS.abatorgenerated_Example_Where_Clause" />
		</isParameterPresent>
	</update>
	<update id="abatorgenerated_updateByExample">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Thu Oct 24
			15:55:47 CST 2013.
		-->
		update BNES_BROWSING_HIS
		set BROWSING_HIS_ID = #record.browsingHisId:DECIMAL#,
		LOGIN_ID = #record.loginId:DECIMAL#,
		CONTENT_CODE = #record.contentCode:VARCHAR#,
		CREATE_DATE = #record.createDate:DATE#,
		BROWSING_TYPE = #record.browsingType:DECIMAL#,
		UPDATE_DATE = #record.updateDate:DATE#
		<isParameterPresent>
			<include refid="BNES_BROWSING_HIS.abatorgenerated_Example_Where_Clause" />
		</isParameterPresent>
	</update>
	<!-- 总点击量达到10000 -->
	<select id="abatorgenerated_count" parameterClass="java.lang.String"
		resultClass="java.lang.String">
		select t.content_code from bnes_browsing_his t where t.browsing_type=1 and
		t.content_code= '$value$' having count(t.content_code)>10000 group by
		t.content_code
  </select>
  
  <select id="abatorgenerated_selectBySupplierName" resultClass="java.lang.String"
		parameterClass="java.lang.String">
	select fo.login_account supplierName from login_info fo where fo.n_login_id=(select shop.apply_user from shop_main shop where shop.shop_id='$value$')
</select>

</sqlMap>