<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="KMORDER_ORDER_ALTER" >
  <resultMap id="ibatorgenerated_BaseResultMap" class="com.pltfm.app.entities.OrderAlter" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 29 13:38:32 CST 2013.111
    -->
    <result column="ORDER_ALTER_ID" property="orderAlterId" jdbcType="DECIMAL" />
    <result column="ORDER_CODE" property="orderCode" jdbcType="VARCHAR" />
    <result column="PROPOSER" property="proposer" jdbcType="VARCHAR" />
    <result column="CHECKER" property="checker" jdbcType="VARCHAR" />
    <result column="PROPOSE_STATUS" property="proposeStatus" jdbcType="DECIMAL" />
    <result column="CREATE_DATE" property="createDate" jdbcType="date" />
    <result column="CHECK_DATE" property="checkDate" jdbcType="date" />
    <result column="ALTER_COMMENT" property="alterComment" jdbcType="VARCHAR" />
    <result column="BACK_TYPE" property="backType" jdbcType="DECIMAL" />
    <result column="ADDRESS" property="address" jdbcType="VARCHAR" />
    <result column="NAME" property="name" jdbcType="VARCHAR" />
    <result column="PHONE" property="phone" jdbcType="VARCHAR" />
    <result column="FINISH_DATE" property="finishDate" jdbcType="date" />
    <result column="RUTURN_MONEY" property="ruturnMoney" jdbcType="DECIMAL" />
    <result column="FARE_SUBSIDY" property="fareSubsidy" jdbcType="DECIMAL" />
    <result column="RUTURN_SUM" property="ruturnSum" jdbcType="DECIMAL" />
    <result column="ORDER_ALTER_CODE" property="orderAlterCode" jdbcType="VARCHAR" />
    <result column="STOCK_OUT_ID" property="stockOutId" jdbcType="DECIMAL" />
    <result column="DISTRIBUTION_ID" property="distributionId" jdbcType="DECIMAL" />
    <result column="LOGISTICS_ORDER_NO" property="logisticsOrderNo" jdbcType="VARCHAR" />
    <result column="CUSTOMER_LOGISTICS_NO" property="customerLogisticsNo" jdbcType="VARCHAR" />
    <result column="ORDER_ITEM_ID" property="orderItemId" jdbcType="DECIMAL" />
    <result column="ALTER_TYPE" property="alterType" jdbcType="DECIMAL" />
    <result column="ALTER_NUM" property="alterNum" jdbcType="DECIMAL" />
    <result column="PHOTO_BATCH_NO" property="photoBatchNo" jdbcType="VARCHAR" />
    <result column="EVIDENCE" property="evidence" jdbcType="DECIMAL" />
    <result column="LOGISTICS_CODE" property="logisticsCode" jdbcType="VARCHAR" />
    <result column="ADDRESS_ID" property="addressId" jdbcType="DECIMAL" />
    <result column="EMAIL" property="email" jdbcType="VARCHAR" />
    <result column="DISCOUNT_AMOUNT" property="discountAmount" jdbcType="DECIMAL" />
    <result column="FARE_ADDITIONAL" property="fareAdditional" jdbcType="DECIMAL" />
    <result column="PREFERENTIAL_AMOUNT" property="preferentialAmount" jdbcType="DECIMAL" />
    <result column="CUSTOMER_LOGISTICS_CODE" property="customerLogisticsCode" jdbcType="VARCHAR" />
    <result column="AUDIT_COMMENT" property="auditComment" jdbcType="VARCHAR" />
    <result column="QUALITY_COMMENT" property="qualityComment" jdbcType="VARCHAR" />
    <result column="LOGISTICS_NAME" property="logisticsName" jdbcType="VARCHAR" />
    <result column="CUSTOMER_LOGISTICS_NAME" property="customerLogisticsName" jdbcType="VARCHAR" />
    <result column="PROVINCE" property="province" jdbcType="VARCHAR" />
    <result column="CITY" property="city" jdbcType="VARCHAR" />
    <result column="AREA" property="area" jdbcType="VARCHAR" />
    <result column="ZIPCODE" property="zipcode" jdbcType="DECIMAL" />
    <result column="COMMODITY_BATCH_NUMBER" property="commodityBatchNumber" jdbcType="VARCHAR" />
    <result column="ALTER_BATCH_NUMBER" property="alterBatchNumber" jdbcType="VARCHAR" />
  </resultMap>
  <resultMap class="com.pltfm.app.vobject.OrderAlterVo" id="ibatorgenerated_ExtendsResultMap"
  		  extends="ibatorgenerated_BaseResultMap">
  	<!-- 附加 -->
    <result column="PROPOSESTATUSSTR" jdbcType="VARCHAR" property="proposeStatusStr" />
    <result column="BACKTYPESTR" jdbcType="VARCHAR" property="backTypeStr" />
    <result column="ALTERTYPESTR" jdbcType="VARCHAR" property="alterTypeStr" />
    <result column="COMMODITY_NAME" jdbcType="VARCHAR" property="commodityName" />  
  	<result column="COMMODITY_SKU" jdbcType="VARCHAR" property="skuCode" /> 
  	<!--<result column="SUPPLIERNAME" jdbcType="VARCHAR" property="supplierName" />   	 
    --><!--  -->
  </resultMap> 
  
  <resultMap class="com.pltfm.app.vobject.OrderAlterVo" id="ibatorgenerated_AlterSelectExtendsResultMap"
  		  extends="ibatorgenerated_ExtendsResultMap">
  	<!-- 附加 -->
  	<result column="SUPPLIERNAME" jdbcType="VARCHAR" property="supplierName" />   	 
    <result column="IMG_PATH" jdbcType="VARCHAR" property="imgPath" /> 
    <result column="PRODUCT_SKU_ID" jdbcType="VARCHAR" property="productSkuId" /> 
    <result column="COMMODITY_TITLE" jdbcType="VARCHAR" property="commodityTitle" /> 
  </resultMap>
  
  <!-- 预售订单类型 -->
  <resultMap class="com.pltfm.app.vobject.OrderAlterVo" id="ibatorgenerated_AlterSelectExtendsResultMap_YS"
  		  extends="ibatorgenerated_AlterSelectExtendsResultMap">
  	<result column="ORDER_TYPE" jdbcType="VARCHAR" property="orderType" />   	 
  </resultMap>
   
    <resultMap class="com.pltfm.app.vobject.OrderAlterVo" id="ibatorgenerated_AlterSelectExtendsResultMap2"
  		  extends="ibatorgenerated_ExtendsResultMap">
  	<!-- 附加 -->
  	<result column="RETURN_FARE" jdbcType="DECIMAL" property="returnFare" />  
  </resultMap>  
  
  <resultMap class="com.pltfm.app.vobject.OrderAlterVo" id="ibatorgenerated_AlterSelectExtendsResultMap3"
  		  extends="ibatorgenerated_AlterSelectExtendsResultMap2">
  	<!-- 预售 -->
  	<result column="DEPOSIT" jdbcType="DECIMAL" property="deposit" />
  	<result column="FINALMONEY" jdbcType="DECIMAL" property="finalmoney" />
  	<result column="COMPENSATE" jdbcType="DECIMAL" property="compensate" />
  </resultMap>
  
  <resultMap class="com.pltfm.app.vobject.OrderAlterVo" id="ibatorgenerated_WithSkuResultMap"
  		  extends="ibatorgenerated_BaseResultMap">
    <result column="COMMODITY_SKU" jdbcType="VARCHAR" property="skuCode" />
    <!--  -->
  </resultMap>
  
  <!-- qrySellerExportOrder -->
  <resultMap class="com.pltfm.app.entities.OrderAlter" id="qrySellerExportAlterOrder">
  	  <result column="ORDER_ALTER_CODE" property="orderAlterCode" jdbcType="VARCHAR" />
  	  <result column="ORDER_CODE" property="orderCode" jdbcType="VARCHAR" />
  	  <result column="ALTER_NUM" property="alterNum" jdbcType="DECIMAL" />
  	  <result column="RUTURN_MONEY" property="ruturnMoney" jdbcType="DECIMAL" />
  	  <result column="ALTER_TYPE" property="alterType" jdbcType="DECIMAL" />
  	  <result column="PROPOSER" property="proposer" jdbcType="VARCHAR" />
  	  <result column="CREATE_DATE" property="createDate" jdbcType="date" />
  	  <result column="CHECK_DATE" property="checkDate" jdbcType="date" />
  	  <result column="FINISH_DATE" property="finishDate" jdbcType="date" />
  	  <result column="PROPOSE_STATUS" property="proposeStatus" jdbcType="DECIMAL" />
  	  <result column="PROPOSE_STATUS_NAME" property="proposeStatusName" jdbcType="VARCHAR" />
  	  <result column="ALTER_COMMENT" property="alterComment" jdbcType="VARCHAR" />
  	  <result column="CUSTOMER_ACCOUNT" property="customerAccount" jdbcType="VARCHAR" />
  	  <result column="COMMODITY_TITLE" property="commodityTitle" jdbcType="VARCHAR" />
  	  <result column="COMMODITY_SKU" property="commoditySKU" jdbcType="VARCHAR" />
  	  <result column="COMMODITY_UNIT_PRICE" property="commodityUnitPrice" jdbcType="DECIMAL" />
  	  <result column="ORDER_CREATE_DATE" property="orderCreateDate" jdbcType="date" />
  </resultMap>
  
  <resultMap class="com.pltfm.app.entities.OrderAlter" id="syncOrderAlterInfoResultMap">
    <result column="ORDER_ALTER_CODE" property="orderAlterCode" jdbcType="VARCHAR" />
  	<result column="ORDER_CODE" 	  property="orderCode"      jdbcType="VARCHAR" />
     <result column="ALTER_TYPE" 	  property="alterType"      jdbcType="DECIMAL" />
    <result column="COMMODITY_SKU"    property="commoditySKU"  	    jdbcType="VARCHAR" />
    <result column="COMMODITY_TITLE"  property="commodityTitle" jdbcType="VARCHAR" />
    <result column="ALTER_COMMENT"    property="alterComment"   jdbcType="VARCHAR" />
    <result column="AUDIT_COMMENT"    property="auditComment"   jdbcType="VARCHAR" />
    <result column="RUTURN_MONEY"     property="ruturnMoney"    jdbcType="DECIMAL" />
   	<result column="RETURN_FARE"      property="returnFare"     jdbcType="DECIMAL" />
   	<result column="FARE_SUBSIDY"     property="fareSubsidy"    jdbcType="DECIMAL" />
   	<result column="CREATE_DATE" 	  property="createDate"     jdbcType="date" />
   	<result column="CHECK_DATE"       property="checkDate"      jdbcType="date" />
   	<result column="CARD_NUM" 	      property="cardNum"        jdbcType="VARCHAR" />
  </resultMap>
  
  <sql id="ibatorgenerated_Example_Where_Clause" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 29 13:38:32 CST 2013.
    -->
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate" >
      <isEqual property="oredCriteria[].valid" compareValue="true" >
        (
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and" >
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and" >
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and" >
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction="," >
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and" >
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  <select id="ibatorgenerated_selectByExample" resultMap="ibatorgenerated_BaseResultMap" parameterClass="com.pltfm.app.entities.OrderAlterExample" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 29 13:38:32 CST 2013.
    -->
    select ORDER_ALTER_ID, ORDER_CODE, PROPOSER, CHECKER, PROPOSE_STATUS, CREATE_DATE, CHECK_DATE,
      ALTER_COMMENT, BACK_TYPE, ADDRESS, NAME, PHONE, FINISH_DATE, RUTURN_MONEY, FARE_SUBSIDY,
      RUTURN_SUM, ORDER_ALTER_CODE, STOCK_OUT_ID, DISTRIBUTION_ID, LOGISTICS_ORDER_NO,
      CUSTOMER_LOGISTICS_NO, ORDER_ITEM_ID, ALTER_TYPE, ALTER_NUM, PHOTO_BATCH_NO, EVIDENCE,
      LOGISTICS_CODE, ADDRESS_ID, EMAIL, DISCOUNT_AMOUNT, FARE_ADDITIONAL, PREFERENTIAL_AMOUNT,
      CUSTOMER_LOGISTICS_CODE, AUDIT_COMMENT, QUALITY_COMMENT,CUSTOMER_LOGISTICS_NAME,LOGISTICS_NAME
      , PROVINCE, CITY, AREA, ZIPCODE, COMMODITY_BATCH_NUMBER, ALTER_BATCH_NUMBER
    from  ORDER_ALTER
    <isParameterPresent >
      <include refid="KMORDER_ORDER_ALTER.ibatorgenerated_Example_Where_Clause" />
      <isNotNull property="orderByClause" >
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <select id="ibatorgenerated_selectByPrimaryKey" resultMap="ibatorgenerated_ExtendsResultMap" parameterClass="com.pltfm.app.entities.OrderAlter" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 29 13:38:32 CST 2013.
    -->
    select ORDER_ALTER_ID, ORDER_CODE, PROPOSER, CHECKER, PROPOSE_STATUS, CREATE_DATE, CHECK_DATE,
      ALTER_COMMENT, BACK_TYPE, ADDRESS, NAME, PHONE, FINISH_DATE, RUTURN_MONEY, FARE_SUBSIDY,
      RUTURN_SUM, ORDER_ALTER_CODE, STOCK_OUT_ID, DISTRIBUTION_ID, LOGISTICS_ORDER_NO,
      CUSTOMER_LOGISTICS_NO, ORDER_ITEM_ID, ALTER_TYPE, ALTER_NUM, PHOTO_BATCH_NO, EVIDENCE,
      LOGISTICS_CODE, ADDRESS_ID, EMAIL, DISCOUNT_AMOUNT, FARE_ADDITIONAL, PREFERENTIAL_AMOUNT,
      CUSTOMER_LOGISTICS_CODE, AUDIT_COMMENT, QUALITY_COMMENT,CUSTOMER_LOGISTICS_NAME,LOGISTICS_NAME
      , PROVINCE, CITY, AREA, ZIPCODE, COMMODITY_BATCH_NUMBER, ALTER_BATCH_NUMBER
      <!-- 附加 -->
      ,(SELECT COMMODITY_NAME FROM  ORDER_ITEM WHERE ORDER_ITEM_ID = OA.ORDER_ITEM_ID) COMMODITY_NAME
      ,(SELECT COMMODITY_SKU FROM  ORDER_ITEM WHERE ORDER_ITEM_ID = OA.ORDER_ITEM_ID) COMMODITY_SKU
      ,(SELECT D.ORDER_DICTIONARY_VALUE FROM ORDER_DICTIONARY D WHERE D.ORDER_DICTIONARY_TYPE = 'Propose_Status' AND D.ORDER_DICTIONARY_KEY = OA.PROPOSE_STATUS) PROPOSESTATUSSTR
      ,(SELECT D.ORDER_DICTIONARY_VALUE FROM ORDER_DICTIONARY D WHERE D.ORDER_DICTIONARY_TYPE = 'Back_Types' AND D.ORDER_DICTIONARY_KEY = OA.BACK_TYPE) BACKTYPESTR
      ,(SELECT D.ORDER_DICTIONARY_VALUE FROM ORDER_DICTIONARY D WHERE D.ORDER_DICTIONARY_TYPE = 'Alter_Type' AND D.ORDER_DICTIONARY_KEY = OA.ALTER_TYPE) ALTERTYPESTR
      <!--  -->
    from  ORDER_ALTER OA
    where ORDER_ALTER_ID = #orderAlterId:DECIMAL#
  </select>
  <select id="ibatorgenerated_selectByAlterCode" parameterClass="java.lang.String" resultMap="ibatorgenerated_AlterSelectExtendsResultMap3">
    select ORDER_ALTER_ID, ORDER_CODE, PROPOSER, CHECKER, PROPOSE_STATUS, CREATE_DATE, CHECK_DATE,
      ALTER_COMMENT, BACK_TYPE, ADDRESS, NAME, PHONE, FINISH_DATE, RUTURN_MONEY,RETURN_FARE, FARE_SUBSIDY,
      RUTURN_SUM, ORDER_ALTER_CODE, STOCK_OUT_ID, DISTRIBUTION_ID, LOGISTICS_ORDER_NO,
      CUSTOMER_LOGISTICS_NO, ORDER_ITEM_ID, ALTER_TYPE, ALTER_NUM, PHOTO_BATCH_NO, EVIDENCE,
      LOGISTICS_CODE, ADDRESS_ID, EMAIL, DISCOUNT_AMOUNT, FARE_ADDITIONAL, PREFERENTIAL_AMOUNT,
      CUSTOMER_LOGISTICS_CODE, AUDIT_COMMENT, QUALITY_COMMENT,CUSTOMER_LOGISTICS_NAME,LOGISTICS_NAME
      , PROVINCE, CITY, AREA, ZIPCODE, COMMODITY_BATCH_NUMBER, ALTER_BATCH_NUMBER
      ,DEPOSIT,FINALMONEY,COMPENSATE
      <!-- 附加 -->
      ,(SELECT COMMODITY_NAME FROM  ORDER_ITEM WHERE ORDER_ITEM_ID = OA.ORDER_ITEM_ID) COMMODITY_NAME
      ,(SELECT COMMODITY_SKU FROM  ORDER_ITEM WHERE ORDER_ITEM_ID = OA.ORDER_ITEM_ID) COMMODITY_SKU
      ,(SELECT D.ORDER_DICTIONARY_VALUE FROM ORDER_DICTIONARY D WHERE D.ORDER_DICTIONARY_TYPE = 'Propose_Status' AND D.ORDER_DICTIONARY_KEY = OA.PROPOSE_STATUS) PROPOSESTATUSSTR
      ,(SELECT D.ORDER_DICTIONARY_VALUE FROM ORDER_DICTIONARY D WHERE D.ORDER_DICTIONARY_TYPE = 'Back_Types' AND D.ORDER_DICTIONARY_KEY = OA.BACK_TYPE) BACKTYPESTR
      ,(SELECT D.ORDER_DICTIONARY_VALUE FROM ORDER_DICTIONARY D WHERE D.ORDER_DICTIONARY_TYPE = 'Alter_Type' AND D.ORDER_DICTIONARY_KEY = OA.ALTER_TYPE) ALTERTYPESTR
      <!--  -->
    from  ORDER_ALTER OA
    where ORDER_ALTER_CODE = #orderAlterCode:VARCHAR#
  </select>
  <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="com.pltfm.app.entities.OrderAlter" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 29 13:38:32 CST 2013.
    -->
    delete from  ORDER_ALTER
    where ORDER_ALTER_ID = #orderAlterId:DECIMAL#
  </delete>
  <delete id="ibatorgenerated_deleteByExample" parameterClass="com.pltfm.app.entities.OrderAlterExample" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 29 13:38:32 CST 2013.
    -->
    delete from  ORDER_ALTER
    <include refid="KMORDER_ORDER_ALTER.ibatorgenerated_Example_Where_Clause" />
  </delete>
  <insert id="ibatorgenerated_insert" parameterClass="com.pltfm.app.entities.OrderAlter" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 29 13:38:32 CST 2013.
    -->
    <selectKey resultClass="java.lang.Long" keyProperty="orderAlterId" >
      select SEQ_ORDER_ALTER.NEXTVAL from dual
    </selectKey>
    insert into  ORDER_ALTER (ORDER_ALTER_ID, ORDER_CODE, PROPOSER, CHECKER, PROPOSE_STATUS,
      CREATE_DATE, CHECK_DATE, ALTER_COMMENT, BACK_TYPE, ADDRESS, NAME, PHONE, FINISH_DATE,
      RUTURN_MONEY, FARE_SUBSIDY, RUTURN_SUM, ORDER_ALTER_CODE, STOCK_OUT_ID, DISTRIBUTION_ID,
      LOGISTICS_ORDER_NO, CUSTOMER_LOGISTICS_NO, ORDER_ITEM_ID, ALTER_TYPE, ALTER_NUM,
      PHOTO_BATCH_NO, EVIDENCE, LOGISTICS_CODE, ADDRESS_ID, EMAIL, DISCOUNT_AMOUNT, FARE_ADDITIONAL,
      PREFERENTIAL_AMOUNT, CUSTOMER_LOGISTICS_CODE, AUDIT_COMMENT, QUALITY_COMMENT,CUSTOMER_LOGISTICS_NAME,LOGISTICS_NAME
   	  , PROVINCE, CITY, AREA, ZIPCODE, COMMODITY_BATCH_NUMBER, ALTER_BATCH_NUMBER,DEPOSIT,FINALMONEY,COMPENSATE)
    values (#orderAlterId:DECIMAL#, #orderCode:VARCHAR#, #proposer:VARCHAR#, #checker:VARCHAR#,
      #proposeStatus:DECIMAL#, #createDate#, #checkDate#, #alterComment:VARCHAR#,
      #backType:DECIMAL#, #address:VARCHAR#, #name:VARCHAR#, #phone:VARCHAR#, #finishDate#,
      #ruturnMoney:DECIMAL#, #fareSubsidy:DECIMAL#, #ruturnSum:DECIMAL#, #orderAlterCode:VARCHAR#,
      #stockOutId:DECIMAL#, #distributionId:DECIMAL#, #logisticsOrderNo:VARCHAR#,
      #customerLogisticsNo:VARCHAR#, #orderItemId:DECIMAL#, #alterType:DECIMAL#, #alterNum:DECIMAL#,
      #photoBatchNo:VARCHAR#, #evidence:DECIMAL#, #logisticsCode:VARCHAR#, #addressId:DECIMAL#,
      #email:VARCHAR#, #discountAmount:DECIMAL#, #fareAdditional:DECIMAL#,
      #preferentialAmount:DECIMAL#, #customerLogisticsCode:VARCHAR#, #auditComment:VARCHAR#,
      #qualityComment:VARCHAR#,#customerLogisticsName:VARCHAR#, #logisticsName:VARCHAR#,   
      #province:VARCHAR#, #city:VARCHAR#, #area:VARCHAR#, #zipcode:DECIMAL# 
      , #commodityBatchNumber:VARCHAR#, #alterBatchNumber:VARCHAR#,#deposit:DECIMAL#,#finalmoney:DECIMAL#,#compensate:DECIMAL#)
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="com.pltfm.app.entities.OrderAlter" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 29 13:38:32 CST 2013.
    -->
    <selectKey resultClass="java.lang.Long" keyProperty="orderAlterId" >
      select SEQ_ORDER_ALTER.NEXTVAL from dual
    </selectKey>
    insert into  ORDER_ALTER
    <dynamic prepend="(" >
      <isNotNull prepend="," property="orderAlterId" >
        ORDER_ALTER_ID
      </isNotNull>
      <isNotNull prepend="," property="orderCode" >
        ORDER_CODE
      </isNotNull>
      <isNotNull prepend="," property="proposer" >
        PROPOSER
      </isNotNull>
      <isNotNull prepend="," property="checker" >
        CHECKER
      </isNotNull>
      <isNotNull prepend="," property="proposeStatus" >
        PROPOSE_STATUS
      </isNotNull>
      <isNotNull prepend="," property="createDate" >
        CREATE_DATE
      </isNotNull>
      <isNotNull prepend="," property="checkDate" >
        CHECK_DATE
      </isNotNull>
      <isNotNull prepend="," property="alterComment" >
        ALTER_COMMENT
      </isNotNull>
      <isNotNull prepend="," property="backType" >
        BACK_TYPE
      </isNotNull>
      <isNotNull prepend="," property="address" >
        ADDRESS
      </isNotNull>
      <isNotNull prepend="," property="name" >
        NAME
      </isNotNull>
      <isNotNull prepend="," property="phone" >
        PHONE
      </isNotNull>
      <isNotNull prepend="," property="finishDate" >
        FINISH_DATE
      </isNotNull>
      <isNotNull prepend="," property="ruturnMoney" >
        RUTURN_MONEY
      </isNotNull>
      <isNotNull prepend="," property="fareSubsidy" >
        FARE_SUBSIDY
      </isNotNull>
      <isNotNull prepend="," property="ruturnSum" >
        RUTURN_SUM
      </isNotNull>
      <isNotNull prepend="," property="orderAlterCode" >
        ORDER_ALTER_CODE
      </isNotNull>
      <isNotNull prepend="," property="stockOutId" >
        STOCK_OUT_ID
      </isNotNull>
      <isNotNull prepend="," property="distributionId" >
        DISTRIBUTION_ID
      </isNotNull>
      <isNotNull prepend="," property="logisticsOrderNo" >
        LOGISTICS_ORDER_NO
      </isNotNull>
      <isNotNull prepend="," property="customerLogisticsNo" >
        CUSTOMER_LOGISTICS_NO
      </isNotNull>
      <isNotNull prepend="," property="orderItemId" >
        ORDER_ITEM_ID
      </isNotNull>
      <isNotNull prepend="," property="alterType" >
        ALTER_TYPE
      </isNotNull>
      <isNotNull prepend="," property="alterNum" >
        ALTER_NUM
      </isNotNull>
      <isNotNull prepend="," property="photoBatchNo" >
        PHOTO_BATCH_NO
      </isNotNull>
      <isNotNull prepend="," property="evidence" >
        EVIDENCE
      </isNotNull>
      <isNotNull prepend="," property="logisticsCode" >
        LOGISTICS_CODE
      </isNotNull>
      <isNotNull prepend="," property="addressId" >
        ADDRESS_ID
      </isNotNull>
      <isNotNull prepend="," property="email" >
        EMAIL
      </isNotNull>
      <isNotNull prepend="," property="discountAmount" >
        DISCOUNT_AMOUNT
      </isNotNull>
      <isNotNull prepend="," property="fareAdditional" >
        FARE_ADDITIONAL
      </isNotNull>
      <isNotNull prepend="," property="preferentialAmount" >
        PREFERENTIAL_AMOUNT
      </isNotNull>
      <isNotNull prepend="," property="customerLogisticsCode" >
        CUSTOMER_LOGISTICS_CODE
      </isNotNull>
      <isNotNull prepend="," property="auditComment" >
        AUDIT_COMMENT
      </isNotNull>
      <isNotNull prepend="," property="qualityComment" >
        QUALITY_COMMENT
      </isNotNull>
      <isNotNull prepend="," property="customerLogisticsName" >
        CUSTOMER_LOGISTICS_NAME
      </isNotNull>
      <isNotNull prepend="," property="logisticsName" >
        LOGISTICS_NAME
      </isNotNull>
      <isNotNull prepend="," property="province" >
        PROVINCE
      </isNotNull>
      <isNotNull prepend="," property="city" >
        CITY
      </isNotNull>
      <isNotNull prepend="," property="area" >
        AREA
      </isNotNull>
      <isNotNull prepend="," property="zipcode" >
        ZIPCODE
      </isNotNull>
      <isNotNull prepend="," property="commodityBatchNumber" >
        COMMODITY_BATCH_NUMBER
      </isNotNull>
      <isNotNull prepend="," property="alterBatchNumber" >
        ALTER_BATCH_NUMBER
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="orderAlterId" >
        #orderAlterId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="orderCode" >
        #orderCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="proposer" >
        #proposer:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="checker" >
        #checker:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="proposeStatus" >
        #proposeStatus:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="createDate" >
        #createDate#
      </isNotNull>
      <isNotNull prepend="," property="checkDate" >
        #checkDate#
      </isNotNull>
      <isNotNull prepend="," property="alterComment" >
        #alterComment:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="backType" >
        #backType:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="address" >
        #address:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="name" >
        #name:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="phone" >
        #phone:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="finishDate" >
        #finishDate#
      </isNotNull>
      <isNotNull prepend="," property="ruturnMoney" >
        #ruturnMoney:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="fareSubsidy" >
        #fareSubsidy:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="ruturnSum" >
        #ruturnSum:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="orderAlterCode" >
        #orderAlterCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="stockOutId" >
        #stockOutId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="distributionId" >
        #distributionId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="logisticsOrderNo" >
        #logisticsOrderNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="customerLogisticsNo" >
        #customerLogisticsNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="orderItemId" >
        #orderItemId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="alterType" >
        #alterType:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="alterNum" >
        #alterNum:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="photoBatchNo" >
        #photoBatchNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="evidence" >
        #evidence:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="logisticsCode" >
        #logisticsCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="addressId" >
        #addressId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="email" >
        #email:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="discountAmount" >
        #discountAmount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="fareAdditional" >
        #fareAdditional:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="preferentialAmount" >
        #preferentialAmount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="customerLogisticsCode" >
        #customerLogisticsCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="auditComment" >
        #auditComment:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="qualityComment" >
        #qualityComment:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="customerLogisticsName" >
        #customerLogisticsName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="logisticsName" >
        #logisticsName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="province" >
        #province:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="city" >
        #city:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="area" >
        #area:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="zipcode" >
        #zipcode:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="commodityBatchNumber" >
        #commodityBatchNumber:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="alterBatchNumber" >
        #alterBatchNumber:VARCHAR#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <select id="ibatorgenerated_countByExample" parameterClass="com.pltfm.app.entities.OrderAlterExample" resultClass="java.lang.Integer" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 29 13:38:32 CST 2013.
    -->
    select count(*) from  ORDER_ALTER
    <include refid="KMORDER_ORDER_ALTER.ibatorgenerated_Example_Where_Clause" />
  </select>
  <update id="ibatorgenerated_updateByExampleSelective" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 29 13:38:32 CST 2013.
    -->
    update  ORDER_ALTER
    <dynamic prepend="set" >
      <isNotNull prepend="," property="record.orderAlterId" >
        ORDER_ALTER_ID = #record.orderAlterId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.orderCode" >
        ORDER_CODE = #record.orderCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.proposer" >
        PROPOSER = #record.proposer:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.checker" >
        CHECKER = #record.checker:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.proposeStatus" >
        PROPOSE_STATUS = #record.proposeStatus:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.createDate" >
        CREATE_DATE = #record.createDate#
      </isNotNull>
      <isNotNull prepend="," property="record.checkDate" >
        CHECK_DATE = #record.checkDate#
      </isNotNull>
      <isNotNull prepend="," property="record.alterComment" >
        ALTER_COMMENT = #record.alterComment:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.backType" >
        BACK_TYPE = #record.backType:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.address" >
        ADDRESS = #record.address:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.name" >
        NAME = #record.name:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.phone" >
        PHONE = #record.phone:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.finishDate" >
        FINISH_DATE = #record.finishDate#
      </isNotNull>
      <isNotNull prepend="," property="record.ruturnMoney" >
        RUTURN_MONEY = #record.ruturnMoney:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.fareSubsidy" >
        FARE_SUBSIDY = #record.fareSubsidy:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.ruturnSum" >
        RUTURN_SUM = #record.ruturnSum:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.orderAlterCode" >
        ORDER_ALTER_CODE = #record.orderAlterCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.stockOutId" >
        STOCK_OUT_ID = #record.stockOutId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.distributionId" >
        DISTRIBUTION_ID = #record.distributionId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.logisticsOrderNo" >
        LOGISTICS_ORDER_NO = #record.logisticsOrderNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.customerLogisticsNo" >
        CUSTOMER_LOGISTICS_NO = #record.customerLogisticsNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.orderItemId" >
        ORDER_ITEM_ID = #record.orderItemId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.alterType" >
        ALTER_TYPE = #record.alterType:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.alterNum" >
        ALTER_NUM = #record.alterNum:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.photoBatchNo" >
        PHOTO_BATCH_NO = #record.photoBatchNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.evidence" >
        EVIDENCE = #record.evidence:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.logisticsCode" >
        LOGISTICS_CODE = #record.logisticsCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.addressId" >
        ADDRESS_ID = #record.addressId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.email" >
        EMAIL = #record.email:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.discountAmount" >
        DISCOUNT_AMOUNT = #record.discountAmount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.fareAdditional" >
        FARE_ADDITIONAL = #record.fareAdditional:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.preferentialAmount" >
        PREFERENTIAL_AMOUNT = #record.preferentialAmount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.customerLogisticsCode" >
        CUSTOMER_LOGISTICS_CODE = #record.customerLogisticsCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.auditComment" >
        AUDIT_COMMENT = #record.auditComment:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.qualityComment" >
        QUALITY_COMMENT = #record.qualityComment:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.customerLogisticsName" >
        CUSTOMER_LOGISTICS_NAME = #record.customerLogisticsName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.logisticsName" >
        LOGISTICS_NAME = #record.logisticsName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.province" >
        PROVINCE = #record.province:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.city" >
        CITY = #record.city:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.area" >
        AREA = #record.area:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.zipcode" >
        ZIPCODE = #record.zipcode:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.commodityBatchNumber" >
        COMMODITY_BATCH_NUMBER = #record.commodityBatchNumber:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.alterBatchNumber" >
        ALTER_BATCH_NUMBER = #record.alterBatchNumber:VARCHAR#
      </isNotNull>
    </dynamic>
    <isParameterPresent >
      <include refid="KMORDER_ORDER_ALTER.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="ibatorgenerated_updateByExample" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 29 13:38:32 CST 2013.
    -->
    update  ORDER_ALTER
    set ORDER_ALTER_ID = #record.orderAlterId:DECIMAL#,
      ORDER_CODE = #record.orderCode:VARCHAR#,
      PROPOSER = #record.proposer:VARCHAR#,
      CHECKER = #record.checker:VARCHAR#,
      PROPOSE_STATUS = #record.proposeStatus:DECIMAL#,
      CREATE_DATE = #record.createDate#,
      CHECK_DATE = #record.checkDate#,
      ALTER_COMMENT = #record.alterComment:VARCHAR#,
      BACK_TYPE = #record.backType:DECIMAL#,
      ADDRESS = #record.address:VARCHAR#,
      NAME = #record.name:VARCHAR#,
      PHONE = #record.phone:VARCHAR#,
      FINISH_DATE = #record.finishDate#,
      RUTURN_MONEY = #record.ruturnMoney:DECIMAL#,
      FARE_SUBSIDY = #record.fareSubsidy:DECIMAL#,
      RUTURN_SUM = #record.ruturnSum:DECIMAL#,
      ORDER_ALTER_CODE = #record.orderAlterCode:VARCHAR#,
      STOCK_OUT_ID = #record.stockOutId:DECIMAL#,
      DISTRIBUTION_ID = #record.distributionId:DECIMAL#,
      LOGISTICS_ORDER_NO = #record.logisticsOrderNo:VARCHAR#,
      CUSTOMER_LOGISTICS_NO = #record.customerLogisticsNo:VARCHAR#,
      ORDER_ITEM_ID = #record.orderItemId:DECIMAL#,
      ALTER_TYPE = #record.alterType:DECIMAL#,
      ALTER_NUM = #record.alterNum:DECIMAL#,
      PHOTO_BATCH_NO = #record.photoBatchNo:VARCHAR#,
      EVIDENCE = #record.evidence:DECIMAL#,
      LOGISTICS_CODE = #record.logisticsCode:VARCHAR#,
      ADDRESS_ID = #record.addressId:DECIMAL#,
      EMAIL = #record.email:VARCHAR#,
      DISCOUNT_AMOUNT = #record.discountAmount:DECIMAL#,
      FARE_ADDITIONAL = #record.fareAdditional:DECIMAL#,
      PREFERENTIAL_AMOUNT = #record.preferentialAmount:DECIMAL#,
      CUSTOMER_LOGISTICS_CODE = #record.customerLogisticsCode:VARCHAR#,
      AUDIT_COMMENT = #record.auditComment:VARCHAR#,
      QUALITY_COMMENT = #record.qualityComment:VARCHAR#,
      CUSTOMER_LOGISTICS_NAME = #record.customerLogisticsName:VARCHAR#,
      LOGISTICS_NAME = #record.logisticsName:VARCHAR#,
      PROVINCE = #record.province:VARCHAR#,
      CITY = #record.city:VARCHAR#,
      AREA = #record.area:VARCHAR#,
      ZIPCODE = #record.zipcode:DECIMAL#,
      COMMODITY_BATCH_NUMBER = #record.commodityBatchNumber:VARCHAR#,
      ALTER_BATCH_NUMBER = #record.alterBatchNumber:VARCHAR#
    <isParameterPresent >
      <include refid="KMORDER_ORDER_ALTER.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="ibatorgenerated_updateByPrimaryKeySelective" parameterClass="com.pltfm.app.entities.OrderAlter" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 29 13:38:32 CST 2013.
    -->
    update  ORDER_ALTER
    <dynamic prepend="set" >
      <isNotNull prepend="," property="orderCode" >
        ORDER_CODE = #orderCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="proposer" >
        PROPOSER = #proposer:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="checker" >
        CHECKER = #checker:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="proposeStatus" >
        PROPOSE_STATUS = #proposeStatus:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="createDate" >
        CREATE_DATE = #createDate#
      </isNotNull>
      <isNotNull prepend="," property="checkDate" >
        CHECK_DATE = #checkDate#
      </isNotNull>
      <isNotNull prepend="," property="alterComment" >
        ALTER_COMMENT = #alterComment:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="backType" >
        BACK_TYPE = #backType:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="address" >
        ADDRESS = #address:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="name" >
        NAME = #name:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="phone" >
        PHONE = #phone:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="finishDate" >
        FINISH_DATE = #finishDate#
      </isNotNull>
      <isNotNull prepend="," property="ruturnMoney" >
        RUTURN_MONEY = #ruturnMoney:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="fareSubsidy" >
        FARE_SUBSIDY = #fareSubsidy:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="ruturnSum" >
        RUTURN_SUM = #ruturnSum:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="orderAlterCode" >
        ORDER_ALTER_CODE = #orderAlterCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="stockOutId" >
        STOCK_OUT_ID = #stockOutId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="distributionId" >
        DISTRIBUTION_ID = #distributionId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="logisticsOrderNo" >
        LOGISTICS_ORDER_NO = #logisticsOrderNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="customerLogisticsNo" >
        CUSTOMER_LOGISTICS_NO = #customerLogisticsNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="orderItemId" >
        ORDER_ITEM_ID = #orderItemId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="alterType" >
        ALTER_TYPE = #alterType:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="alterNum" >
        ALTER_NUM = #alterNum:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="photoBatchNo" >
        PHOTO_BATCH_NO = #photoBatchNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="evidence" >
        EVIDENCE = #evidence:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="logisticsCode" >
        LOGISTICS_CODE = #logisticsCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="addressId" >
        ADDRESS_ID = #addressId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="email" >
        EMAIL = #email:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="discountAmount" >
        DISCOUNT_AMOUNT = #discountAmount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="fareAdditional" >
        FARE_ADDITIONAL = #fareAdditional:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="preferentialAmount" >
        PREFERENTIAL_AMOUNT = #preferentialAmount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="customerLogisticsCode" >
        CUSTOMER_LOGISTICS_CODE = #customerLogisticsCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="auditComment" >
        AUDIT_COMMENT = #auditComment:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="qualityComment" >
        QUALITY_COMMENT = #qualityComment:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="customerLogisticsName" >
        CUSTOMER_LOGISTICS_NAME = #customerLogisticsName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="logisticsName" >
        LOGISTICS_NAME = #logisticsName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="province" >
        PROVINCE = #province:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="city" >
        CITY = #city:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="area" >
        AREA = #area:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="zipcode" >
        ZIPCODE = #zipcode:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="commodityBatchNumber" >
        COMMODITY_BATCH_NUMBER = #commodityBatchNumber:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="alterBatchNumber" >
        ALTER_BATCH_NUMBER = #alterBatchNumber:VARCHAR#
      </isNotNull>
       <isNotNull prepend="," property="deposit" >
        DEPOSIT = #deposit:DECIMAL#
      </isNotNull>
       <isNotNull prepend="," property="finalmoney" >
        FINALMONEY = #finalmoney:DECIMAL#
      </isNotNull>
       <isNotNull prepend="," property="compensate" >
        COMPENSATE = #compensate:DECIMAL#
      </isNotNull>
    </dynamic>
    where ORDER_ALTER_ID = #orderAlterId:DECIMAL#
  </update>
  <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="com.pltfm.app.entities.OrderAlter" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 29 13:38:32 CST 2013.
    -->
    update  ORDER_ALTER
    <dynamic prepend="set" >
      <isNotNull prepend="," property="orderCode" >
        ORDER_CODE = #orderCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="proposer" >
        PROPOSER = #proposer:VARCHAR#
      </isNotNull>
       <isNotNull prepend="," property="checker" >
        CHECKER = #checker:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="proposeStatus" >
        PROPOSE_STATUS = #proposeStatus:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="checkDate" >
        check_date = #checkDate#
      </isNotNull>
      <isNotNull prepend="," property="createDate" >
        CREATE_DATE = #createDate#
      </isNotNull>
      <isNotNull prepend="," property="alterComment" >
       ALTER_COMMENT = #alterComment:VARCHAR#
      </isNotNull>
       <isNotNull prepend="," property="backType" >
       BACK_TYPE = #backType:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="address" >
       ADDRESS = #address:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="name" >
       NAME = #name:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="phone" >
       PHONE = #phone:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="finishDate" >
        FINISH_DATE = #finishDate#
      </isNotNull>
      <isNotNull prepend="," property="ruturnMoney" >
        RUTURN_MONEY = #ruturnMoney:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="returnFare" >
        RETURN_FARE = #returnFare:DECIMAL#
      </isNotNull>
       <isNotNull prepend="," property="fareSubsidy" >
        FARE_SUBSIDY = #fareSubsidy:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="ruturnSum" >
        RUTURN_SUM = #ruturnSum:DECIMAL#
      </isNotNull>
       <isNotNull prepend="," property="orderAlterCode" >
       ORDER_ALTER_CODE = #orderAlterCode:VARCHAR#
      </isNotNull>
       <isNotNull prepend="," property="stockOutId" >
       STOCK_OUT_ID = #stockOutId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="distributionId" >
        DISTRIBUTION_ID = #distributionId:DECIMAL#
      </isNotNull>
       <isNotNull prepend="," property="logisticsOrderNo" >
         LOGISTICS_ORDER_NO = #logisticsOrderNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="customerLogisticsNo" >
         CUSTOMER_LOGISTICS_NO = #customerLogisticsNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="orderItemId" >
         ORDER_ITEM_ID = #orderItemId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="alterType" >
        ALTER_TYPE = #alterType:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="alterNum" >
        ALTER_NUM = #alterNum:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="photoBatchNo" >
        PHOTO_BATCH_NO = #photoBatchNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="evidence" >
        EVIDENCE = #evidence:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="logisticsCode" >
       LOGISTICS_CODE = #logisticsCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="addressId" >
        ADDRESS_ID = #addressId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="email" >
        EMAIL = #email:VARCHAR#
      </isNotNull>
       <isNotNull prepend="," property="discountAmount" >
        DISCOUNT_AMOUNT = #discountAmount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="fareAdditional" >
        FARE_ADDITIONAL = #fareAdditional:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="preferentialAmount" >
        PREFERENTIAL_AMOUNT = #preferentialAmount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="customerLogisticsCode" >
        CUSTOMER_LOGISTICS_CODE = #customerLogisticsCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="auditComment" >
        AUDIT_COMMENT = #auditComment:VARCHAR#
      </isNotNull>
       <isNotNull prepend="," property="qualityComment" >
       QUALITY_COMMENT = #qualityComment:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="customerLogisticsName" >
       CUSTOMER_LOGISTICS_NAME = #customerLogisticsName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="logisticsName" >
       LOGISTICS_NAME = #logisticsName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="province" >
      PROVINCE = #province:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="city" >
      CITY = #city:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="area" >
      AREA = #area:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="zipcode" >
      ZIPCODE = #zipcode:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="commodityBatchNumber" >
      COMMODITY_BATCH_NUMBER = #commodityBatchNumber:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="alterBatchNumber" >
      ALTER_BATCH_NUMBER = #alterBatchNumber:VARCHAR#
      </isNotNull>
       <isNotNull prepend="," property="deposit" >
        DEPOSIT = #deposit:DECIMAL#
      </isNotNull>
       <isNotNull prepend="," property="finalmoney" >
        FINALMONEY = #finalmoney:DECIMAL#
      </isNotNull>
       <isNotNull prepend="," property="compensate" >
        COMPENSATE = #compensate:DECIMAL#
      </isNotNull>
    </dynamic>  
    where ORDER_ALTER_ID = #orderAlterId:DECIMAL#
  </update>
    <!-- map方式查询退换货单列表 -->
  <sql id="Map_Where_Clause">
		FROM  ORDER_ALTER OA
			<isNotEmpty property="sysuser.userId">
				 join ORDER_MAIN OM on OA.ORDER_CODE=OM.ORDER_CODE
			      <!-- join(select uc.CHANNEL_NAME
			                           from SYS_USER u, USER_CHANNEL uc
			                          where u.USER_ID = uc.USER_ID
			                            and uc.USER_ID =#sysuser.userId#) CHL on OM.ORDER_CHANNEL=CHL.CHANNEL_NAME -->
			</isNotEmpty>
  		<dynamic prepend="WHERE">
  		    <isNotEmpty prepend="AND" property="supplierId">
  		     EXISTS (SELECT 1 FROM ORDER_MAIN OM WHERE OM.ORDER_CODE=OA.ORDER_CODE AND OM.COMMERCE_ID =#supplierId#)
  		    </isNotEmpty>
  		    
  		    <isNotEmpty prepend="AND" property="supplier">
  		     EXISTS (SELECT 1 FROM order_item oi WHERE oi.ORDER_CODE=OA.ORDER_CODE AND oi.supplier_type = 2)
  		    </isNotEmpty>
  		    
  		    <isNotEmpty prepend="AND" property="kmself">
  		     EXISTS (SELECT 1 FROM order_item oi WHERE oi.ORDER_CODE=OA.ORDER_CODE AND oi.supplier_type != 2)
  		    </isNotEmpty>
  			<!-- 订单号 -->
			<isNotEmpty prepend="AND" property="orderCode">
				OA.ORDER_CODE = #orderCode# 
			</isNotEmpty>
			<!-- 申请状态  -->
			<isNotEmpty prepend="AND" property="status">
				OA.PROPOSE_STATUS = #status# 
			</isNotEmpty>
			<!--  流水号  -->
			<isNotEmpty prepend="AND" property="alterCode">
				OA.ORDER_ALTER_CODE = #alterCode# 
			</isNotEmpty>
			<!-- 审核人  --> 
			<isNotEmpty prepend="AND" property="checker">
				OA.CHECKER = #checker# 
			</isNotEmpty>
			<!-- 申请人 -->
			<isNotEmpty prepend="AND" property="proposer">
				OA.PROPOSER = #proposer#
			</isNotEmpty>
			<!-- 申请时间 -->
			<isNotEmpty prepend="AND" property="createBegin">
				TO_CHAR(OA.CREATE_DATE,'YYYY-MM-DD hh24:mi:ss') &gt;= #createBegin#
				 <!--
				 OA.CREATE_DATE &gt;= TO_DATE(#createBegin#,'YYYY-MM-DD')
				 -->
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="createEnd">
				TO_CHAR(OA.CREATE_DATE,'YYYY-MM-DD hh24:mi:ss') &lt;= #createEnd#
				 <!--
				  OA.CREATE_DATE &gt;= TO_DATE(#createEnd#,'YYYY-MM-DD')
				  -->
			</isNotEmpty>
			<!-- 通过/驳回时间 -->
			<isNotEmpty prepend="AND" property="finishBegin">
				TO_CHAR(OA.FINISH_DATE,'YYYY-MM-DD') &gt;= #finishBegin#
				 <!--
				 OA.FINISH_DATE &gt;= TO_DATE(#finishBegin#,'YYYY-MM-DD')
				 -->
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="finishEnd">
				TO_CHAR(OA.FINISH_DATE,'YYYY-MM-DD') &lt;= #finishEnd#
				 <!--
				 OA.FINISH_DATE &gt;= TO_DATE(#finishEnd#,'YYYY-MM-DD')
				 -->
			</isNotEmpty>
		</dynamic>
  </sql>
  <!-- 退换货列表 -->
  <select id="selectByMap"  parameterClass="java.util.Map"  resultMap="ibatorgenerated_AlterSelectExtendsResultMap_YS">
		SELECT TT.*
		,(select f.CORPORATE_NAME from  order_item oi          
          join   suppliers_info s on s.supplier_id = oi.supplier
          join   commercial_tenant_basic_info f 
          on f.n_commercial_tenant_id = s.merchant_id where oi.order_item_id=TT.order_item_id) supplierName
        ,(SELECT im.IMG_PATH
          FROM  ORDER_ITEM item
          join  PRODUCT_SKU  sku on item.COMMODITY_SKU = sku.PRODUCT_SKU_CODE
          join  PRODUCT_IMAGE im on SKU.PRODUCT_SKU_ID=IM.SKU_ID AND IM.IS_DEFAULT=0
         WHERE item.ORDER_ITEM_ID = TT.ORDER_ITEM_ID 
         ) IMG_PATH
         ,(SELECT SKU.PRODUCT_SKU_ID from  PRODUCT_SKU SKU, ORDER_ITEM item 
         WHERE item.COMMODITY_SKU = sku.PRODUCT_SKU_CODE and item.ORDER_ITEM_ID = TT.ORDER_ITEM_ID) PRODUCT_SKU_ID 
         ,(SELECT COMMODITY_TITLE FROM  ORDER_ITEM
         WHERE ORDER_ITEM_ID = TT.ORDER_ITEM_ID) COMMODITY_TITLE  
        <!-- 附加 -->
        ,(SELECT COMMODITY_NAME FROM  ORDER_ITEM WHERE ORDER_ITEM_ID = TT.ORDER_ITEM_ID) COMMODITY_NAME
        ,(SELECT COMMODITY_SKU FROM  ORDER_ITEM WHERE ORDER_ITEM_ID = TT.ORDER_ITEM_ID) COMMODITY_SKU
        ,(SELECT OM.ORDER_TYPE FROM  ORDER_ITEM OI, ORDER_MAIN OM WHERE OM.ORDER_CODE = OI.ORDER_CODE AND ORDER_ITEM_ID = TT.ORDER_ITEM_ID) ORDER_TYPE
        ,(SELECT D.ORDER_DICTIONARY_VALUE FROM ORDER_DICTIONARY D WHERE D.ORDER_DICTIONARY_TYPE = 'Propose_Status' AND D.ORDER_DICTIONARY_KEY = TT.PROPOSE_STATUS) PROPOSESTATUSSTR
        ,(SELECT D.ORDER_DICTIONARY_VALUE FROM ORDER_DICTIONARY D WHERE D.ORDER_DICTIONARY_TYPE = 'Back_Types' AND D.ORDER_DICTIONARY_KEY = TT.BACK_TYPE) BACKTYPESTR
        ,(SELECT D.ORDER_DICTIONARY_VALUE FROM ORDER_DICTIONARY D WHERE D.ORDER_DICTIONARY_TYPE = 'Alter_Type' AND D.ORDER_DICTIONARY_KEY = TT.ALTER_TYPE) ALTERTYPESTR
        <!--  -->
  		FROM (SELECT T.*, ROWNUM rn
        FROM(SELECT	OA.*
  		<include refid="Map_Where_Clause"/>
  		ORDER BY OA.ORDER_ALTER_ID DESC) T
        WHERE ROWNUM  &lt;= #end#) TT
		WHERE TT.rn  &gt;= #start#
  </select>
  
  
  <select id="countByMap"  parameterClass="java.util.Map"  resultClass="java.lang.Integer">
  		SELECT COUNT(*)  
    	<include refid="Map_Where_Clause"/>
  </select>
  
  
  <!-- 是否正在退换货 -->
  <select id="checkIsReturning"  parameterClass="java.lang.Long"  resultClass="java.lang.Long">
  		SELECT  
			(CASE
		         WHEN EXISTS (SELECT *
		                 FROM  ORDER_ALTER
		                WHERE ORDER_ITEM_ID = IT.ORDER_ITEM_ID
		                  AND PROPOSE_STATUS NOT IN (-2, -1, 7)
		                  AND ROWNUM = 1) THEN
		          1
		         ELSE
		          (CASE
		            WHEN (SELECT IT.COMMODITY_NUMBER - SUM(ALTER_NUM)
		                    FROM  ORDER_ALTER
		                   WHERE ALTER_TYPE IN (1,3)
		                     AND PROPOSE_STATUS = 7
		                     AND ORDER_ITEM_ID = IT.ORDER_ITEM_ID) = 0 THEN
		             1
		            ELSE
		             0
		          END)
		    END) ISRETURNING
			FROM ORDER_ITEM IT WHERE IT.ORDER_ITEM_ID = #value#
  </select>
  <!-- 申请后过期不退货 -->
  <select id="autoCancel"  parameterClass="java.lang.Long"  resultClass="java.lang.Long">
  		UPDATE ORDER_ALTER
		SET PROPOSE_STATUS = - 1
		WHERE
			PROPOSE_STATUS = 2
		AND CHECK_DATE + (#value#/24) &lt; SYSDATE
  </select>
  <!-- 退款/换货/返回原件后过期不确认 -->
  <update id="autoSure"  parameterClass="java.lang.Integer">
		UPDATE ORDER_ALTER OA
		SET PROPOSE_STATUS = 7,
		FINISH_DATE = SYSDATE
		WHERE
			PROPOSE_STATUS IN (61，62，63)
		AND (
			SELECT
						MIN(NOW_OPERATE_DATE)
			FROM
				ORDER_ALTER_OPERATE_STATEMENT
			WHERE
				NOW_ALTER_STATUS IN (61，62，63)
			AND ORDER_ALTER_CODE = OA.ORDER_ALTER_CODE
		) + (#value#/24) &lt; SYSDATE
  </update>
  <select id="selectHistory" resultMap="ibatorgenerated_WithSkuResultMap" parameterClass="java.lang.String" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 29 13:38:32 CST 2013.
    -->
    select ORDER_ALTER_ID, ORDER_CODE, PROPOSER, CHECKER, PROPOSE_STATUS, CREATE_DATE, CHECK_DATE,
      ALTER_COMMENT, BACK_TYPE, ADDRESS, NAME, PHONE, FINISH_DATE, RUTURN_MONEY, FARE_SUBSIDY,
      RUTURN_SUM, ORDER_ALTER_CODE, STOCK_OUT_ID, DISTRIBUTION_ID, LOGISTICS_ORDER_NO,
      CUSTOMER_LOGISTICS_NO, ORDER_ITEM_ID, ALTER_TYPE, ALTER_NUM, PHOTO_BATCH_NO, EVIDENCE,
      LOGISTICS_CODE, ADDRESS_ID, EMAIL, DISCOUNT_AMOUNT, FARE_ADDITIONAL, PREFERENTIAL_AMOUNT,
      CUSTOMER_LOGISTICS_CODE, AUDIT_COMMENT, QUALITY_COMMENT,CUSTOMER_LOGISTICS_NAME,LOGISTICS_NAME
      , PROVINCE, CITY, AREA, ZIPCODE, COMMODITY_BATCH_NUMBER, ALTER_BATCH_NUMBER
      <!-- 附加 -->
      ,(SELECT COMMODITY_SKU FROM  ORDER_ITEM WHERE ORDER_ITEM_ID = OA.ORDER_ITEM_ID) COMMODITY_SKU
      <!--  -->
    from  ORDER_ALTER OA
    WHERE PROPOSE_STATUS = 7 AND ALTER_TYPE IN (1,3) AND   
	    (SELECT
			ORDER_CODE
		FROM
			ORDER_MAIN E
		WHERE
			CONNECT_BY_ISLEAF = 1 START WITH E .ORDER_CODE = OA.ORDER_CODE CONNECT BY E .ORDER_CODE = PRIOR E .PARENT_ORDER_CODE
		) = #value#
  </select>
  <select id="selectHistoryMoney" resultClass="java.math.BigDecimal" parameterClass="java.lang.String" >
	SELECT SUM(RUTURN_MONEY)
    FROM  ORDER_ALTER OA
    WHERE PROPOSE_STATUS = 7 AND ALTER_TYPE IN (1,3) AND 
      (SELECT
			ORDER_CODE
		FROM
			ORDER_MAIN E
		WHERE
			CONNECT_BY_ISLEAF = 1 START WITH E .ORDER_CODE = OA.ORDER_CODE CONNECT BY E .ORDER_CODE = PRIOR E .PARENT_ORDER_CODE
		) = #value#
  </select>
  <select id="selectFareAdditional" resultClass="java.lang.Integer" parameterClass="java.lang.String" >
		SELECT
			COUNT (*)
		FROM
			 ORDER_ALTER OA
		WHERE
			PROPOSE_STATUS = 7
		AND ALTER_TYPE IN (1,3)
		AND (
			SELECT
				ORDER_CODE
			FROM
				ORDER_MAIN E
			WHERE
				CONNECT_BY_ISLEAF = 1 START WITH E .ORDER_CODE = OA.ORDER_CODE CONNECT BY E .ORDER_CODE = PRIOR E .PARENT_ORDER_CODE
		) = #value#
		AND FARE_ADDITIONAL = 1
		AND ROWNUM = 1
  </select>
  <select id="getReturnMoneySum" resultClass="java.math.BigDecimal" parameterClass="java.util.Map" >
		SELECT
			nvl(SUM (OA.RUTURN_MONEY),0)
		FROM
			 ORDER_ALTER OA
		WHERE
			OA.PROPOSE_STATUS IN (61,7)
		AND OA.ALTER_TYPE IN (1,3)
		AND 
      (SELECT
			ORDER_CODE
		FROM
			ORDER_MAIN E
		WHERE
			CONNECT_BY_ISLEAF = 1 START WITH E .ORDER_CODE = OA.ORDER_CODE CONNECT BY E .ORDER_CODE = PRIOR E .PARENT_ORDER_CODE
		) = #orderCode#
  </select>
  
  <sql id="OrderReturn_Map_Where_Clause">
		FROM  ORDER_ALTER OA
			<isNotEmpty property="sysuser.userId">
				 join ORDER_MAIN OM on OA.ORDER_CODE=OM.ORDER_CODE
			      <!-- join(select uc.CHANNEL_NAME 
			                           from SYS_USER u, USER_CHANNEL uc
			                          where u.USER_ID = uc.USER_ID
			                            and uc.USER_ID =#sysuser.userId#) CHL on OM.ORDER_CHANNEL=CHL.CHANNEL_NAME -->
			</isNotEmpty>
  		<dynamic prepend="WHERE">
  			<!-- 订单号 -->
			<isNotEmpty prepend="AND" property="orderCode">
				OA.ORDER_CODE = #orderCode# 
			</isNotEmpty>
			<!-- 申请状态  -->
			<isNotEmpty prepend="AND" property="status">
				OA.PROPOSE_STATUS = #status# 
			</isNotEmpty>
			<!-- 申请人 -->
			<isNotEmpty prepend="AND" property="proposer">
				OA.PROPOSER = #proposer#
			</isNotEmpty>
			<!--  流水号  -->
			<isNotEmpty prepend="AND" property="alterCode">
				OA.ORDER_ALTER_CODE = #alterCode# 
			</isNotEmpty>
			
		</dynamic>
  </sql>
  
  <select id="selectOrderReturnByMap"  parameterClass="java.util.Map"  resultMap="ibatorgenerated_ExtendsResultMap">
		SELECT TT.ORDER_ALTER_ID, TT.ORDER_CODE, TT.PROPOSER, TT.CHECKER, TT.PROPOSE_STATUS, TT.CREATE_DATE, TT.CHECK_DATE,
        TT.ALTER_COMMENT, TT.BACK_TYPE, TT.ADDRESS, TT.NAME, TT.PHONE, TT.FINISH_DATE, TT.RUTURN_MONEY, TT.FARE_SUBSIDY,
        TT.RUTURN_SUM, TT.ORDER_ALTER_CODE, TT.STOCK_OUT_ID, TT.DISTRIBUTION_ID, TT.LOGISTICS_ORDER_NO,
        TT.CUSTOMER_LOGISTICS_NO, TT.ORDER_ITEM_ID, TT.ALTER_TYPE, TT.ALTER_NUM, TT.PHOTO_BATCH_NO, TT.EVIDENCE,
        TT.LOGISTICS_CODE, TT.ADDRESS_ID, TT.EMAIL, TT.DISCOUNT_AMOUNT, TT.FARE_ADDITIONAL, TT.PREFERENTIAL_AMOUNT,
        TT.CUSTOMER_LOGISTICS_CODE, TT.AUDIT_COMMENT, TT.QUALITY_COMMENT,TT.CUSTOMER_LOGISTICS_NAME,TT.LOGISTICS_NAME,
        TT.PROVINCE, TT.CITY, TT.AREA, TT.ZIPCODE, TT.COMMODITY_BATCH_NUMBER, TT.ALTER_BATCH_NUMBER
        <!-- 附加 -->
        ,(SELECT COMMODITY_NAME FROM  ORDER_ITEM WHERE ORDER_ITEM_ID = TT.ORDER_ITEM_ID) COMMODITY_NAME
        ,(SELECT COMMODITY_SKU FROM  ORDER_ITEM WHERE ORDER_ITEM_ID = TT.ORDER_ITEM_ID) COMMODITY_SKU
        ,(SELECT D.ORDER_DICTIONARY_VALUE FROM ORDER_DICTIONARY D WHERE D.ORDER_DICTIONARY_TYPE = 'Propose_Status' AND D.ORDER_DICTIONARY_KEY = TT.PROPOSE_STATUS) PROPOSESTATUSSTR
        ,(SELECT D.ORDER_DICTIONARY_VALUE FROM ORDER_DICTIONARY D WHERE D.ORDER_DICTIONARY_TYPE = 'Back_Types' AND D.ORDER_DICTIONARY_KEY = TT.BACK_TYPE) BACKTYPESTR
        ,(SELECT D.ORDER_DICTIONARY_VALUE FROM ORDER_DICTIONARY D WHERE D.ORDER_DICTIONARY_TYPE = 'Alter_Type' AND D.ORDER_DICTIONARY_KEY = TT.ALTER_TYPE) ALTERTYPESTR
        <!--  -->
  		FROM (SELECT T.ORDER_ALTER_ID, T.ORDER_CODE, T.PROPOSER, T.CHECKER, T.PROPOSE_STATUS, T.CREATE_DATE, T.CHECK_DATE,
        T.ALTER_COMMENT, T.BACK_TYPE, T.ADDRESS, T.NAME, T.PHONE, T.FINISH_DATE, T.RUTURN_MONEY, T.FARE_SUBSIDY,
        T.RUTURN_SUM, T.ORDER_ALTER_CODE, T.STOCK_OUT_ID, T.DISTRIBUTION_ID, T.LOGISTICS_ORDER_NO,
        T.CUSTOMER_LOGISTICS_NO, T.ORDER_ITEM_ID, T.ALTER_TYPE, T.ALTER_NUM, T.PHOTO_BATCH_NO, T.EVIDENCE,
        T.LOGISTICS_CODE, T.ADDRESS_ID, T.EMAIL, T.DISCOUNT_AMOUNT, T.FARE_ADDITIONAL, T.PREFERENTIAL_AMOUNT,
        T.CUSTOMER_LOGISTICS_CODE, T.AUDIT_COMMENT, T.QUALITY_COMMENT,T.CUSTOMER_LOGISTICS_NAME,T.LOGISTICS_NAME,
        T.PROVINCE, T.CITY, T.AREA, T.ZIPCODE, T.COMMODITY_BATCH_NUMBER, T.ALTER_BATCH_NUMBER, ROWNUM rn
        FROM(SELECT	OA.ORDER_ALTER_ID, OA.ORDER_CODE, OA.PROPOSER, OA.CHECKER, OA.PROPOSE_STATUS, OA.CREATE_DATE, OA.CHECK_DATE,
        OA.ALTER_COMMENT, OA.BACK_TYPE, OA.ADDRESS, OA.NAME, OA.PHONE, OA.FINISH_DATE, OA.RUTURN_MONEY, OA.FARE_SUBSIDY,
        OA.RUTURN_SUM, OA.ORDER_ALTER_CODE, OA.STOCK_OUT_ID, OA.DISTRIBUTION_ID, OA.LOGISTICS_ORDER_NO,
        OA.CUSTOMER_LOGISTICS_NO, OA.ORDER_ITEM_ID, OA.ALTER_TYPE, OA.ALTER_NUM, OA.PHOTO_BATCH_NO, OA.EVIDENCE,
        OA.LOGISTICS_CODE, OA.ADDRESS_ID, OA.EMAIL, OA.DISCOUNT_AMOUNT, OA.FARE_ADDITIONAL, OA.PREFERENTIAL_AMOUNT,
        OA.CUSTOMER_LOGISTICS_CODE, OA.AUDIT_COMMENT, OA.QUALITY_COMMENT,OA.CUSTOMER_LOGISTICS_NAME,OA.LOGISTICS_NAME,
        OA.PROVINCE, OA.CITY, OA.AREA, OA.ZIPCODE, OA.COMMODITY_BATCH_NUMBER, OA.ALTER_BATCH_NUMBER
  		<include refid="OrderReturn_Map_Where_Clause"/>
  		ORDER BY OA.ORDER_ALTER_ID DESC) T
        WHERE
        <isNotEmpty prepend=" " property="end">
			ROWNUM  &lt;= #end#
		</isNotEmpty>
		<isEmpty prepend=" " property="end">
			ROWNUM  &lt;= 10
		</isEmpty>
        ) TT
		WHERE 
		<isNotEmpty prepend=" " property="start">
			TT.rn  &gt;= #start#
		</isNotEmpty>
		<isEmpty prepend=" " property="start">
			TT.rn  &gt;= 1
		</isEmpty>
  </select>
  
   <!-- 导出供应商退换货订单信息--> 
   <select id="SQL_QUERY_ORDER_ALTER_EXPORT_INFO" parameterClass="java.util.Map"  resultMap="qrySellerExportAlterOrder">
		WITH d AS
     		(SELECT d.order_dictionary_key, D.ORDER_DICTIONARY_VALUE FROM ORDER_DICTIONARY D WHERE D.ORDER_DICTIONARY_TYPE = 'Propose_Status')
		SELECT order_alter.ORDER_ALTER_CODE,
		       order_alter.ORDER_CODE,
		       order_main.CUSTOMER_ACCOUNT,
		       order_item.COMMODITY_TITLE,
		       order_item.COMMODITY_SKU,
		       order_item.COMMODITY_UNIT_PRICE,
		       order_alter.ALTER_NUM,
		       order_alter.RUTURN_MONEY,
		       order_alter.ALTER_TYPE,
		       order_alter.PROPOSER,
		       order_main.CREATE_DATE as ORDER_CREATE_DATE,
		       order_alter.CREATE_DATE,
		       order_alter.CHECK_DATE,
		       order_alter.FINISH_DATE,
		       order_alter.PROPOSE_STATUS,
		       (select d.ORDER_DICTIONARY_VALUE from d where d.order_dictionary_key = order_alter.PROPOSE_STATUS ) as PROPOSE_STATUS_NAME,
		       order_alter.ALTER_COMMENT
		  from order_alter, order_main, order_item
		 where order_alter.order_item_id = order_item.order_item_id
		   and order_item.order_code = order_main.order_code
		   <!-- 退换货编号-->
			<isNotEmpty prepend="AND" property="orderAlterCode">
				order_alter.ORDER_ALTER_CODE like '%'||#orderAlterCode#||'%' 
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="orderCode">
				order_alter.ORDER_CODE like '%'||#orderCode#||'%' 
			</isNotEmpty>
			<!-- 申请人 -->
			<isNotEmpty prepend="AND" property="proposer">
				order_alter.PROPOSER like '%'||#proposer#||'%'
			</isNotEmpty>
			<!-- 退换货状态状态  -->
			<isNotEmpty prepend="AND" property="proposeStatus">
				order_alter.PROPOSE_STATUS = #proposeStatus# 
			</isNotEmpty>
			<!-- 商家ID -->
			<isNotEmpty prepend="AND" property="commerceId">
				order_main.COMMERCE_ID = #commerceId# 
			</isNotEmpty>
			<!-- 申请时间 -->
			<isNotEmpty prepend="AND" property="createBegin">
	     		<![CDATA[
	                 order_alter.CREATE_DATE >= to_date(#createBegin#,'yyyy-MM-dd HH24:mi:ss')     
	      		]]>
     		</isNotEmpty>
     		<isNotEmpty prepend="AND" property="createEnd">
	     		<![CDATA[
	                order_alter.CREATE_DATE <=  to_date(#createEnd#,'yyyy-MM-dd HH24:mi:ss')       
	      		]]>
     		</isNotEmpty>
     		 order by order_alter.create_date desc 
   </select>
   
   <select id="getReturnFareSum" resultClass="java.math.BigDecimal" parameterClass="java.lang.String" >
		    SELECT
			nvl(SUM (OA.RETURN_FARE),0)
		FROM
			 ORDER_ALTER OA
		WHERE
			OA.PROPOSE_STATUS NOT IN (-2,-1,1,53,54,63)
		AND 
      (SELECT
			ORDER_CODE
		FROM
			ORDER_MAIN E
		WHERE
			CONNECT_BY_ISLEAF = 1 START WITH E .ORDER_CODE = OA.ORDER_CODE CONNECT BY E .ORDER_CODE = PRIOR E .PARENT_ORDER_CODE
		) 
		= 
	    (SELECT
	      ORDER_CODE
	    FROM
	      ORDER_MAIN E
	    WHERE
	      CONNECT_BY_ISLEAF = 1 START WITH E .ORDER_CODE = #orderCode# CONNECT BY E .ORDER_CODE = PRIOR E .PARENT_ORDER_CODE
	    )
  </select>
  
  
  <!-- 查询需要同步到总会会员系统的售后订单   todo:resultMap-->
	<select id="queryOrderAlterInfoSync2Base" parameterClass="java.util.List" resultMap="syncOrderAlterInfoResultMap" >
		SELECT 
           order_alter.order_alter_code,
		   order_alter.order_code,
           order_alter.alter_type,
           order_item.commodity_sku,
           order_item.commodity_title,
           order_alter.alter_comment,
           order_alter.audit_comment,
           order_alter.ruturn_money,
           order_alter.return_fare,
           order_alter.fare_subsidy,
           order_alter.create_date,
           order_alter.check_date,
		   (select l.card_num from   login_info l where l.login_account = order_main.customer_account) card_num
		   <!-- ,order_alter.deposit,
           order_alter.finalmoney,
           order_alter.compensate -->
		  from order_alter, order_main, order_item
		 where order_alter.order_item_id = order_item.order_item_id
		   and order_item.order_code = order_main.order_code
       and order_alter.order_alter_code in 
       <iterate conjunction="," open="(" close=")">
	  		#alterCodes[]#
		</iterate>
	</select>
  
	<select id="checkDate" resultClass="java.lang.Integer" parameterClass="java.util.Map" >
   	select  case when (select (oi.commodity_number-#alterNum:DECIMAL#) as commodityNumber from  order_item oi where oi.order_item_id = #orderItemId:DECIMAL#)>=0 
	AND (select count(order_alter_code) from  order_alter oa where oa.order_alter_code = #orderAlterCode:VARCHAR#) = 0
	THEN 1 
	ELSE 0 END
	from dual
  </select>
  
</sqlMap>