<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="SPREAD_EFFECT" >
  <resultMap id="SPREAD_EFFECT_RESUL_MAP" class="com.pltfm.app.vobject.SpreadEffect" >
    <result column="SEID" property="seid" jdbcType="DECIMAL" />
    <result column="SPREAD_ID" property="spreadId" jdbcType="DECIMAL" />
    <result column="CONSUMER_ID" property="consumerId" jdbcType="DECIMAL" />
    <result column="RECOMMENDERS" property="recommenders" jdbcType="DECIMAL" />
    <result column="ORDER_CODE" property="orderCode" jdbcType="VARCHAR" />
    <result column="ORDER_ITEM_ID" property="orderItemId" jdbcType="DECIMAL" />
    <result column="COMMODITY_SKU" property="commoditySku" jdbcType="VARCHAR" />
    <result column="SUIT_ID" property="suitId" jdbcType="DECIMAL" />
    <result column="COMMODITY_NUMBER" property="commodityNumber" jdbcType="DECIMAL" />
    <result column="COMMODITY_UNIT_INCOMING" property="commodityUnitIncoming" jdbcType="DECIMAL" />
    <result column="SALE_REBATE_RATE" property="saleRebateRate" jdbcType="DECIMAL" />
    <result column="DISTRI_REBACK_RATE" property="distriRebackRate" jdbcType="DECIMAL" />
    <result column="SRID" property="srid" jdbcType="DECIMAL" />
    <result column="CONSUMPTION_RATE" property="consumptionRate" jdbcType="DECIMAL" />
    <result column="PAY_TIME" property="payTime" jdbcType="TIMESTAMP" />
    <result column="FINISH_TIME" property="finishTime" jdbcType="TIMESTAMP" />
    <result column="SETT_TIME" property="settTime" jdbcType="TIMESTAMP" />
    <result column="REFUND_NUMBER" property="refundNumber" jdbcType="DECIMAL" />
    <result column="SETT_AMOUNT" property="settAmount" jdbcType="DECIMAL" />
    <result column="CONSUMPTION_AMOUNT" property="consumptionAmount" jdbcType="DECIMAL" />
    <result column="SALE_REBATE_AMOUNT" property="saleRebateAmount" jdbcType="DECIMAL" />
    <result column="DISTRI_REBACK_AMOUNT" property="distriRebackAmount" jdbcType="DECIMAL" />
    <result column="STATUS" property="status" jdbcType="DECIMAL" />
    <result column="REMARK" property="remark" jdbcType="VARCHAR" />
  </resultMap>
  
	<resultMap id="SPREAD_EFFECT_RESULT_FOR_JOB" class="com.pltfm.app.vobject.SpreadEffect" >
	    <result column="SEID" property="seid" jdbcType="DECIMAL" />
	    <result column="SPREAD_ID" property="spreadId" jdbcType="DECIMAL" />
	    <result column="CONSUMER_ID" property="consumerId" jdbcType="DECIMAL" />
	    <result column="RECOMMENDERS" property="recommenders" jdbcType="DECIMAL" />
	    <result column="ORDER_CODE" property="orderCode" jdbcType="VARCHAR" />
	    <result column="ORDER_ITEM_ID" property="orderItemId" jdbcType="DECIMAL" />
	    <result column="REFUND_NUMBER" property="refundNumber" jdbcType="DECIMAL" />
	    <result column="COMMODITY_NUMBER" property="commodityNumber" jdbcType="DECIMAL" />
	    <result column="COMMODITY_UNIT_INCOMING" property="commodityUnitIncoming" jdbcType="DECIMAL" />
	    <result column="SALE_REBATE_RATE" property="saleRebateRate" jdbcType="DECIMAL" />
	    <result column="DISTRI_REBACK_RATE" property="distriRebackRate" jdbcType="DECIMAL" />
	    <result column="CONSUMPTION_RATE" property="consumptionRate" jdbcType="DECIMAL" />
  	</resultMap>
  <sql id="ibatorgenerated_Example_Where_Clause" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri May 08 11:38:02 CST 2015.
    -->
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate" >
      <isEqual property="oredCriteria[].valid" compareValue="true" >
        (
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and" >
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and" >
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and" >
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction="," >
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and" >
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  <select id="ibatorgenerated_selectByExample" resultMap="SPREAD_EFFECT_RESUL_MAP" parameterClass="com.pltfm.app.vobject.SpreadEffectExample" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri May 08 11:38:02 CST 2015.
    -->
    select SEID, SPREAD_ID, CONSUMER_ID, RECOMMENDERS, ORDER_CODE, ORDER_ITEM_ID, COMMODITY_SKU,
      SUIT_ID, COMMODITY_NUMBER, COMMODITY_UNIT_INCOMING, SALE_REBATE_RATE, DISTRI_REBACK_RATE,
      SRID, CONSUMPTION_RATE, PAY_TIME, FINISH_TIME, SETT_TIME, REFUND_NUMBER, SETT_AMOUNT,
      CONSUMPTION_AMOUNT, SALE_REBATE_AMOUNT, DISTRI_REBACK_AMOUNT, STATUS, REMARK
    from SPREAD_EFFECT
    <isParameterPresent >
      <include refid="SPREAD_EFFECT.ibatorgenerated_Example_Where_Clause" />
      <isNotNull property="orderByClause" >
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
   <!-- 查询用户信息creatBy lijianjun -->
  	<select id="selectuserInfo" parameterClass="java.lang.Long" resultClass="com.pltfm.app.dataobject.UserInfoDO">
		 select ai.n_login_id    loginId,
	         ai.mobile        mobile,
	         ai.email         email,
	         ai.login_account loginAccount
	    from   login_info ai
	   where ai.n_login_id = #loginId#
 	</select> 
  <!-- 根据商品sku查询商品名称creatBy lijianjun -->
  	<select id="selectProductNameBySku" parameterClass="com.pltfm.app.vobject.SpreaderInfo" resultClass="com.pltfm.app.vobject.SpreaderInfo">
	select m.procuct_name   procuctName
    from  productmain m, product_sku s
       where m.product_id=s.product_id 
    and  s.product_sku_code=#commoditySku#
 	</select> 
 <!-- 关联微商表查询用户信息 creatBy lijianjun -->
 	<select id="selectuserInfoRelationSpreadInfo" parameterClass="java.lang.Long" resultClass="com.pltfm.app.vobject.SpreaderInfo">
		select ai.n_login_id    loginId,
	           ai.mobile        mobile,
	           ai.email         email,
	           ai.login_account loginAccount,
	           i.vs_number      vsNumber
	      from   login_info ai,   spreader_info i
	     where i.login_id(+) = ai.n_login_id
	       and i.sid = #sid#
 	</select> 
 	
  <!-- 推广效果查询creatBy lijianjun -->
  <select id="ibatorgenerated_selectBySpreadEffect" resultMap="SPREAD_EFFECT_RESUL_MAP" parameterClass="com.pltfm.app.vobject.SpreadEffect" >
    select SEID, SPREAD_ID, CONSUMER_ID, RECOMMENDERS, ORDER_CODE, ORDER_ITEM_ID, COMMODITY_SKU,
      SUIT_ID, COMMODITY_NUMBER, COMMODITY_UNIT_INCOMING, SALE_REBATE_RATE, DISTRI_REBACK_RATE,
      SRID, CONSUMPTION_RATE, PAY_TIME, FINISH_TIME, SETT_TIME, REFUND_NUMBER, SETT_AMOUNT,
      CONSUMPTION_AMOUNT, SALE_REBATE_AMOUNT, DISTRI_REBACK_AMOUNT, STATUS, REMARK
    from SPREAD_EFFECT where 1=1
    <isNotNull property="orderCode">
        <isNotEmpty prepend="AND" property="orderCode">
        ORDER_CODE=#orderCode#
        </isNotEmpty>
    </isNotNull>
      <isNotNull property="seid">
        <isNotEmpty prepend="AND" property="seid">
        SEID=#seid#
        </isNotEmpty>
    </isNotNull>
    
  </select>
  
  <select id="ibatorgenerated_selectByPrimaryKey" resultMap="SPREAD_EFFECT_RESUL_MAP" parameterClass="com.pltfm.app.vobject.SpreadEffect" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri May 08 11:38:02 CST 2015.
    -->
    select SEID, SPREAD_ID, CONSUMER_ID, RECOMMENDERS, ORDER_CODE, ORDER_ITEM_ID, COMMODITY_SKU,
      SUIT_ID, COMMODITY_NUMBER, COMMODITY_UNIT_INCOMING, SALE_REBATE_RATE, DISTRI_REBACK_RATE,
      SRID, CONSUMPTION_RATE, PAY_TIME, FINISH_TIME, SETT_TIME, REFUND_NUMBER, SETT_AMOUNT,
      CONSUMPTION_AMOUNT, SALE_REBATE_AMOUNT, DISTRI_REBACK_AMOUNT, STATUS, REMARK
    from SPREAD_EFFECT
    where SEID = #seid:DECIMAL#
  </select>
  <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="com.pltfm.app.vobject.SpreadEffect" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri May 08 11:38:02 CST 2015.
    -->
    delete from SPREAD_EFFECT
    where SEID = #seid:DECIMAL#
  </delete>
  <delete id="ibatorgenerated_deleteByExample" parameterClass="com.pltfm.app.vobject.SpreadEffectExample" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri May 08 11:38:02 CST 2015.
    -->
    delete from SPREAD_EFFECT
    <include refid="SPREAD_EFFECT.ibatorgenerated_Example_Where_Clause" />
  </delete>
  <insert id="ibatorgenerated_insert" parameterClass="com.pltfm.app.vobject.SpreadEffect" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri May 08 11:38:02 CST 2015.
    -->
    <selectKey keyProperty="seid" resultClass="java.math.BigDecimal">
      SELECT SEQ_SPREAD_EFFECT_ID.NEXTVAL FROM DUAL
    </selectKey>
    insert into SPREAD_EFFECT (SEID, SPREAD_ID, CONSUMER_ID, RECOMMENDERS, ORDER_CODE,
      ORDER_ITEM_ID, COMMODITY_SKU, SUIT_ID, COMMODITY_NUMBER, COMMODITY_UNIT_INCOMING,
      SALE_REBATE_RATE, DISTRI_REBACK_RATE, SRID, CONSUMPTION_RATE, PAY_TIME, FINISH_TIME,
      SETT_TIME, REFUND_NUMBER, SETT_AMOUNT, CONSUMPTION_AMOUNT, SALE_REBATE_AMOUNT,
      DISTRI_REBACK_AMOUNT, STATUS, REMARK)
    values (#seid:DECIMAL#, #spreadId:DECIMAL#, #consumerId:DECIMAL#, #recommenders:DECIMAL#,
      #orderCode:VARCHAR#, #orderItemId:DECIMAL#, #commoditySku:VARCHAR#, #suitId:DECIMAL#,
      #commodityNumber:DECIMAL#, #commodityUnitIncoming:DECIMAL#, #saleRebateRate:DECIMAL#,
      #distriRebackRate:DECIMAL#, #srid:DECIMAL#, #consumptionRate:DECIMAL#, #payTime#,
      #finishTime#, #settTime#, #refundNumber:DECIMAL#, #settAmount:DECIMAL#,
      #consumptionAmount:DECIMAL#, #saleRebateAmount:DECIMAL#, #distriRebackAmount:DECIMAL#,
      #status:DECIMAL#, #remark:VARCHAR#)
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="com.pltfm.app.vobject.SpreadEffect" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri May 08 11:38:02 CST 2015.
    -->
    <selectKey keyProperty="seid" resultClass="java.math.BigDecimal">
      SELECT SEQ_SPREAD_EFFECT_ID.NEXTVAL FROM DUAL
    </selectKey>
    insert into SPREAD_EFFECT
    <dynamic prepend="(" >
      <isNotNull prepend="," property="seid" >
        SEID
      </isNotNull>
      <isNotNull prepend="," property="spreadId" >
        SPREAD_ID
      </isNotNull>
      <isNotNull prepend="," property="consumerId" >
        CONSUMER_ID
      </isNotNull>
      <isNotNull prepend="," property="recommenders" >
        RECOMMENDERS
      </isNotNull>
      <isNotNull prepend="," property="orderCode" >
        ORDER_CODE
      </isNotNull>
      <isNotNull prepend="," property="orderItemId" >
        ORDER_ITEM_ID
      </isNotNull>
      <isNotNull prepend="," property="commoditySku" >
        COMMODITY_SKU
      </isNotNull>
      <isNotNull prepend="," property="suitId" >
        SUIT_ID
      </isNotNull>
      <isNotNull prepend="," property="commodityNumber" >
        COMMODITY_NUMBER
      </isNotNull>
      <isNotNull prepend="," property="commodityUnitIncoming" >
        COMMODITY_UNIT_INCOMING
      </isNotNull>
      <isNotNull prepend="," property="saleRebateRate" >
        SALE_REBATE_RATE
      </isNotNull>
      <isNotNull prepend="," property="distriRebackRate" >
        DISTRI_REBACK_RATE
      </isNotNull>
      <isNotNull prepend="," property="srid" >
        SRID
      </isNotNull>
      <isNotNull prepend="," property="consumptionRate" >
        CONSUMPTION_RATE
      </isNotNull>
      <isNotNull prepend="," property="payTime" >
        PAY_TIME
      </isNotNull>
      <isNotNull prepend="," property="finishTime" >
        FINISH_TIME
      </isNotNull>
      <isNotNull prepend="," property="settTime" >
        SETT_TIME
      </isNotNull>
      <isNotNull prepend="," property="refundNumber" >
        REFUND_NUMBER
      </isNotNull>
      <isNotNull prepend="," property="settAmount" >
        SETT_AMOUNT
      </isNotNull>
      <isNotNull prepend="," property="consumptionAmount" >
        CONSUMPTION_AMOUNT
      </isNotNull>
      <isNotNull prepend="," property="saleRebateAmount" >
        SALE_REBATE_AMOUNT
      </isNotNull>
      <isNotNull prepend="," property="distriRebackAmount" >
        DISTRI_REBACK_AMOUNT
      </isNotNull>
      <isNotNull prepend="," property="status" >
        STATUS
      </isNotNull>
      <isNotNull prepend="," property="remark" >
        REMARK
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="seid" >
        #seid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="spreadId" >
        #spreadId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="consumerId" >
        #consumerId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="recommenders" >
        #recommenders:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="orderCode" >
        #orderCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="orderItemId" >
        #orderItemId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="commoditySku" >
        #commoditySku:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="suitId" >
        #suitId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="commodityNumber" >
        #commodityNumber:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="commodityUnitIncoming" >
        #commodityUnitIncoming:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="saleRebateRate" >
        #saleRebateRate:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="distriRebackRate" >
        #distriRebackRate:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="srid" >
        #srid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="consumptionRate" >
        #consumptionRate:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="payTime" >
        #payTime#
      </isNotNull>
      <isNotNull prepend="," property="finishTime" >
        #finishTime#
      </isNotNull>
      <isNotNull prepend="," property="settTime" >
        #settTime#
      </isNotNull>
      <isNotNull prepend="," property="refundNumber" >
        #refundNumber:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="settAmount" >
        #settAmount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="consumptionAmount" >
        #consumptionAmount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="saleRebateAmount" >
        #saleRebateAmount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="distriRebackAmount" >
        #distriRebackAmount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="status" >
        #status:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="remark" >
        #remark:VARCHAR#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <select id="ibatorgenerated_countByExample" parameterClass="com.pltfm.app.vobject.SpreadEffectExample" resultClass="java.lang.Integer" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri May 08 11:38:02 CST 2015.
    -->
    select count(*) from SPREAD_EFFECT
    <include refid="SPREAD_EFFECT.ibatorgenerated_Example_Where_Clause" />
  </select>
  <update id="ibatorgenerated_updateByExampleSelective" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri May 08 11:38:02 CST 2015.
    -->
    update SPREAD_EFFECT
    <dynamic prepend="set" >
      <isNotNull prepend="," property="record.seid" >
        SEID = #record.seid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.spreadId" >
        SPREAD_ID = #record.spreadId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.consumerId" >
        CONSUMER_ID = #record.consumerId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.recommenders" >
        RECOMMENDERS = #record.recommenders:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.orderCode" >
        ORDER_CODE = #record.orderCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.orderItemId" >
        ORDER_ITEM_ID = #record.orderItemId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.commoditySku" >
        COMMODITY_SKU = #record.commoditySku:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.suitId" >
        SUIT_ID = #record.suitId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.commodityNumber" >
        COMMODITY_NUMBER = #record.commodityNumber:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.commodityUnitIncoming" >
        COMMODITY_UNIT_INCOMING = #record.commodityUnitIncoming:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.saleRebateRate" >
        SALE_REBATE_RATE = #record.saleRebateRate:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.distriRebackRate" >
        DISTRI_REBACK_RATE = #record.distriRebackRate:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.srid" >
        SRID = #record.srid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.consumptionRate" >
        CONSUMPTION_RATE = #record.consumptionRate:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.payTime" >
        PAY_TIME = #record.payTime#
      </isNotNull>
      <isNotNull prepend="," property="record.finishTime" >
        FINISH_TIME = #record.finishTime#
      </isNotNull>
      <isNotNull prepend="," property="record.settTime" >
        SETT_TIME = #record.settTime#
      </isNotNull>
      <isNotNull prepend="," property="record.refundNumber" >
        REFUND_NUMBER = #record.refundNumber:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.settAmount" >
        SETT_AMOUNT = #record.settAmount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.consumptionAmount" >
        CONSUMPTION_AMOUNT = #record.consumptionAmount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.saleRebateAmount" >
        SALE_REBATE_AMOUNT = #record.saleRebateAmount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.distriRebackAmount" >
        DISTRI_REBACK_AMOUNT = #record.distriRebackAmount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.status" >
        STATUS = #record.status:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.remark" >
        REMARK = #record.remark:VARCHAR#
      </isNotNull>
    </dynamic>
    <isParameterPresent >
      <include refid="SPREAD_EFFECT.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="ibatorgenerated_updateByExample" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri May 08 11:38:02 CST 2015.
    -->
    update SPREAD_EFFECT
    set SEID = #record.seid:DECIMAL#,
      SPREAD_ID = #record.spreadId:DECIMAL#,
      CONSUMER_ID = #record.consumerId:DECIMAL#,
      RECOMMENDERS = #record.recommenders:DECIMAL#,
      ORDER_CODE = #record.orderCode:VARCHAR#,
      ORDER_ITEM_ID = #record.orderItemId:DECIMAL#,
      COMMODITY_SKU = #record.commoditySku:VARCHAR#,
      SUIT_ID = #record.suitId:DECIMAL#,
      COMMODITY_NUMBER = #record.commodityNumber:DECIMAL#,
      COMMODITY_UNIT_INCOMING = #record.commodityUnitIncoming:DECIMAL#,
      SALE_REBATE_RATE = #record.saleRebateRate:DECIMAL#,
      DISTRI_REBACK_RATE = #record.distriRebackRate:DECIMAL#,
      SRID = #record.srid:DECIMAL#,
      CONSUMPTION_RATE = #record.consumptionRate:DECIMAL#,
      PAY_TIME = #record.payTime#,
      FINISH_TIME = #record.finishTime#,
      SETT_TIME = #record.settTime#,
      REFUND_NUMBER = #record.refundNumber:DECIMAL#,
      SETT_AMOUNT = #record.settAmount:DECIMAL#,
      CONSUMPTION_AMOUNT = #record.consumptionAmount:DECIMAL#,
      SALE_REBATE_AMOUNT = #record.saleRebateAmount:DECIMAL#,
      DISTRI_REBACK_AMOUNT = #record.distriRebackAmount:DECIMAL#,
      STATUS = #record.status:DECIMAL#,
      REMARK = #record.remark:VARCHAR#
    <isParameterPresent >
      <include refid="SPREAD_EFFECT.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  
  	<update id="updateSpreadOrder" parameterClass="com.pltfm.app.vobject.SpreadEffect" >
		update SPREAD_EFFECT se
		<dynamic prepend="set" >
	          <isNotNull prepend="," property="status" >
				        se.STATUS = #status:DECIMAL#
			  </isNotNull>
			  <isNotNull prepend="," property="finishTime" >
				        se.FINISH_TIME = #finishTime#
			 </isNotNull>
		 </dynamic>
		 <dynamic prepend="WHERE" >
			<isNotNull prepend="AND" property="orderCode" >
		        se.order_code = #orderCode:VARCHAR#
			    or exists
			 (select 1
			          from order_item oi
			         where se.commodity_sku = oi.commodity_sku
			           and exists (select 1
			                  from order_main om
			                 where oi.order_code = om.order_code
			                   and om.parent_order_code = se.order_code
			                   and om.order_code = #orderCode:VARCHAR#
			                   and om.parent_order_code is not null))
		      </isNotNull>
			<isNotEqual  property="status" compareValue="2">
		    <![CDATA[and STATUS <> 1]]>
			</isNotEqual>
			<isNotEqual  property="status" compareValue="0">
		    <![CDATA[and STATUS <> 5]]>
		    </isNotEqual>
	 </dynamic>
  	</update>
  
  
  
  
  
  <update id="ibatorgenerated_updateByPrimaryKeySelective" parameterClass="com.pltfm.app.vobject.SpreadEffect" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri May 08 11:38:02 CST 2015.
    -->
    update SPREAD_EFFECT
    <dynamic prepend="set" >
      <isNotNull prepend="," property="spreadId" >
        SPREAD_ID = #spreadId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="consumerId" >
        CONSUMER_ID = #consumerId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="recommenders" >
        RECOMMENDERS = #recommenders:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="orderCode" >
        ORDER_CODE = #orderCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="orderItemId" >
        ORDER_ITEM_ID = #orderItemId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="commoditySku" >
        COMMODITY_SKU = #commoditySku:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="suitId" >
        SUIT_ID = #suitId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="commodityNumber" >
        COMMODITY_NUMBER = #commodityNumber:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="commodityUnitIncoming" >
        COMMODITY_UNIT_INCOMING = #commodityUnitIncoming:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="saleRebateRate" >
        SALE_REBATE_RATE = #saleRebateRate:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="distriRebackRate" >
        DISTRI_REBACK_RATE = #distriRebackRate:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="srid" >
        SRID = #srid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="consumptionRate" >
        CONSUMPTION_RATE = #consumptionRate:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="payTime" >
        PAY_TIME = #payTime#
      </isNotNull>
      <isNotNull prepend="," property="finishTime" >
        FINISH_TIME = #finishTime#
      </isNotNull>
      <isNotNull prepend="," property="settTime" >
        SETT_TIME = #settTime#
      </isNotNull>
      <isNotNull prepend="," property="refundNumber" >
        REFUND_NUMBER = #refundNumber:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="settAmount" >
        SETT_AMOUNT = #settAmount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="consumptionAmount" >
        CONSUMPTION_AMOUNT = #consumptionAmount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="saleRebateAmount" >
        SALE_REBATE_AMOUNT = #saleRebateAmount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="distriRebackAmount" >
        DISTRI_REBACK_AMOUNT = #distriRebackAmount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="status" >
        STATUS = #status:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="remark" >
        REMARK = #remark:VARCHAR#
      </isNotNull>
    </dynamic>
    where SEID = #seid:DECIMAL#
  </update>
  <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="com.pltfm.app.vobject.SpreadEffect" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri May 08 11:38:02 CST 2015.
    -->
     update SPREAD_EFFECT
    <dynamic prepend="set" >
      <isNotNull prepend="," property="spreadId" >
        SPREAD_ID = #spreadId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="consumerId" >
        CONSUMER_ID = #consumerId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="recommenders" >
        RECOMMENDERS = #recommenders:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="orderCode" >
        ORDER_CODE = #orderCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="orderItemId" >
        ORDER_ITEM_ID = #orderItemId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="commoditySku" >
        COMMODITY_SKU = #commoditySku:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="suitId" >
        SUIT_ID = #suitId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="commodityNumber" >
        COMMODITY_NUMBER = #commodityNumber:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="commodityUnitIncoming" >
        COMMODITY_UNIT_INCOMING = #commodityUnitIncoming:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="saleRebateRate" >
        SALE_REBATE_RATE = #saleRebateRate:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="distriRebackRate" >
        DISTRI_REBACK_RATE = #distriRebackRate:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="srid" >
        SRID = #srid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="consumptionRate" >
        CONSUMPTION_RATE = #consumptionRate:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="payTime" >
        PAY_TIME = #payTime#
      </isNotNull>
      <isNotNull prepend="," property="finishTime" >
        FINISH_TIME = #finishTime#
      </isNotNull>
      <isNotNull prepend="," property="settTime" >
        SETT_TIME = #settTime#
      </isNotNull>
      <isNotNull prepend="," property="refundNumber" >
        REFUND_NUMBER = #refundNumber:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="settAmount" >
        SETT_AMOUNT = #settAmount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="consumptionAmount" >
        CONSUMPTION_AMOUNT = #consumptionAmount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="saleRebateAmount" >
        SALE_REBATE_AMOUNT = #saleRebateAmount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="distriRebackAmount" >
        DISTRI_REBACK_AMOUNT = #distriRebackAmount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="status" >
        STATUS = #status:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="remark" >
        REMARK = #remark:VARCHAR#
      </isNotNull>
    </dynamic>
    where SEID = #seid:DECIMAL#
  </update>   
    <select id="selectSpeadEffect"   parameterClass="java.util.Map" resultClass="com.pltfm.app.vobject.SpreadEffect" >
		select nvl(cp.enable_reback_rate, 0) saleRebateAmount,
		       nvl(cp.distri_reback_rate, 0) distriRebackAmount,
		       nvl( cp.CONSUME_REBACK_RATE, 0) consumptionRate
		  from  CLOUD_PRODUCT cp where 
		  cp.cpid =#cpId:DECIMAL#
         and ((cp.END_TIME IS NULL AND cp.START_TIME&lt;=SYSDATE)  OR (cp.START_TIME&lt;SYSDATE AND cp.END_TIME&gt;SYSDATE)) 
			 
  </select>
  <select id="getSpreandRecommenders"   parameterClass="java.util.Map" resultClass="com.pltfm.app.vobject.SpreadEffect" >
			   select t.recommenders recommenders 
			          from  
			          spreader_info  t 
			        where  t.sid=#srid:DECIMAL#
  </select>
  <select id="querySpreadEffectListByMap" parameterClass="java.util.Map" resultClass="com.pltfm.app.vobject.SpreadEffect">
    SELECT SUM(SE.SALE_REBATE_AMOUNT) saleRebateAmount,SUM(SE.DISTRI_REBACK_AMOUNT) distriRebackAmount, 
    SE.SETT_TIME settTime,SUM(SE.COMMODITY_NUMBER) commodityNumber FROM SPREAD_EFFECT SE 
    <dynamic prepend="WHERE" >
      <isNotNull prepend="AND" property="spreadId" >
        SE.SPREAD_ID=#spreadId#
      </isNotNull>
       <isNotNull prepend="AND" property="consumerId" >
       SE.CONSUMER_ID=#consumerId#
      </isNotNull>
      <isNotNull prepend="AND" property="recommenders" >
       SE.RECOMMENDERS=#recommenders#
      </isNotNull>
      <isNotNull prepend="AND" property="status" >
       SE.STATUS = #status# 
      </isNotNull>
      <isNotNull prepend="AND" property="settTime" >
       SE.SETT_TIME &lt;= #settTime:DATE#
      </isNotNull>
      <isNotNull prepend="AND" property="settTime2" >
       SE.SETT_TIME &gt;= #settTime2:DATE#
      </isNotNull>
      
      <isNotNull prepend="AND" property="finishTime" >
       SE.FINISH_TIME &lt;= #finishTime:DATE#
      </isNotNull>
      <isNotNull prepend="AND" property="finishTime2" >
       SE.FINISH_TIME &gt;= #finishTime2:DATE#
      </isNotNull>
    </dynamic>
    GROUP BY SE.SETT_TIME
  </select>
    <select id="getOrderSprenand" parameterClass="java.util.Map" resultClass="com.pltfm.app.vobject.SpreadEffect">
		  select 
		   t.seid seid,
		   t.spread_id  spreadId,
		   t.consumer_id consumerId ,
		   t.recommenders recommenders,
		   t.order_code orderCode ,
		   t.commodity_sku commoditySku,
		   t.srid srid ,
		   t.commodity_unit_incoming commodityUnitIncoming,
		   t.commodity_number  commodityNumber,
		   t.sale_rebate_rate saleRebateRate,
           t.distri_reback_rate distriRebackRate,
           t.CONSUMPTION_RATE consumptionRate
		   from spread_effect  t
		    <dynamic prepend="WHERE" >
		      <isNotNull prepend="AND" property="orderCode" >
		         t.ORDER_CODE=#orderCode#
		      </isNotNull>
		    </dynamic>
  </select>
  
	<!-- 定时任务查询推广效果 -->
	<select id="SQL_QUERY_SPREAD_EFFECT_FOR_JOB" resultMap="SPREAD_EFFECT_RESULT_FOR_JOB">
	<![CDATA[
		select se.seid,
		       nvl2(se.spread_id,
		            nvl((select si.login_id
		                  from   spreader_info si
		                 where si.sid = se.spread_id),
		                0),
		            0) spread_id,
		       se.consumer_id,
		       nvl2(se.recommenders,
		            nvl((select si.login_id
		                  from   spreader_info si
		                 where si.sid = se.recommenders),
		                0),
		            0) recommenders,
		       se.order_code,
		       se.order_item_id,
		       (select nvl(sum(oa.alter_num), 0)
		          from order_alter oa
		         where oa.alter_type <> 2
		           and oa.propose_status > 1
		           and exists
		         (select 1
		                  from order_item oi
		                 where oi.commodity_sku = se.commodity_sku
		                   and oa.order_item_id = oi.order_item_id
		                   and oi.commodity_type not in (4,5,6) 
		                   and exists
		                 (select 1
		                          from order_main om
		                         where oi.order_code = om.order_code
		                           and (om.order_code = se.order_code or
		                               om.parent_order_code = se.order_code)))) refund_number,
		       se.commodity_number,
		       se.commodity_unit_incoming,
		       nvl(se.consumption_rate, 0) consumption_rate,
		       nvl(se.distri_reback_rate, 0) distri_reback_rate,
		       nvl(se.sale_rebate_rate, 0) sale_rebate_rate
		  from spread_effect se
		 where se.status = 3
		   and exists (select 1
		          from order_main om
		         where (om.order_code = se.order_code or
		               om.parent_order_code = se.order_code)
		           and om.finish_date < sysdate - #settDate:DECIMAL#)
		   and rownum < 1000
	]]>		           
	</select>
	
	<!-- 结算推广效果 -->
	<update id="SQL_UPDATE_SETT_SPREAD_EFFECT_FOR_JOB" parameterClass="com.pltfm.app.vobject.SpreadEffect">
		update spread_effect se
		   set se.status            = 4,
		       refund_number        = #refundNumber:DECIMAL#,
		<isNotEmpty property="settAmount">		       
		       sett_amount          = #settAmount:DECIMAL#,
		</isNotEmpty>		    
		<isNotEmpty property="consumptionAmount">   
		       consumption_amount   = #consumptionAmount:DECIMAL#,
		</isNotEmpty>		    
		<isNotEmpty property="saleRebateAmount">		       
		       sale_rebate_amount   = #saleRebateAmount:DECIMAL#,
		</isNotEmpty>		    
		<isNotEmpty property="distriRebackAmount">		       
		       distri_reback_amount = #distriRebackAmount:DECIMAL#,
		</isNotEmpty>		    		       
		       sett_time            = sysdate
		 where se.status = 3
		   and se.seid = #seid:DECIMAL#
	</update>
	
	<!-- 取消结算推广效果 -->
	<update id="SQL_UPDATE_CANCEL_SETT_SPREAD_EFFECT_FOR_JOB" parameterClass="java.lang.Long">
		update spread_effect se
		   set se.status            = 3,
		       sett_time            = null
		 where se.seid = #seid:DECIMAL#
	</update>
	
	<!-- 查询全局推广规则 -->
	<select id="SQL_QUERY_SETTLE_WAIT_DAY" resultClass="java.lang.Integer">
	<![CDATA[
		select sr.amount_settle_wait_day from  spread_rules sr where rownum = 1
	]]>		 
	</select>
</sqlMap>