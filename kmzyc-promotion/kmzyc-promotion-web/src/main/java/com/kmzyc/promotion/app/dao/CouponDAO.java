package com.kmzyc.promotion.app.dao;

import java.math.BigDecimal;
import java.sql.SQLException;
import java.util.List;
import java.util.Map;

import com.kmzyc.commons.page.Page;
import com.kmzyc.promotion.app.vobject.Coupon;
import com.kmzyc.promotion.app.vobject.CouponExample;
import com.kmzyc.promotion.app.vobject.CouponGrant;

@SuppressWarnings("unchecked")
public interface CouponDAO {


    /**
     * 分页查询规则
     * 
     * @author lijianjun
     * @param coupon
     * @return
     * @throws SQLException
     */
    List<Coupon> selectByCondition(Coupon coupon) throws SQLException;

    /**
     * 获取规则总数
     * 
     * @param coupon
     * @return
     * @throws SQLException
     */
    int selectCountByCondition(Coupon coupon) throws SQLException;

    /**
     * 添加优惠券规则
     * 
     * @param coupon
     * @throws SQLException
     */
    int insertRule(Coupon coupon) throws SQLException;

    /**
     * 查询优惠券规则
     * 
     * @param coupon
     * @return
     * @throws SQLException
     */
    Coupon selectCoupon(Coupon coupon) throws SQLException;

    /**
     * 修改优惠券规则
     * 
     * @param coupon
     * @return
     * @throws SQLException
     */
    int updateCoupon(Coupon coupon) throws SQLException;

    /**
     * This method was generated by Apache iBATIS ibator. This method corresponds to the database
     * table COUPON
     * 
     * @ibatorgenerated Thu Aug 22 09:31:11 CST 2013
     */
    int countByExample(CouponExample example) throws SQLException;

    /**
     * This method was generated by Apache iBATIS ibator. This method corresponds to the database
     * table COUPON
     * 
     * @ibatorgenerated Thu Aug 22 09:31:11 CST 2013
     */
    int deleteByExample(CouponExample example) throws SQLException;

    /**
     * This method was generated by Apache iBATIS ibator. This method corresponds to the database
     * table COUPON
     * 
     * @ibatorgenerated Thu Aug 22 09:31:11 CST 2013
     */
    int deleteByPrimaryKey(BigDecimal couponId) throws SQLException;

    /**
     * This method was generated by Apache iBATIS ibator. This method corresponds to the database
     * table COUPON
     * 
     * @ibatorgenerated Thu Aug 22 09:31:11 CST 2013
     */
    void insert(Coupon record) throws SQLException;

    /**
     * This method was generated by Apache iBATIS ibator. This method corresponds to the database
     * table COUPON
     * 
     * @ibatorgenerated Thu Aug 22 09:31:11 CST 2013
     */
    Integer insertSelective(Coupon record) throws SQLException;

    /**
     * This method was generated by Apache iBATIS ibator. This method corresponds to the database
     * table COUPON
     * 
     * @ibatorgenerated Thu Aug 22 09:31:11 CST 2013
     */
    List selectByExample(CouponExample example) throws SQLException;

    /**
     * This method was generated by Apache iBATIS ibator. This method corresponds to the database
     * table COUPON
     * 
     * @ibatorgenerated Thu Aug 22 09:31:11 CST 2013
     */
    Coupon selectByPrimaryKey(Long couponId) throws SQLException;

    /**
     * This method was generated by Apache iBATIS ibator. This method corresponds to the database
     * table COUPON
     * 
     * @ibatorgenerated Thu Aug 22 09:31:11 CST 2013
     */
    int updateByExampleSelective(Coupon record, CouponExample example) throws SQLException;

    /**
     * This method was generated by Apache iBATIS ibator. This method corresponds to the database
     * table COUPON
     * 
     * @ibatorgenerated Thu Aug 22 09:31:11 CST 2013
     */
    int updateByExample(Coupon record, CouponExample example) throws SQLException;

    /**
     * This method was generated by Apache iBATIS ibator. This method corresponds to the database
     * table COUPON
     * 
     * @ibatorgenerated Thu Aug 22 09:31:11 CST 2013
     */
    int updateByPrimaryKeySelective(Coupon record) throws SQLException;

    /**
     * This method was generated by Apache iBATIS ibator. This method corresponds to the database
     * table COUPON
     * 
     * @ibatorgenerated Thu Aug 22 09:31:11 CST 2013
     */
    int updateByPrimaryKey(Coupon record) throws SQLException;

    /**
     * 获取优惠券信息列表
     * 
     * @param page 分页对象
     * @param sections 优惠券信息实体
     * @return 优惠券
     * @throws SQLException SQL异常
     */
    public Page selectPageByVo(Page page, Coupon vo) throws SQLException;

    /**
     * 已系统时间判定优惠券的有效性，全部注册规则的
     */
    public List<Coupon> selectRegistCoupon(Long couponGivetypeId) throws SQLException;

    /**
     * 已系统时间判定优惠券的有效性，全部订单规则的
     */
    public List<Coupon> selectOrderCoupon() throws SQLException;

    /**
     * 
     * 根据couponId ,修改couponStatus
     */
    public void updateCouponStatus(Coupon coupon) throws SQLException;

    /**
     * 根据couponId,删除一条coupon
     * 
     * @param coupon
     * @throws SQLException
     */

    public void delCouponById(Coupon coupon) throws SQLException;

    /**
     * 判断这条优惠券是否过期
     * 
     * @param coupons
     * @return
     * @throws SQLException
     */
    public boolean couponIsOutDate(Coupon coupons) throws SQLException;

    /**
     * 查找表中优惠券（除积分类型的）过期的优惠券规则
     */
    public List<Coupon> selectExpiredCoupon() throws SQLException;

    /**
     * 根据传入的订单的SKUCODE，loginID 查询符合条件的优惠券规则
     */
    public List<CouponGrant> selectCanUseCoupon(String loginId) throws SQLException;

    /**
     * 
     */
    public int updateValide(Coupon coupon) throws SQLException;

    /**
     * 激活礼品券
     * 
     * @param couponId
     * @param customerId
     * @return
     * @throws SQLException
     */
    public int activateGiftcoupon(Long couponGrantId, String customerId) throws SQLException;

    BigDecimal getcouponMoneyByCouponId(Long couponId) throws SQLException;

    Coupon getCouponByCouponId(Long couponId) throws SQLException;

    /**
     * 优惠券名称重复问题验证
     * 
     * @param map
     * @return
     * @throws SQLException
     */
    List<Coupon> selectCouponName(Map map) throws SQLException;



    /**
     * 查询有效优惠券规则
     * 
     * @param coupon
     * @return
     * @throws SQLException
     */
    List<Coupon> selectEffectiveCoupon(Coupon coupon) throws SQLException;

    /**
     * 查询
     * 
     * @param couponId
     * @return
     * @throws SQLException
     */
    public Coupon selectCouponByPrimaryKey(Long couponId) throws SQLException;

}
