<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="SYS_MENU" >
  <resultMap id="ibatorgenerated_BaseResultMap" class="com.pltfm.sys.model.SysMenu" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 25 22:18:12 CST 2011.
    -->
    <result column="MENU_ID" property="menuId" jdbcType="INTEGER" />
    <result column="MENU_UPID" property="menuUpid" jdbcType="INTEGER" />
    <result column="MENU_NAME" property="menuName" jdbcType="VARCHAR" />
    <result column="MENU_LINK" property="menuLink" jdbcType="VARCHAR" />
    <result column="MENU_LV" property="menuLv" jdbcType="VARCHAR" />
    <result column="MENU_ST" property="menuSt" jdbcType="VARCHAR" />
    <result column="MENU_IMG" property="menuImg" jdbcType="VARCHAR" />
    <result column="MENU_REMARK" property="menuRemark" jdbcType="VARCHAR" />
    <result column="SORTNO" property="sortno" jdbcType="VARCHAR" />
    <result column="IS_ENABLE" property="isEnable" jdbcType="CHAR" />
    <result column="CREATE_DATE" property="createDate" jdbcType="DATE" />
    <result column="CREATE_USER" property="createUser" jdbcType="INTEGER" />
    <result column="UPDATE_DATE" property="updateDate" jdbcType="DATE" />
    <result column="UPDATE_USER" property="updateUser" jdbcType="INTEGER" />
  </resultMap>
  <sql id="ibatorgenerated_Example_Where_Clause" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 25 22:18:12 CST 2011.
    -->
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate" >
      <isEqual property="oredCriteria[].valid" compareValue="true" >
        (
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and" >
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and" >
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and" >
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction="," >
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and" >
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  <select id="ibatorgenerated_selectByExample" resultMap="ibatorgenerated_BaseResultMap" parameterClass="com.pltfm.sys.model.SysMenuExample" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 25 22:18:12 CST 2011.
    -->
    select MENU_ID, MENU_UPID, MENU_NAME, MENU_LINK, MENU_LV, MENU_ST, MENU_IMG, MENU_REMARK,
      SORTNO, IS_ENABLE, CREATE_DATE, CREATE_USER, UPDATE_DATE, UPDATE_USER
    from SYS_MENU
    <isParameterPresent >
      <include refid="SYS_MENU.ibatorgenerated_Example_Where_Clause" />
      <isNotNull property="orderByClause" >
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <select id="ibatorgenerated_selectByPrimaryKey" resultMap="ibatorgenerated_BaseResultMap" parameterClass="com.pltfm.sys.model.SysMenu" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 25 22:18:12 CST 2011.
    -->
    select MENU_ID, MENU_UPID, MENU_NAME, MENU_LINK, MENU_LV, MENU_ST, MENU_IMG, MENU_REMARK,
      SORTNO, IS_ENABLE, CREATE_DATE, CREATE_USER, UPDATE_DATE, UPDATE_USER
    from SYS_MENU
    where MENU_ID = #menuId:INTEGER#
  </select>
  <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="com.pltfm.sys.model.SysMenu" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 25 22:18:12 CST 2011.
    -->
    delete from SYS_MENU
    where MENU_ID = #menuId:INTEGER#
  </delete>
  <delete id="ibatorgenerated_deleteByExample" parameterClass="com.pltfm.sys.model.SysMenuExample" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 25 22:18:12 CST 2011.
    -->
    delete from SYS_MENU
    <include refid="SYS_MENU.ibatorgenerated_Example_Where_Clause" />
  </delete>
  <insert id="ibatorgenerated_insert" parameterClass="com.pltfm.sys.model.SysMenu" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 25 22:18:12 CST 2011.
    -->
    <selectKey resultClass="java.lang.Integer" keyProperty="menuId" >
      select seq_SYS_MENU.nextval from dual
    </selectKey>
    insert into SYS_MENU (MENU_ID, MENU_UPID, MENU_NAME, MENU_LINK, MENU_LV, MENU_ST, MENU_IMG,
      MENU_REMARK, SORTNO, IS_ENABLE, CREATE_DATE, CREATE_USER, UPDATE_DATE, UPDATE_USER)
    values (#menuId:INTEGER#, #menuUpid:INTEGER#, #menuName:VARCHAR#, #menuLink:VARCHAR#,
      #menuLv:VARCHAR#, #menuSt:VARCHAR#, #menuImg:VARCHAR#, #menuRemark:VARCHAR#, #sortno:VARCHAR#,
      #isEnable:CHAR#, #createDate:DATE#, #createUser:INTEGER#, #updateDate:DATE#,
      #updateUser:INTEGER#)
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="com.pltfm.sys.model.SysMenu" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 25 22:18:12 CST 2011.
    -->
    <selectKey resultClass="java.lang.Integer" keyProperty="menuId" >
      select seq_SYS_MENU.nextval from dual
    </selectKey>
    insert into SYS_MENU
    <dynamic prepend="(" >
      <isNotNull prepend="," property="menuId" >
        MENU_ID
      </isNotNull>
      <isNotNull prepend="," property="menuUpid" >
        MENU_UPID
      </isNotNull>
      <isNotNull prepend="," property="menuName" >
        MENU_NAME
      </isNotNull>
      <isNotNull prepend="," property="menuLink" >
        MENU_LINK
      </isNotNull>
      <isNotNull prepend="," property="menuLv" >
        MENU_LV
      </isNotNull>
      <isNotNull prepend="," property="menuSt" >
        MENU_ST
      </isNotNull>
      <isNotNull prepend="," property="menuImg" >
        MENU_IMG
      </isNotNull>
      <isNotNull prepend="," property="menuRemark" >
        MENU_REMARK
      </isNotNull>
      <isNotNull prepend="," property="sortno" >
        SORTNO
      </isNotNull>
      <isNotNull prepend="," property="isEnable" >
        IS_ENABLE
      </isNotNull>
      <isNotNull prepend="," property="createDate" >
        CREATE_DATE
      </isNotNull>
      <isNotNull prepend="," property="createUser" >
        CREATE_USER
      </isNotNull>
      <isNotNull prepend="," property="updateDate" >
        UPDATE_DATE
      </isNotNull>
      <isNotNull prepend="," property="updateUser" >
        UPDATE_USER
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="menuId" >
        #menuId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="menuUpid" >
        #menuUpid:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="menuName" >
        #menuName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="menuLink" >
        #menuLink:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="menuLv" >
        #menuLv:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="menuSt" >
        #menuSt:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="menuImg" >
        #menuImg:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="menuRemark" >
        #menuRemark:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sortno" >
        #sortno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="isEnable" >
        #isEnable:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="createDate" >
        #createDate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="createUser" >
        #createUser:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="updateDate" >
        #updateDate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="updateUser" >
        #updateUser:INTEGER#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <select id="ibatorgenerated_countByExample" parameterClass="com.pltfm.sys.model.SysMenuExample" resultClass="java.lang.Integer" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 25 22:18:12 CST 2011.
    -->
    select count(*) from SYS_MENU
    <include refid="SYS_MENU.ibatorgenerated_Example_Where_Clause" />
  </select>
  <update id="ibatorgenerated_updateByExampleSelective" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 25 22:18:12 CST 2011.
    -->
    update SYS_MENU
    <dynamic prepend="set" >
      <isNotNull prepend="," property="record.menuId" >
        MENU_ID = #record.menuId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="record.menuUpid" >
        MENU_UPID = #record.menuUpid:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="record.menuName" >
        MENU_NAME = #record.menuName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.menuLink" >
        MENU_LINK = #record.menuLink:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.menuLv" >
        MENU_LV = #record.menuLv:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.menuSt" >
        MENU_ST = #record.menuSt:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.menuImg" >
        MENU_IMG = #record.menuImg:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.menuRemark" >
        MENU_REMARK = #record.menuRemark:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.sortno" >
        SORTNO = #record.sortno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.isEnable" >
        IS_ENABLE = #record.isEnable:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.createDate" >
        CREATE_DATE = #record.createDate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="record.createUser" >
        CREATE_USER = #record.createUser:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="record.updateDate" >
        UPDATE_DATE = #record.updateDate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="record.updateUser" >
        UPDATE_USER = #record.updateUser:INTEGER#
      </isNotNull>
    </dynamic>
    <isParameterPresent >
      <include refid="SYS_MENU.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="ibatorgenerated_updateByExample" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 25 22:18:12 CST 2011.
    -->
    update SYS_MENU
    set MENU_ID = #record.menuId:INTEGER#,
      MENU_UPID = #record.menuUpid:INTEGER#,
      MENU_NAME = #record.menuName:VARCHAR#,
      MENU_LINK = #record.menuLink:VARCHAR#,
      MENU_LV = #record.menuLv:VARCHAR#,
      MENU_ST = #record.menuSt:VARCHAR#,
      MENU_IMG = #record.menuImg:VARCHAR#,
      MENU_REMARK = #record.menuRemark:VARCHAR#,
      SORTNO = #record.sortno:VARCHAR#,
      IS_ENABLE = #record.isEnable:CHAR#,
      CREATE_DATE = #record.createDate:DATE#,
      CREATE_USER = #record.createUser:INTEGER#,
      UPDATE_DATE = #record.updateDate:DATE#,
      UPDATE_USER = #record.updateUser:INTEGER#
    <isParameterPresent >
      <include refid="SYS_MENU.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="ibatorgenerated_updateByPrimaryKeySelective" parameterClass="com.pltfm.sys.model.SysMenu" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 25 22:18:12 CST 2011.
    -->
    update SYS_MENU
    <dynamic prepend="set" >
      <isNotNull prepend="," property="menuUpid" >
        MENU_UPID = #menuUpid:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="menuName" >
        MENU_NAME = #menuName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="menuLink" >
        MENU_LINK = #menuLink:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="menuLv" >
        MENU_LV = #menuLv:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="menuSt" >
        MENU_ST = #menuSt:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="menuImg" >
        MENU_IMG = #menuImg:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="menuRemark" >
        MENU_REMARK = #menuRemark:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sortno" >
        SORTNO = #sortno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="isEnable" >
        IS_ENABLE = #isEnable:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="createDate" >
        CREATE_DATE = #createDate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="createUser" >
        CREATE_USER = #createUser:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="updateDate" >
        UPDATE_DATE = #updateDate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="updateUser" >
        UPDATE_USER = #updateUser:INTEGER#
      </isNotNull>
    </dynamic>
    where MENU_ID = #menuId:INTEGER#
  </update>
  <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="com.pltfm.sys.model.SysMenu" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 25 22:18:12 CST 2011.
    -->
    update SYS_MENU
    set MENU_UPID = #menuUpid:INTEGER#,
      MENU_NAME = #menuName:VARCHAR#,
      MENU_LINK = #menuLink:VARCHAR#,
      MENU_LV = #menuLv:VARCHAR#,
      MENU_ST = #menuSt:VARCHAR#,
      MENU_IMG = #menuImg:VARCHAR#,
      MENU_REMARK = #menuRemark:VARCHAR#,
      SORTNO = #sortno:VARCHAR#,
      IS_ENABLE = #isEnable:CHAR#,
      CREATE_DATE = #createDate:DATE#,
      CREATE_USER = #createUser:INTEGER#,
      UPDATE_DATE = #updateDate:DATE#,
      UPDATE_USER = #updateUser:INTEGER#
    where MENU_ID = #menuId:INTEGER#
  </update>




  <!-- **************** get up menulist by userId  ****************  -->
  <select id="selectUpMenuListByUser" parameterClass="com.pltfm.sys.model.SysUser" resultMap="ibatorgenerated_BaseResultMap">
    select distinct e.menu_id, e.menu_upid, e.menu_name, e.menu_link, e.menu_lv, e.is_enable, e.create_date, e.create_user, e.update_user ,e.update_date, e.menu_st, e.menu_img, e.menu_remark, e.sortno
    from sys_user a, sys_user_role b, sys_role c, sys_role_menu d, sys_menu e
	where  a.user_id = b.user_id   and   b.role_id = c.role_id   and   c.role_id = d.role_id    and   d.menu_id = e.menu_id    
	       and  e.menu_lv = '1'  and   a.user_id = #userId:INTEGER#  and e.is_enable = '1'
	       order by e.sortno asc
  </select>


  <!-- **************** get sub menuList by upMenuId and userId  ****************  -->
  <select id="selectSubMenuList" parameterClass="com.pltfm.sys.model.SysUser" resultMap="ibatorgenerated_BaseResultMap">
    select distinct e.menu_id, e.menu_upid, e.menu_name, e.menu_link, e.menu_lv, e.is_enable , e.create_date , e.create_user ,e.update_date , e.update_user , e.menu_st, e.menu_img, e.menu_remark, e.sortno
    from sys_user a, sys_user_role b, sys_role c, sys_role_menu d, sys_menu e
	where  a.user_id = b.user_id   and   b.role_id = c.role_id   and   c.role_id = d.role_id    and   d.menu_id = e.menu_id    
	       and   a.user_id = #userId:INTEGER#    and    e.menu_upid = #headMenuId:VARCHAR# and e.is_enable = '1'
    order by e.sortno asc
  </select>


</sqlMap>