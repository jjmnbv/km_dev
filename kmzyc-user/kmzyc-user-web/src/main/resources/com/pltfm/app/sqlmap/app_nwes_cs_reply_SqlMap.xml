<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="NWES_CS_REPLY" >
  <resultMap id="ibatorgenerated_BaseResultMap" class="com.pltfm.app.vobject.NwesCsReply" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Aug 02 16:04:44 CST 2013.
    -->
    <result column="REPLY_ID" property="replyId" jdbcType="DECIMAL" />
    <result column="CUSTOMER_SURVEY_ID" property="customerSurveyId" jdbcType="DECIMAL" />
    <result column="REPLY_CONTENT" property="replyContent" jdbcType="VARCHAR" />
    <result column="REPLY_RDATE" property="replyRdate" jdbcType="DATE" />
    <result column="REPLY_PAREN" property="replyParen" jdbcType="DECIMAL" />
  </resultMap>
  
  <resultMap id="ibatorgenerated_CountResult" class="com.pltfm.sys.model.SysModelUtil">
    <result column="the_count" property="theCount" jdbcType="DECIMAL" />
  </resultMap>
     <!-- 回复主键查询信息 -->
  <select id="ibatorgenerated_selectByPrimaryKey" resultMap="ibatorgenerated_BaseResultMap" parameterClass="java.lang.Integer" >
    select REPLY_ID, CUSTOMER_SURVEY_ID, REPLY_CONTENT, REPLY_RDATE, REPLY_PAREN
    from NWES_CS_REPLY
    where REPLY_ID = #customerSurveyId:DECIMAL#
  </select>
   <!-- 回复服务外键查询信息 -->
  <select id="ibatorgenerated_getCustomerSurveyId" resultMap="ibatorgenerated_BaseResultMap" parameterClass="java.lang.Integer" >
    select REPLY_ID, CUSTOMER_SURVEY_ID, REPLY_CONTENT, REPLY_RDATE, REPLY_PAREN
    from NWES_CS_REPLY
    where CUSTOMER_SURVEY_ID = #customerSurveyId:DECIMAL#
  </select>
    <!-- 回复服务外键查询信息 总记录-->
  <select id="ibatorgenerated_getCount" resultMap="ibatorgenerated_CountResult" parameterClass="java.lang.Integer" >
		select count(1) the_count from NWES_CS_REPLY
        where CUSTOMER_SURVEY_ID = #customerSurveyId:DECIMAL#
  </select>
    <!-- 回复主键删除信息 -->
  <delete id="ibatorgenerated_delete" parameterClass="com.pltfm.app.vobject.NwesCsReply" >
    delete from NWES_CS_REPLY
    where REPLY_ID = #replyId:DECIMAL#
  </delete>
     <!-- 回复服务外键删除信息 -->
  <delete id="ibatorgenerated_deleteCustomerSurveyId"  parameterClass="java.lang.Integer" >
    delete from NWES_CS_REPLY
    where CUSTOMER_SURVEY_ID = #customerSurveyId:DECIMAL#
  </delete>
 
   <!-- 添加回复信息 -->
  <insert id="ibatorgenerated_insert" parameterClass="com.pltfm.app.vobject.NwesCsReply" >
   <selectKey resultClass="java.lang.Integer" keyProperty="replyId" >
           select seq_app_account.nextval from dual
      </selectKey>
    insert into NWES_CS_REPLY
    <dynamic prepend="(" >
      <isNotNull prepend="," property="replyId" >
        REPLY_ID
      </isNotNull>
      <isNotNull prepend="," property="customerSurveyId" >
        CUSTOMER_SURVEY_ID
      </isNotNull>
      <isNotNull prepend="," property="replyContent" >
        REPLY_CONTENT
      </isNotNull>
      <isNotNull prepend="," property="replyRdate" >
        REPLY_RDATE
      </isNotNull>
      <isNotNull prepend="," property="replyParen" >
        REPLY_PAREN
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="replyId" >
        #replyId:DECIMAL#
      </isNotNull>
        
      <isNotNull prepend="," property="customerSurveyId" >
        #customerSurveyId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="replyContent" >
        #replyContent:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="replyRdate" >
        #replyRdate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="replyParen" >
        #replyParen:DECIMAL#
      </isNotNull>
      )
    </dynamic>
  </insert>
   <!-- 修改回复信息 -->
  <update id="ibatorgenerated_update" parameterClass="com.pltfm.app.vobject.NwesCsReply" >
    update NWES_CS_REPLY
    <dynamic prepend="set" >
      <isNotNull prepend="," property="customerSurveyId" >
        CUSTOMER_SURVEY_ID = #customerSurveyId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="replyContent" >
        REPLY_CONTENT = #replyContent:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="replyRdate" >
        REPLY_RDATE = #replyRdate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="replyParen" >
        REPLY_PAREN = #replyParen:DECIMAL#
      </isNotNull>
    </dynamic>
    where REPLY_ID = #replyId:DECIMAL#
  </update>
  
   <!-- 分页 -->
	<!--  ****************  search page by vo  ****************  -->
	<select id="searchPageByVo" resultMap="ibatorgenerated_BaseResultMap"
		parameterClass="com.pltfm.app.vobject.NwesCsReply">
		 select REPLY_ID,LOGIN_ID, CUSTOMER_SURVEY_ID, REPLY_CONTENT, REPLY_RDATE, REPLY_PAREN  FROM (
       select  ROW_NUMBER() OVER(order by REPLY_ID desc) as view_row_number, 
       tt.* from NWES_CUSTOM_SERVICE tt
       where  tt.CUSTOMER_SURVEY_ID = #customerSurveyId:DECIMAL#
			
		)
    <![CDATA[ where view_row_number <= #max# and view_row_number > #skip# ]]>
	</select>

	<!--
		**************** search user's roleList by vo ****************
	-->
	<select id="selectCountByVo" parameterClass="com.pltfm.app.vobject.NwesCsReply"
		resultMap="ibatorgenerated_CountResult">
		select count(1) the_count from NWES_CUSTOM_SERVICE 
       where  CUSTOMER_SURVEY_ID = #customerSurveyId:DECIMAL#
	</select>
</sqlMap>