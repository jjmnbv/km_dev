<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="ACCOUNT_INFO" >
  <resultMap id="abatorgenerated_AccountInfoResult" class="com.pltfm.app.vobject.AccountInfo" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jul 10 15:14:23 CST 2013.
    -->
    <result column="N_ACCOUNT_ID" property="n_AccountId" jdbcType="DECIMAL" />
    <result column="N_CUSTOMER_TYPE_ID" property="n_CustomerTypeId" jdbcType="DECIMAL" />
    <result column="N_LOGIN_ID" property="n_LoginId" jdbcType="DECIMAL" />
    <result column="ACCOUNT_LOGIN" property="accountLogin" jdbcType="VARCHAR" />
    <result column="PAYMENTPWD" property="paymentpwd" jdbcType="VARCHAR" />
    <result column="NAME" property="name" jdbcType="VARCHAR" />
    <result column="ACCONUT_ID" property="acconutId" jdbcType="VARCHAR" />
    <result column="MOBILE" property="mobile" jdbcType="VARCHAR" />
    <result column="EMAIL" property="email" jdbcType="VARCHAR" />
    <result column="ADDRESS" property="address" jdbcType="VARCHAR" />
    <result column="D_CREATE_DATE" property="d_CreateDate" />
    <result column="N_ACCOUNT_AMOUNT" property="n_AccountAmount" jdbcType="DECIMAL" />
    <result column="AMOUNT_FROZEN" property="amountFrozen" jdbcType="DECIMAL" />
    <result column="AMOUNT_AVLIBAL" property="amountAvlibal" jdbcType="DECIMAL" />
    <result column="N_STATUS" property="n_Status" jdbcType="DECIMAL" />
    <result column="D_MODIFY_DATE" property="d_ModifyDate"  />
    <result column="N_MODIFIED" property="n_Modified" jdbcType="DECIMAL" />
    <result column="PAY_RANGE" property="pay_Range"/>
    <result column="CONSUMPTION_AMOUNT" property="consumption_Amount"/>
  </resultMap>
  <!-- 账户信息以及公司名 -->
  <resultMap id="abatorgenerated_AccountInfoAndCnameResult" class="com.pltfm.app.vobject.AccountInfo"  extends="abatorgenerated_AccountInfoResult">
  	<result column="corporate_name" property="corporateName" jdbcType="VARCHAR"/>
  </resultMap>
  
  <resultMap id="abatorgenerated_AccountInfoResultOther" class="com.pltfm.app.vobject.AccountInfo" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jul 10 15:14:23 CST 2013.
    -->
    <result column="N_ACCOUNT_ID" property="n_AccountId" jdbcType="DECIMAL" />
    
    <result column="N_CUSTOMER_TYPE_ID" property="n_CustomerTypeId" jdbcType="DECIMAL" />
    <result column="CUSTOMER_NAME"  property="customerName" jdbcType="VARCHAR"/>
    
    <result column="N_LOGIN_ID" property="n_LoginId" jdbcType="DECIMAL" />
    <result column="LOGIN_ACCOUNT" property="loginAccount" jdbcType="VARCHAR" />
    
    <result column="ACCOUNT_LOGIN" property="accountLogin" jdbcType="VARCHAR" />
    <result column="PAYMENTPWD" property="paymentpwd" jdbcType="VARCHAR" />
    <result column="NAME" property="name" jdbcType="VARCHAR" />
    <result column="ACCONUT_ID" property="acconutId" jdbcType="VARCHAR" />
    <result column="MOBILE" property="mobile" jdbcType="VARCHAR" />
    <result column="EMAIL" property="email" jdbcType="VARCHAR" />
    <result column="ADDRESS" property="address" jdbcType="VARCHAR" />
    <result column="D_CREATE_DATE" property="d_CreateDate"  />
    <result column="N_ACCOUNT_AMOUNT" property="n_AccountAmount" jdbcType="DECIMAL" />
    <result column="AMOUNT_FROZEN" property="amountFrozen" jdbcType="DECIMAL" />
    <result column="AMOUNT_AVLIBAL" property="amountAvlibal" jdbcType="DECIMAL" />
    <result column="N_STATUS" property="n_Status" jdbcType="DECIMAL" />
    <result column="D_MODIFY_DATE" property="d_ModifyDate" />
    <result column="N_MODIFIED" property="n_Modified" jdbcType="DECIMAL" />
    <result column="PAY_RANGE" property="pay_Range"/>
    <result column="CONSUMPTION_AMOUNT" property="consumption_Amount"/>
  </resultMap>
  
  <resultMap id="ibatorgenerated_CountResult" class="com.pltfm.sys.model.SysModelUtil">
    <result column="the_count" property="theCount" jdbcType="DECIMAL" />
  </resultMap>
  
  <sql id="abatorgenerated_Example_Where_Clause" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jul 10 15:14:23 CST 2013.
    -->
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate" >
      <isEqual property="oredCriteria[].valid" compareValue="true" >
        (
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and" >
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and" >
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and" >
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction="," >
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and" >
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  <select id="abatorgenerated_selectByPrimaryKey" resultMap="abatorgenerated_AccountInfoResultOther" parameterClass="com.pltfm.app.vobject.AccountInfo" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jul 10 15:14:23 CST 2013.
    -->
     select N_ACCOUNT_ID,  tt.N_CUSTOMER_TYPE_ID,  tt.N_LOGIN_ID, ACCOUNT_LOGIN, PAYMENTPWD, tt.NAME,
      ACCONUT_ID,  tt.MOBILE,  tt.EMAIL, ADDRESS,  tt.D_CREATE_DATE, (AMOUNT_FROZEN+AMOUNT_AVLIBAL) AS N_ACCOUNT_AMOUNT, AMOUNT_FROZEN,
      AMOUNT_AVLIBAL,  tt.N_STATUS,  tt.D_MODIFY_DATE, tt.N_MODIFIED,cc.name CUSTOMER_NAME,LOGIN_ACCOUNT,tt.PAY_RANGE,tt.CONSUMPTION_AMOUNT
    from ACCOUNT_INFO tt,BNES_CUSTOMER_TYPE cc,LOGIN_INFO ll
    where cc.customer_type_id=tt.N_CUSTOMER_TYPE_ID
    and ll.N_LOGIN_ID=tt.N_LOGIN_ID
    and tt.N_ACCOUNT_ID = #n_AccountId:DECIMAL#
  </select>
  <!-- 通过登录账号查询账户详细信息 -->
  <select id="abatorgenerated_showAccountInfo" resultMap="abatorgenerated_AccountInfoResultOther" parameterClass="com.pltfm.app.vobject.AccountInfo" >
     select N_ACCOUNT_ID,  tt.N_CUSTOMER_TYPE_ID,  tt.N_LOGIN_ID, ACCOUNT_LOGIN, PAYMENTPWD, tt.NAME,tt.PAY_RANGE,
      ACCONUT_ID,  tt.MOBILE,  tt.EMAIL, ADDRESS,  tt.D_CREATE_DATE, (AMOUNT_FROZEN+AMOUNT_AVLIBAL) AS N_ACCOUNT_AMOUNT, AMOUNT_FROZEN,
      AMOUNT_AVLIBAL,  tt.N_STATUS,  tt.D_MODIFY_DATE, tt.N_MODIFIED,cc.name CUSTOMER_NAME,LOGIN_ACCOUNT,tt.CONSUMPTION_AMOUNT
    from ACCOUNT_INFO tt,BNES_CUSTOMER_TYPE cc,LOGIN_INFO ll
    where cc.customer_type_id=tt.N_CUSTOMER_TYPE_ID
    and ll.N_LOGIN_ID=tt.N_LOGIN_ID
    and tt.N_LOGIN_ID = #n_LoginId:DECIMAL#
  </select>
  <select id="abatorgenerated_selectByPrimaryLoginInfo" resultMap="abatorgenerated_AccountInfoResultOther" parameterClass="com.pltfm.app.vobject.AccountInfo" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jul 10 15:14:23 CST 2013.
    -->
     select N_ACCOUNT_ID,  tt.N_CUSTOMER_TYPE_ID,  tt.N_LOGIN_ID, ACCOUNT_LOGIN, PAYMENTPWD, tt.NAME,
      ACCONUT_ID,  tt.MOBILE,  tt.EMAIL, ADDRESS,  tt.D_CREATE_DATE, N_ACCOUNT_AMOUNT, AMOUNT_FROZEN,
      AMOUNT_AVLIBAL,  ll.N_STATUS,  tt.D_MODIFY_DATE, tt.N_MODIFIED,cc.name CUSTOMER_NAME,LOGIN_ACCOUNT,tt.PAY_RANGE,tt.CONSUMPTION_AMOUNT
    from ACCOUNT_INFO tt,BNES_CUSTOMER_TYPE cc,LOGIN_INFO ll
    where cc.customer_type_id=tt.N_CUSTOMER_TYPE_ID
    and ll.N_LOGIN_ID=tt.N_LOGIN_ID
    <isNotNull property="n_LoginId">
	  <isNotEmpty prepend="and" property="n_LoginId">
		tt.N_LOGIN_ID=#n_LoginId:DECIMAL#
	  </isNotEmpty>
  </isNotNull>
  <!-- and tt.N_LOGIN_ID = #n_LoginId:DECIMAL# -->
   <isNotNull property="accountLogin">
	  <isNotEmpty prepend="and" property="accountLogin">
		tt.ACCOUNT_LOGIN =#accountLogin#
	  </isNotEmpty>
     </isNotNull>
   <isNotNull property="mobile">
	  <isNotEmpty prepend="and" property="mobile">
		tt.MOBILE =#mobile#
	  </isNotEmpty>
     </isNotNull>
  </select>

  <select id="abatorgenerated_selectByExample" resultMap="abatorgenerated_AccountInfoResult" parameterClass="com.pltfm.app.vobject.AccountInfoExample" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jul 10 15:14:23 CST 2013.
    -->
    select N_ACCOUNT_ID, N_CUSTOMER_TYPE_ID, N_LOGIN_ID, ACCOUNT_LOGIN, PAYMENTPWD, NAME,
      ACCONUT_ID, MOBILE, EMAIL, ADDRESS, D_CREATE_DATE, N_ACCOUNT_AMOUNT, AMOUNT_FROZEN,
      AMOUNT_AVLIBAL, N_STATUS, D_MODIFY_DATE, N_MODIFIED,PAY_RANGE,CONSUMPTION_AMOUNT
    from ACCOUNT_INFO
    <isParameterPresent >
      <include refid="ACCOUNT_INFO.abatorgenerated_Example_Where_Clause" />
      <isNotNull property="orderByClause" >
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <delete id="abatorgenerated_deleteByPrimaryKey" parameterClass="com.pltfm.app.vobject.AccountInfo" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jul 10 15:14:23 CST 2013.
    -->
    delete from ACCOUNT_INFO
    where N_ACCOUNT_ID = #n_AccountId:DECIMAL#
  </delete>
  <delete id="abatorgenerated_deleteByExample" parameterClass="com.pltfm.app.vobject.AccountInfoExample" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jul 10 15:14:23 CST 2013.
    -->
    delete from ACCOUNT_INFO
    <include refid="ACCOUNT_INFO.abatorgenerated_Example_Where_Clause" />
  </delete>
  <insert id="abatorgenerated_insert" parameterClass="com.pltfm.app.vobject.AccountInfo" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jul 10 15:14:23 CST 2013.
    -->
    
     <selectKey resultClass="java.lang.Integer" keyProperty="n_AccountId" >
           select seq_app_account.nextval from dual
      </selectKey>
    
    
    insert into ACCOUNT_INFO (N_ACCOUNT_ID, N_CUSTOMER_TYPE_ID, N_LOGIN_ID, ACCOUNT_LOGIN,
      PAYMENTPWD, NAME, ACCONUT_ID, MOBILE, EMAIL, ADDRESS, D_CREATE_DATE
      , N_STATUS, D_MODIFY_DATE, N_MODIFIED,CONSUMPTION_AMOUNT,PAY_RANGE<isNotEmpty  property="register_Platfrom">,REGISTER_PLATFORM,REGISTER_DEVICE</isNotEmpty>)
    values (#n_AccountId:DECIMAL#, #n_CustomerTypeId:DECIMAL#, #n_LoginId:DECIMAL#,
      #accountLogin:VARCHAR#, #paymentpwd:VARCHAR#, #name:VARCHAR#, #acconutId:VARCHAR#,
      #mobile:VARCHAR#, #email:VARCHAR#, #address:VARCHAR#, #d_CreateDate#,
      #n_Status:DECIMAL#,#d_ModifyDate#, #n_Modified:DECIMAL#,#consumption_Amount#,1 <isNotEmpty  property="register_Platfrom">,#register_Platfrom:DECIMAL#,#register_Device:DECIMAL#</isNotEmpty>)
  </insert>
  <update id="abatorgenerated_updateByPrimaryKey" parameterClass="com.pltfm.app.vobject.AccountInfo" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jul 10 15:14:23 CST 2013.
    -->
    update ACCOUNT_INFO
    set N_CUSTOMER_TYPE_ID = #n_CustomerTypeId:DECIMAL#,
      N_LOGIN_ID = #n_LoginId:DECIMAL#,
      ACCOUNT_LOGIN = #accountLogin:VARCHAR#,
      PAYMENTPWD = #paymentpwd:VARCHAR#,
      NAME = #name:VARCHAR#,
      ACCONUT_ID = #acconutId:VARCHAR#,
      MOBILE = #mobile:VARCHAR#,
      EMAIL = #email:VARCHAR#,
      ADDRESS = #address:VARCHAR#,
      D_CREATE_DATE = #d_CreateDate#,
      N_ACCOUNT_AMOUNT = #n_AccountAmount:DECIMAL#,
      AMOUNT_FROZEN = #amountFrozen:DECIMAL#,
      AMOUNT_AVLIBAL = #amountAvlibal:DECIMAL#,
      N_STATUS = #n_Status:DECIMAL#,
      D_MODIFY_DATE = #d_ModifyDate#,
      N_MODIFIED = #n_Modified:DECIMAL#,
      CONSUMPTION_AMOUNT=#consumption_Amount#
    where N_ACCOUNT_ID = #n_AccountId:DECIMAL#
  </update>
  <update id="abatorgenerated_updateByPrimaryKeySelective" parameterClass="com.pltfm.app.vobject.AccountInfo" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jul 10 15:14:23 CST 2013.
    -->
    update ACCOUNT_INFO
    <dynamic prepend="set" >
      <isNotNull prepend="," property="n_CustomerTypeId" >
        N_CUSTOMER_TYPE_ID = #n_CustomerTypeId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="n_LoginId" >
        N_LOGIN_ID = #n_LoginId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="accountLogin" >
        ACCOUNT_LOGIN = #accountLogin:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="paymentpwd" >
        PAYMENTPWD = #paymentpwd:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="name" >
        NAME = #name:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="acconutId" >
        ACCONUT_ID = #acconutId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="mobile" >
        MOBILE = #mobile:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="email" >
        EMAIL = #email:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="address" >
        ADDRESS = #address:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="d_CreateDate" >
        D_CREATE_DATE = #d_CreateDate#
      </isNotNull>
      <isNotNull prepend="," property="n_AccountAmount" >
        N_ACCOUNT_AMOUNT = #n_AccountAmount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="amountFrozen" >
        AMOUNT_FROZEN = #amountFrozen:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="amountAvlibal" >
        AMOUNT_AVLIBAL = #amountAvlibal:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="n_Status" >
        N_STATUS = #n_Status:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="d_ModifyDate" >
        D_MODIFY_DATE = #d_ModifyDate#
      </isNotNull>
      <isNotNull prepend="," property="n_Modified" >
        N_MODIFIED = #n_Modified:DECIMAL#
      </isNotNull>
       <isNotNull prepend="," property="consumption_Amount" >
        CONSUMPTION_AMOUNT=#consumption_Amount#
      </isNotNull>
    </dynamic>
    where N_ACCOUNT_ID = #n_AccountId:DECIMAL#
  </update>
  
  <update id="abatorgenerated_updateByLoginIdKeySelective" parameterClass="com.pltfm.app.vobject.AccountInfo" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jul 10 15:14:23 CST 2013.
    -->
    update ACCOUNT_INFO
    <dynamic prepend="set" >
      <isNotNull prepend="," property="n_CustomerTypeId" >
        N_CUSTOMER_TYPE_ID = #n_CustomerTypeId#
      </isNotNull>
      <isNotNull prepend="," property="accountLogin" >
        ACCOUNT_LOGIN = #accountLogin#
      </isNotNull>
      <isNotNull prepend="," property="paymentpwd" >
        PAYMENTPWD = #paymentpwd#
      </isNotNull>
      <isNotNull prepend="," property="name" >
        NAME = #name#
      </isNotNull>
      <isNotNull prepend="," property="acconutId" >
        ACCONUT_ID = #acconutId#
      </isNotNull>
      <isNotNull prepend="," property="mobile" >
        MOBILE = #mobile#
      </isNotNull>
      <isNotNull prepend="," property="email" >
        EMAIL = #email#
      </isNotNull>
      <isNotNull prepend="," property="address" >
        ADDRESS = #address#
      </isNotNull>
      <isNotNull prepend="," property="d_CreateDate" >
        D_CREATE_DATE = #d_CreateDate#
      </isNotNull>
      <isNotNull prepend="," property="n_AccountAmount" >
        N_ACCOUNT_AMOUNT = #n_AccountAmount#
      </isNotNull>
      <isNotNull prepend="," property="amountFrozen" >
        AMOUNT_FROZEN = #amountFrozen#
      </isNotNull>
      <isNotNull prepend="," property="amountAvlibal" >
        AMOUNT_AVLIBAL = #amountAvlibal#
      </isNotNull>
      <isNotNull prepend="," property="n_Status" >
        N_STATUS = #n_Status#
      </isNotNull>
      <isNotNull prepend="," property="d_ModifyDate" >
        D_MODIFY_DATE = #d_ModifyDate#
      </isNotNull>
      <isNotNull prepend="," property="n_Modified" >
        N_MODIFIED = #n_Modified#
      </isNotNull>
       <isNotNull prepend="," property="pay_Range" >
        PAY_RANGE = #pay_Range#
      </isNotNull>
      <isNotNull prepend="," property="consumption_Amount" >
        CONSUMPTION_AMOUNT=#consumption_Amount#
      </isNotNull>
      <isNotNull prepend="," property="accountLogin" >
        ACCOUNT_FLAG=1
      </isNotNull>
      
    </dynamic>
    where  N_LOGIN_ID = #n_LoginId#
  </update>
  <select id="abatorgenerated_countByExample" parameterClass="com.pltfm.app.vobject.AccountInfoExample" resultClass="java.lang.Integer" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jul 10 15:14:23 CST 2013.
    -->
    select count(*) from ACCOUNT_INFO
    <include refid="ACCOUNT_INFO.abatorgenerated_Example_Where_Clause" />
  </select>
  <update id="abatorgenerated_updateByExampleSelective" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jul 10 15:14:23 CST 2013.
    -->
    update ACCOUNT_INFO
    <dynamic prepend="set" >
      <isNotNull prepend="," property="record.n_AccountId" >
        N_ACCOUNT_ID = #record.n_AccountId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.n_CustomerTypeId" >
        N_CUSTOMER_TYPE_ID = #record.n_CustomerTypeId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.n_LoginId" >
        N_LOGIN_ID = #record.n_LoginId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.accountLogin" >
        ACCOUNT_LOGIN = #record.accountLogin:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.paymentpwd" >
        PAYMENTPWD = #record.paymentpwd:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.name" >
        NAME = #record.name:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.acconutId" >
        ACCONUT_ID = #record.acconutId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.mobile" >
        MOBILE = #record.mobile:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.email" >
        EMAIL = #record.email:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.address" >
        ADDRESS = #record.address:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.d_CreateDate" >
        D_CREATE_DATE = #record.d_CreateDate#
      </isNotNull>
      <isNotNull prepend="," property="record.n_AccountAmount" >
        N_ACCOUNT_AMOUNT = #record.n_AccountAmount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.amountFrozen" >
        AMOUNT_FROZEN = #record.amountFrozen:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.amountAvlibal" >
        AMOUNT_AVLIBAL = #record.amountAvlibal:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.n_Status" >
        N_STATUS = #record.n_Status:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.d_ModifyDate" >
        D_MODIFY_DATE = #record.d_ModifyDate#
      </isNotNull>
      <isNotNull prepend="," property="record.n_Modified" >
        N_MODIFIED = #record.n_Modified:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="consumption_Amount" >
        CONSUMPTION_AMOUNT=#consumption_Amount#
      </isNotNull>
    </dynamic>
    <isParameterPresent >
      <include refid="ACCOUNT_INFO.abatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="abatorgenerated_updateByExample" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jul 10 15:14:23 CST 2013.
    -->
    update ACCOUNT_INFO
    set N_ACCOUNT_ID = #record.n_AccountId:DECIMAL#,
      N_CUSTOMER_TYPE_ID = #record.n_CustomerTypeId:DECIMAL#,
      N_LOGIN_ID = #record.n_LoginId:DECIMAL#,
      ACCOUNT_LOGIN = #record.accountLogin:VARCHAR#,
      PAYMENTPWD = #record.paymentpwd:VARCHAR#,
      NAME = #record.name:VARCHAR#,
      ACCONUT_ID = #record.acconutId:VARCHAR#,
      MOBILE = #record.mobile:VARCHAR#,
      EMAIL = #record.email:VARCHAR#,
      ADDRESS = #record.address:VARCHAR#,
      D_CREATE_DATE = #record.d_CreateDate#,
      N_ACCOUNT_AMOUNT = #record.n_AccountAmount:DECIMAL#,
      AMOUNT_FROZEN = #record.amountFrozen:DECIMAL#,
      AMOUNT_AVLIBAL = #record.amountAvlibal:DECIMAL#,
      N_STATUS = #record.n_Status:DECIMAL#,
      D_MODIFY_DATE = #record.d_ModifyDate#,
      N_MODIFIED = #record.n_Modified:DECIMAL#,
      CONSUMPTION_AMOUNT=#consumption_Amount#
      
    <isParameterPresent >
      <include refid="ACCOUNT_INFO.abatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  
  
  <!--  ****************  search page by vo  ****************  -->
  <select id="searchPageByVo" resultMap="abatorgenerated_AccountInfoResultOther" parameterClass="com.pltfm.app.vobject.AccountInfo">
		select N_ACCOUNT_ID, N_CUSTOMER_TYPE_ID, N_LOGIN_ID, ACCOUNT_LOGIN, PAYMENTPWD, NAME,
      ACCONUT_ID, MOBILE, EMAIL, ADDRESS, D_CREATE_DATE, (AMOUNT_FROZEN+AMOUNT_AVLIBAL) AS N_ACCOUNT_AMOUNT, AMOUNT_FROZEN,
      AMOUNT_AVLIBAL, N_STATUS, D_MODIFY_DATE, N_MODIFIED,CUSTOMER_NAME,LOGIN_ACCOUNT,PAY_RANGE,CONSUMPTION_AMOUNT
    FROM (
    select  ROW_NUMBER() OVER(order by N_ACCOUNT_ID desc) as view_row_number, tt.*,cc.NAME CUSTOMER_NAME,ll.LOGIN_ACCOUNT 
    from ACCOUNT_INFO tt,BNES_CUSTOMER_TYPE cc,LOGIN_INFO ll
    where cc.customer_type_id=tt.N_CUSTOMER_TYPE_ID
    and ll.N_LOGIN_ID=tt.N_LOGIN_ID and tt.N_STATUS=1
    
		  <isNotNull property="n_CustomerTypeId">
			  <isNotEmpty prepend="and" property="n_CustomerTypeId">
				tt.N_CUSTOMER_TYPE_ID = #n_CustomerTypeId:DECIMAL#
			  </isNotEmpty>
		  </isNotNull>
		  <isNotNull property="accountLogin">
			  <isNotEmpty prepend="and" property="accountLogin">
				tt.ACCOUNT_LOGIN like '%$accountLogin$%'
			  </isNotEmpty>
		  </isNotNull>
		  <isNotNull property="name">
			  <isNotEmpty prepend="and" property="name">
				tt.NAME like '%$name$%'
			  </isNotEmpty>
		  </isNotNull>
		  <isNotNull property="acconutId">
			  <isNotEmpty prepend="and" property="acconutId">
				tt.ACCONUT_ID like '%$acconutId$%'
			  </isNotEmpty>
		  </isNotNull>
		  <isNotNull property="mobile">
			  <isNotEmpty prepend="and" property="mobile">
				tt.MOBILE like '%$mobile$%'
			  </isNotEmpty>
		  </isNotNull>
		   <isNotNull property="email">
			  <isNotEmpty prepend="and" property="email">
				tt.EMAIL like '%$email$%'
			  </isNotEmpty>
		  </isNotNull>
		  <isNotNull property="d_CreateDate">
			  <isNotEmpty prepend="and" property="d_CreateDate">
				<![CDATA[  tt.D_CREATE_DATE  >=#d_CreateDate#]]>
			  </isNotEmpty>
		  </isNotNull>
		  <isNotNull property="endDate">
			  <isNotEmpty prepend="and" property="endDate">
				<![CDATA[  tt.D_CREATE_DATE  <=#endDate#]]>
			  </isNotEmpty>
		  </isNotNull>
    )
    <![CDATA[ where view_row_number <= #max# and view_row_number > #skip# ]]>
	</select>
	
 <!-- **************** search user's roleList by vo  ****************  -->
  <select id="getAccountInfoCount" parameterClass="com.pltfm.app.vobject.AccountInfo" resultMap="ibatorgenerated_CountResult">
     select count(1) the_count from ACCOUNT_INFO tt,BNES_CUSTOMER_TYPE cc,LOGIN_INFO ll
    where cc.customer_type_id=tt.N_CUSTOMER_TYPE_ID
    and ll.N_LOGIN_ID=tt.N_LOGIN_ID and tt.N_STATUS=1
    
		  <isNotNull property="n_CustomerTypeId">
			  <isNotEmpty prepend="and" property="n_CustomerTypeId">
				tt.N_CUSTOMER_TYPE_ID = #n_CustomerTypeId:DECIMAL#
			  </isNotEmpty>
		  </isNotNull>
		  <isNotNull property="accountLogin">
			  <isNotEmpty prepend="and" property="accountLogin">
				tt.ACCOUNT_LOGIN like '%$accountLogin$%'
			  </isNotEmpty>
		  </isNotNull>
		  <isNotNull property="name">
			  <isNotEmpty prepend="and" property="name">
				tt.NAME like '%$name$%'
			  </isNotEmpty>
		  </isNotNull>
		  <isNotNull property="acconutId">
			  <isNotEmpty prepend="and" property="acconutId">
				tt.ACCONUT_ID like '%$acconutId$%'
			  </isNotEmpty>
		  </isNotNull>
		  <isNotNull property="mobile">
			  <isNotEmpty prepend="and" property="mobile">
				tt.MOBILE like '%$mobile$%'
			  </isNotEmpty>
		  </isNotNull>
		   <isNotNull property="email">
			  <isNotEmpty prepend="and" property="email">
				tt.EMAIL like '%$email$%'
			  </isNotEmpty>
		  </isNotNull>
		  <isNotNull property="d_CreateDate">
			  <isNotEmpty prepend="and" property="d_CreateDate">
				<![CDATA[  tt.D_CREATE_DATE  >=#d_CreateDate#]]>
			  </isNotEmpty>
		  </isNotNull>
		  <isNotNull property="endDate">
			  <isNotEmpty prepend="and" property="endDate">
				<![CDATA[  tt.D_CREATE_DATE  <=#endDate#]]>
			  </isNotEmpty>
		  </isNotNull>
		  
  </select>
  
  <select id="selectAccountAndCname" resultMap="abatorgenerated_AccountInfoAndCnameResult" parameterClass="java.lang.Integer">
  	select i.*,c.corporate_name from account_info i,COMMERCIAL_TENANT_BASIC_INFO c,login_rose_rel l 
	where i.n_login_id=c.n_login_id and c.n_commercial_tenant_id=l.n_commercial_id and l.n_customer_type_id=4
	and i.n_login_id=#loginId#
  </select>	
  
  <!-- 修改用户余额  cas防止并发的问题-->
  <update id="SQL_UPDATE_ACCOUNT_BALANCE" parameterClass="java.util.Map">
  	update  account_info ai set ai.amount_avlibal=ai.amount_avlibal+#amount# 
  	,ai.n_account_amount = ai.n_account_amount+#amount# 
  	where ai.n_login_id=#loginId# 
  	and ai.amount_avlibal+#amount#>=0
  	<isNotNull property="beforeAmount" prepend="and">
  	 ai.amount_avlibal = #beforeAmount#
  	</isNotNull>
  	<isNull property="beforeAmount" prepend="and">
  	 ai.amount_avlibal is null
  	</isNull>
  </update>

  <select id="queryUserPayPassword" parameterClass="com.kmzyc.b2b.vo.UserBaseInfo" resultClass="com.kmzyc.b2b.vo.UserBaseInfo">
    select
      li.n_login_id loginId,
      li.login_account loginAccount,
      li.mobile mobile,
      ai.paymentpwd password
    from
      login_info li inner join account_info ai on li.n_login_id=ai.n_login_id
    where ai.paymentpwd = #password:VARCHAR#
    <isNotEmpty property="loginId">AND LI.N_LOGIN_ID= #loginId:DECIMAL#</isNotEmpty>
    <isNotEmpty property="loginAccount">AND LI.LOGIN_ACCOUNT= #loginAccount:VARCHAR#</isNotEmpty>
    <isNotEmpty property="mobile">AND LI.MOBILE= #mobile:VARCHAR#</isNotEmpty>
  </select>
  
   <insert id="insertOrUpdateAccountInfo" parameterClass="com.pltfm.app.vobject.AccountInfo" >
     <selectKey resultClass="java.lang.Integer" keyProperty="n_AccountId" >
           select seq_app_account.nextval from dual
      </selectKey>
     MERGE INTO ACCOUNT_INFO ai
   	 USING(select #accountLogin# accountLogin from dual) temp_ai
   	 ON(ai.ACCOUNT_LOGIN = temp_ai.accountLogin)
   	 WHEN NOT MATCHED THEN
    insert (N_ACCOUNT_ID, N_CUSTOMER_TYPE_ID, N_LOGIN_ID, ACCOUNT_LOGIN,
      PAYMENTPWD, NAME, ACCONUT_ID, MOBILE, EMAIL, ADDRESS, D_CREATE_DATE
      , N_STATUS, D_MODIFY_DATE, N_MODIFIED,CONSUMPTION_AMOUNT,PAY_RANGE<isNotEmpty  property="register_Platfrom">,REGISTER_PLATFORM,REGISTER_DEVICE</isNotEmpty>)
    values (#n_AccountId:DECIMAL#, #n_CustomerTypeId:DECIMAL#, #n_LoginId:DECIMAL#,
      #accountLogin:VARCHAR#, #paymentpwd:VARCHAR#, #name:VARCHAR#, #acconutId:VARCHAR#,
      #mobile:VARCHAR#, #email:VARCHAR#, #address:VARCHAR#, sysdate,
      #n_Status:DECIMAL#,#d_ModifyDate#, #n_Modified:DECIMAL#,#consumption_Amount#,1 <isNotEmpty  property="register_Platfrom">,#register_Platfrom:DECIMAL#,#register_Device:DECIMAL#</isNotEmpty>)
      WHEN MATCHED THEN     
      update 
	    <dynamic prepend="set" >
	      <isNotNull prepend="," property="n_CustomerTypeId" >
	        N_CUSTOMER_TYPE_ID = #n_CustomerTypeId#
	      </isNotNull>
	      <isNotNull prepend="," property="paymentpwd" >
	        PAYMENTPWD = #paymentpwd#
	      </isNotNull>
	      <isNotNull prepend="," property="name" >
	        NAME = #name#
	      </isNotNull>
	      <isNotNull prepend="," property="acconutId" >
	        ACCONUT_ID = #acconutId#
	      </isNotNull>
	      <isNotNull prepend="," property="mobile" >
	        MOBILE = #mobile#
	      </isNotNull>
	      <isNotNull prepend="," property="email" >
	        EMAIL = #email#
	      </isNotNull>
	      <isNotNull prepend="," property="address" >
	        ADDRESS = #address#
	      </isNotNull>
	      <isNotNull prepend="," property="d_CreateDate" >
	        D_CREATE_DATE = #d_CreateDate#
	      </isNotNull>
	      <isNotNull prepend="," property="n_AccountAmount" >
	        N_ACCOUNT_AMOUNT = #n_AccountAmount#
	      </isNotNull>
	      <isNotNull prepend="," property="amountFrozen" >
	        AMOUNT_FROZEN = #amountFrozen#
	      </isNotNull>
	      <isNotNull prepend="," property="amountAvlibal" >
	        AMOUNT_AVLIBAL = #amountAvlibal#
	      </isNotNull>
	      <isNotNull prepend="," property="n_Status" >
	        N_STATUS = #n_Status#
	      </isNotNull>
	      <isNotNull prepend="," property="n_Modified" >
	        N_MODIFIED = #n_Modified#
	      </isNotNull>
	       <isNotNull prepend="," property="pay_Range" >
	        PAY_RANGE = #pay_Range#
	      </isNotNull>
	      <isNotNull prepend="," property="consumption_Amount" >
	        CONSUMPTION_AMOUNT=#consumption_Amount#
	      </isNotNull>
	      <isNotNull prepend="," property="accountLogin" >
	        ACCOUNT_FLAG=1
	      </isNotNull>
	        D_MODIFY_DATE = sysdate
	      
    </dynamic>
    where  ACCOUNT_LOGIN = #accountLogin#
      
  </insert>

</sqlMap>