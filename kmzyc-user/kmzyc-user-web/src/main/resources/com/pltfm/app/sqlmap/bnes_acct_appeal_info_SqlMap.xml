<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="BNES_ACCT_APPEAL_INFO" >
  <!-- 实体 -->
  <resultMap id="abatorgenerated_BnesAcctAppealInfoResult" class="com.pltfm.app.vobject.BnesAcctAppealInfo" >
  
    <result column="ACCOUNT_APPEAL_ID" property="accountAppealId"  />
    <result column="ACCOUNT_ID" property="accountId"  />
    <result column="APPEAL_TITLE" property="appealTitle"  />
    <result column="APPEAL_CONTENT" property="appealContent"  />
    <result column="APPEAL_CREATE_DATE" property="appealCreateDate"  />
    <result column="CREATE_DATE" property="createDate"  />
    <result column="CREATED_ID" property="createdId"  />
    <result column="MODIFY_DATE" property="modifyDate"  />
    <result column="MODIFIE_ID" property="modifieId"  />
    <result column="N_LOGIN_ID" property="nLoginId"  />
    <result column="TYPE" property="type"  />
    <result column="ORDER_DESC" property="order_Desc"  />
    <result column="EMAIL" property="email"  />
    <result column="MOBILE" property="mobile"  />  
  </resultMap>
  	
  	<!-- 申诉信息查询对象 -->
    <resultMap id="abatorgenerated_BnesAcctAppealInfoResultQry" class="com.pltfm.app.vobject.BnesAcctAppealInfo" >
  
    <result column="ACCOUNT_APPEAL_ID" property="accountAppealId"  />
    <result column="ACCOUNT_ID" property="accountId"  />
    <result column="APPEAL_TITLE" property="appealTitle"  />
    <result column="APPEAL_CONTENT" property="appealContent"  />
    <result column="APPEAL_SUGGESTION" property="appealSuggestion" />
    <result column="APPEAL_CREATE_DATE" property="appealCreateDate"  />
    <result column="CREATE_DATE" property="createDate"  />
    <result column="CREATED_ID" property="createdId"  />
    <result column="MODIFY_DATE" property="modifyDate"  />
    <result column="MODIFIE_ID" property="modifieId"  />
    <result column="ACCOUNT_NAME" property="accountName"  />
  </resultMap>
  
    <!-- 查询对象 -->
   <resultMap id="abatorgenerated_BnesAcctAppealInfoQry" class="com.pltfm.app.vobject.BnesAcctAppealInfoQry" >
     
    <result column="ACCOUNT_APPEAL_ID" property="accountAppealId"  />
    <result column="ACCOUNT_ID" property="accountId"/>
    <result column="ACCOUNT_NAME" property="accountName"  />
    <result column="APPEAL_TITLE" property="appealTitle"  />
    <result column="APPEAL_CONTENT" property="appealContent"  />
    <result column="APPEAL_CREATE_DATE" property="appealCreateDate"  />
    
   
    
     <result column="APPEAL_SUGGESTION" property="appealSuggestion" />
     <result column="DISPOSE_DATE" property="disposeDate" />
   
     <result column="DISPOSE_PERSON_NAME" property="disposePersonName"/>
     <result column="TYPE" property="type"/>
     <result column="ORDER_DESC" property="order_Desc"/>
  </resultMap>
  <sql id="abatorgenerated_Example_Where_Clause" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Aug 07 16:31:06 CST 2013.
    -->
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate" >
      <isEqual property="oredCriteria[].valid" compareValue="true" >
        (
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and" >
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and" >
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and" >
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction="," >
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and" >
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  <!-- 跟据申诉id关联账户查询详细信息  -->
  <select id="abatorgenerated_selectByPrimaryKey" resultMap="abatorgenerated_BnesAcctAppealInfoResultQry" parameterClass="com.pltfm.app.vobject.BnesAcctAppealInfo" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Aug 07 16:31:06 CST 2013.
    -->
    select tt.ACCOUNT_APPEAL_ID,
        ai.ACCOUNT_LOGIN as ACCOUNT_NAME,
        tt.ACCOUNT_ID,
        tt.APPEAL_TITLE,
        tt.APPEAL_CONTENT,
        bahc.APPEAL_SUGGESTION,
        tt.CREATE_DATE as APPEAL_CREATE_DATE,
        tt.CREATE_DATE,
        tt.CREATED_ID,
        tt.MODIFY_DATE,
       tt.MODIFIE_ID
    from BNES_ACCT_APPEAL_INFO tt,bnes_acct_handle_complaints bahc,account_info ai 
    where bahc.ACCOUNT_APPEAL_ID(+) = tt.ACCOUNT_APPEAL_ID
    and  tt.n_login_id=ai.n_login_id 
    and tt.ACCOUNT_APPEAL_ID = #accountAppealId#  
  </select>
  <!--综合查询  -->
  <select id="abatorgenerated_selectByExample" resultMap="abatorgenerated_BnesAcctAppealInfoQry" parameterClass="com.pltfm.app.vobject.BnesAcctAppealInfoQry" >
  
   select ACCOUNT_APPEAL_ID,
        n_account_id  as ACCOUNT_ID,
        ACCOUNT_LOGIN as ACCOUNT_NAME,
        APPEAL_TITLE,
        APPEAL_CONTENT,
        APPEAL_SUGGESTION,
        DISPOSE_DATE,
        DISPOSE_PERSON_NAME,
        n_login_id,
        type,
        ORDER_DESC,
        create_date as APPEAL_CREATE_DATE
        
   from (
   select baai.ACCOUNT_APPEAL_ID,baai.APPEAL_TITLE,baai.APPEAL_CONTENT,baai.n_login_id,baai.type,
              baai.ORDER_DESC,baai.create_date,
              bahc.APPEAL_SUGGESTION,
                bahc.DISPOSE_DATE,
                su.user_name as DISPOSE_PERSON_NAME,
                 ai.account_login,
                ai.n_account_id,
                ROW_NUMBER() OVER(order by baai.create_date desc nulls last) as view_row_number
           from BNES_ACCT_APPEAL_INFO       baai,
                bnes_acct_handle_complaints bahc,
                sys_user                su,
                account_info			ai
          where bahc.ACCOUNT_APPEAL_ID(+) = baai.ACCOUNT_APPEAL_ID
            and su.user_id(+) = bahc.DISPOSE_PERSON_ID
            and ai.n_login_id = baai.n_login_id 
             <isNotNull property="appealTitle">
			  <isNotEmpty prepend="and" property="appealTitle">
				   baai.APPEAL_TITLE like '%$appealTitle$%'
			  </isNotEmpty>
		  </isNotNull>
		  <isNotNull property="accountName">
			<isNotEmpty prepend="and" property="accountName">			
               ai.account_login like '%$accountName$%'
			</isNotEmpty>
		  </isNotNull>
		  <isNotNull property="createDateBefore">
			<isNotEmpty prepend="and" property="createDateBefore">			
               baai.create_date >= #createDateBefore#
			</isNotEmpty>
		  </isNotNull>
		   <isNotNull property="createDateEnd">
			<isNotEmpty prepend="and" property="createDateEnd">	
			  <![CDATA[		
               baai.create_date <= #createDateEnd#
              ]]>
			</isNotEmpty>
		  </isNotNull>
		   <isNotNull property="order_Desc">
			<isNotEmpty prepend="and" property="order_Desc">			
              baai.ORDER_DESC like '%$order_Desc$%'
			</isNotEmpty>
		  </isNotNull>
		   <isNotNull property="disposePersonName">
			<isNotEmpty prepend="and" property="disposePersonName">			
               su.user_name like '%$disposePersonName$%'
			</isNotEmpty>
		  </isNotNull>
		  <isNotNull property="type">
			<isNotEmpty prepend="and" property="type">			
               baai.type = #type#
			</isNotEmpty>
		  </isNotNull>
		  <isNotNull property="dealStatus">
			   <isEqual property="dealStatus" compareValue="1">
				<isNotEmpty prepend="and" property="dealStatus">			
	               su.user_name is not null
				</isNotEmpty>
				</isEqual>
				<isEqual property="dealStatus" compareValue="2">
				<isNotEmpty prepend="and" property="dealStatus">			
	               su.user_name is  null
				</isNotEmpty>
				</isEqual>
		  </isNotNull>
		 <![CDATA[)where  view_row_number <= #max# and view_row_number > #skip# ]]>
		 
  </select>
   <!--记录数  -->
  <select id="abatorgenerated_countByExample" parameterClass="com.pltfm.app.vobject.BnesAcctAppealInfoQry" resultClass="java.lang.Integer" >
    	select count(*) 
           from BNES_ACCT_APPEAL_INFO       baai,
                bnes_acct_handle_complaints bahc,
                sys_user                su,
                 account_info			ai
          where bahc.ACCOUNT_APPEAL_ID(+) = baai.ACCOUNT_APPEAL_ID
            and su.user_id(+) = bahc.DISPOSE_PERSON_ID 
            and ai.n_login_id = baai.n_login_id
		  <isNotNull property="appealTitle">
			  <isNotEmpty prepend="and" property="appealTitle">
				   baai.APPEAL_TITLE like '%$appealTitle$%'
			  </isNotEmpty>
		  </isNotNull>
		  <isNotNull property="accountName">
			<isNotEmpty prepend="and" property="accountName">			
               ai.account_login like '%$accountName$%'
			</isNotEmpty>
		  </isNotNull>
		  <isNotNull property="createDateBefore">
			<isNotEmpty prepend="and" property="createDateBefore">			
               baai.create_date >= #createDateBefore#
			</isNotEmpty>
		  </isNotNull>
		   <isNotNull property="createDateEnd">
			<isNotEmpty prepend="and" property="createDateEnd">	
			  <![CDATA[		
               baai.create_date <= #createDateEnd#
              ]]>
			</isNotEmpty>
		  </isNotNull>
		   <isNotNull property="order_Desc">
			<isNotEmpty prepend="and" property="order_Desc">			
              baai.ORDER_DESC like '%$order_Desc$%'
			</isNotEmpty>
		  </isNotNull>
		   <isNotNull property="disposePersonName">
			<isNotEmpty prepend="and" property="disposePersonName">			
               su.user_name like '%$disposePersonName$%'
			</isNotEmpty>
		  </isNotNull>
		  <isNotNull property="type">
			<isNotEmpty prepend="and" property="type">			
               baai.type = #type#
			</isNotEmpty>
		  </isNotNull>
		   <isNotNull property="dealStatus">
			   <isEqual property="dealStatus" compareValue="1">
				<isNotEmpty prepend="and" property="dealStatus">			
	               su.user_name is not null
				</isNotEmpty>
				</isEqual>
				<isEqual property="dealStatus" compareValue="2">
				<isNotEmpty prepend="and" property="dealStatus">			
	               su.user_name is  null
				</isNotEmpty>
				</isEqual>
		  </isNotNull>		  
  </select>
  
  <delete id="abatorgenerated_deleteByPrimaryKey" parameterClass="com.pltfm.app.vobject.BnesAcctAppealInfo" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Aug 07 16:31:06 CST 2013.
    -->
    delete from BNES_ACCT_APPEAL_INFO
    where ACCOUNT_APPEAL_ID = #accountAppealId:DECIMAL#
  </delete>
  <delete id="abatorgenerated_deleteByExample" parameterClass="com.pltfm.app.vobject.BnesAcctAppealInfoExample" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Aug 07 16:31:06 CST 2013.
    -->
    delete from BNES_ACCT_APPEAL_INFO
    <include refid="BNES_ACCT_APPEAL_INFO.abatorgenerated_Example_Where_Clause" />
  </delete>
  
  <!-- 添加 -->
  <insert id="abatorgenerated_insert" parameterClass="com.pltfm.app.vobject.BnesAcctAppealInfo" >
  
    <selectKey resultClass="java.lang.Integer" keyProperty="accountAppealId" >
           select SEQ_APP_ACCOUNT_APPEAL.nextval from dual
      </selectKey>
 
    insert into BNES_ACCT_APPEAL_INFO (ACCOUNT_APPEAL_ID, ACCOUNT_ID, APPEAL_TITLE, APPEAL_CONTENT,
      APPEAL_CREATE_DATE, CREATE_DATE, CREATED_ID,N_LOGIN_ID,TYPE,ORDER_DESC,EMAIL,MOBILE)
    values (#accountAppealId:Integer#, #accountId:Integer#, #appealTitle:VARCHAR#,
      #appealContent:VARCHAR#, #appealCreateDate:DATE#, sysdate, #createdId:Integer#, #nLoginId#, #type#, #order_Desc#, #email#, #mobile#
     )
  </insert>
    <!-- 添加接口 -->
  <insert id="abatorgenerated_insertBa" parameterClass="com.pltfm.app.vobject.BnesAcctAppealInfo" >
  
    <selectKey resultClass="java.lang.Integer" keyProperty="accountAppealId" >
           select SEQ_APP_ACCOUNT_APPEAL.nextval from dual
      </selectKey>
 
    insert into BNES_ACCT_APPEAL_INFO (ACCOUNT_APPEAL_ID,  APPEAL_TITLE, APPEAL_CONTENT,
      APPEAL_CREATE_DATE, CREATE_DATE, N_LOGIN_ID,TYPE,ORDER_DESC,EMAIL,MOBILE)
    values (#accountAppealId:Integer#,  #appealTitle:VARCHAR#,
      #appealContent:VARCHAR#, #appealCreateDate#, sysdate, #nLoginId#, #type#, #order_Desc#, #email#, #mobile#
     )
  </insert>
  <update id="abatorgenerated_updateByPrimaryKey" parameterClass="com.pltfm.app.vobject.BnesAcctAppealInfo" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Aug 07 16:31:06 CST 2013.
    -->
    update BNES_ACCT_APPEAL_INFO
    set ACCOUNT_ID = #accountId:DECIMAL#,
      APPEAL_TITLE = #appealTitle:VARCHAR#,
      APPEAL_CONTENT = #appealContent:VARCHAR#,
      APPEAL_CREATE_DATE = #appealCreateDate:DATE#,
      CREATE_DATE = #createDate:DATE#,
      CREATED_ID = #createdId:DECIMAL#,
      MODIFY_DATE = #modifyDate:DATE#,
      MODIFIE_ID = #modifieId:DECIMAL#
    where ACCOUNT_APPEAL_ID = #accountAppealId:DECIMAL#
  </update>
  <update id="abatorgenerated_updateByPrimaryKeySelective" parameterClass="com.pltfm.app.vobject.BnesAcctAppealInfo" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Aug 07 16:31:06 CST 2013.
    -->
    update BNES_ACCT_APPEAL_INFO
    <dynamic prepend="set" >
      <isNotNull prepend="," property="accountId" >
        ACCOUNT_ID = #accountId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="appealTitle" >
        APPEAL_TITLE = #appealTitle:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="appealContent" >
        APPEAL_CONTENT = #appealContent:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="appealCreateDate" >
        APPEAL_CREATE_DATE = #appealCreateDate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="createDate" >
        CREATE_DATE = #createDate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="createdId" >
        CREATED_ID = #createdId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="modifyDate" >
        MODIFY_DATE = #modifyDate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="modifieId" >
        MODIFIE_ID = #modifieId:DECIMAL#
      </isNotNull>
    </dynamic>
    where ACCOUNT_APPEAL_ID = #accountAppealId:DECIMAL#
  </update>
  
  <update id="abatorgenerated_updateByExampleSelective" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Aug 07 16:31:06 CST 2013.
    -->
    update BNES_ACCT_APPEAL_INFO
    <dynamic prepend="set" >
      <isNotNull prepend="," property="record.accountAppealId" >
        ACCOUNT_APPEAL_ID = #record.accountAppealId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.accountId" >
        ACCOUNT_ID = #record.accountId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.appealTitle" >
        APPEAL_TITLE = #record.appealTitle:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.appealContent" >
        APPEAL_CONTENT = #record.appealContent:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.appealCreateDate" >
        APPEAL_CREATE_DATE = #record.appealCreateDate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="record.createDate" >
        CREATE_DATE = #record.createDate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="record.createdId" >
        CREATED_ID = #record.createdId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.modifyDate" >
        MODIFY_DATE = #record.modifyDate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="record.modifieId" >
        MODIFIE_ID = #record.modifieId:DECIMAL#
      </isNotNull>
    </dynamic>
    <isParameterPresent >
      <include refid="BNES_ACCT_APPEAL_INFO.abatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="abatorgenerated_updateByExample" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Aug 07 16:31:06 CST 2013.
    -->
    update BNES_ACCT_APPEAL_INFO
    set ACCOUNT_APPEAL_ID = #record.accountAppealId:DECIMAL#,
      ACCOUNT_ID = #record.accountId:DECIMAL#,
      APPEAL_TITLE = #record.appealTitle:VARCHAR#,
      APPEAL_CONTENT = #record.appealContent:VARCHAR#,
      APPEAL_CREATE_DATE = #record.appealCreateDate:DATE#,
      CREATE_DATE = #record.createDate:DATE#,
      CREATED_ID = #record.createdId:DECIMAL#,
      MODIFY_DATE = #record.modifyDate:DATE#,
      MODIFIE_ID = #record.modifieId:DECIMAL#
    <isParameterPresent >
      <include refid="BNES_ACCT_APPEAL_INFO.abatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
</sqlMap>