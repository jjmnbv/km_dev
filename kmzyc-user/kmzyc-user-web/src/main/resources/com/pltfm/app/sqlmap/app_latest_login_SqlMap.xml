<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="LATEST_LOGIN" >
  <resultMap id="abatorgenerated_LatestLoginResult" class="com.pltfm.app.vobject.LatestLogin" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jul 24 10:23:01 CST 2013.
    -->
    <result column="N_ID" property="n_Id" jdbcType="DECIMAL" />
    <result column="N_LOGIN_ID" property="n_LoginId" jdbcType="DECIMAL" />
    <result column="LOGIN_ACCOUNT" property="loginAccount" jdbcType="VARCHAR" />
    <result column="D_DATE" property="d_Date"  />
    <result column="LOGIN_IP" property="loginIp" jdbcType="VARCHAR" />
    <result column="LOGIN_MODULE" property="loginModule" jdbcType="VARCHAR" />
  </resultMap>
  
  <resultMap id="ibatorgenerated_CountResult" class="com.pltfm.sys.model.SysModelUtil">
    <result column="the_count" property="theCount" jdbcType="DECIMAL" />
  </resultMap>
  
  <sql id="abatorgenerated_Example_Where_Clause" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jul 24 10:23:01 CST 2013.
    -->
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate" >
      <isEqual property="oredCriteria[].valid" compareValue="true" >
        (
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and" >
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and" >
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and" >
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction="," >
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and" >
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  <select id="abatorgenerated_selectByPrimaryKey" resultMap="abatorgenerated_LatestLoginResult" parameterClass="com.pltfm.app.vobject.LatestLogin" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jul 24 10:23:01 CST 2013.
    -->
    select N_ID, N_LOGIN_ID, D_DATE, LOGIN_IP, LOGIN_MODULE
    from LATEST_LOGIN
    where N_ID = #n_Id:DECIMAL#
  </select>
  <select id="abatorgenerated_selectByExample" resultMap="abatorgenerated_LatestLoginResult" parameterClass="com.pltfm.app.vobject.LatestLoginExample" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jul 24 10:23:01 CST 2013.
    -->
    select N_ID, N_LOGIN_ID, D_DATE, LOGIN_IP, LOGIN_MODULE
    from LATEST_LOGIN
    <isParameterPresent >
      <include refid="LATEST_LOGIN.abatorgenerated_Example_Where_Clause" />
      <isNotNull property="orderByClause" >
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <delete id="abatorgenerated_deleteByPrimaryKey" parameterClass="com.pltfm.app.vobject.LatestLogin" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jul 24 10:23:01 CST 2013.
    -->
    delete from LATEST_LOGIN
    where N_ID = #n_Id:DECIMAL#
  </delete>
  <delete id="abatorgenerated_deleteByExample" parameterClass="com.pltfm.app.vobject.LatestLoginExample" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jul 24 10:23:01 CST 2013.
    -->
    delete from LATEST_LOGIN
    <include refid="LATEST_LOGIN.abatorgenerated_Example_Where_Clause" />
  </delete>
  <insert id="abatorgenerated_insert" parameterClass="com.pltfm.app.vobject.LatestLogin" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jul 24 10:23:01 CST 2013.
    -->
    
    <selectKey resultClass="java.lang.Integer" keyProperty="n_Id" >
           select SEQ_APP_ACTIVE.nextval from dual
   </selectKey>
    
    insert into LATEST_LOGIN (N_ID, N_LOGIN_ID, D_DATE, LOGIN_IP, LOGIN_MODULE)
    values (#n_Id:DECIMAL#, #n_LoginId:DECIMAL#, #d_Date#, #loginIp:VARCHAR#,
      #loginModule:VARCHAR#)
  </insert>
  <update id="abatorgenerated_updateByPrimaryKey" parameterClass="com.pltfm.app.vobject.LatestLogin" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jul 24 10:23:01 CST 2013.
    -->
    update LATEST_LOGIN
    set N_LOGIN_ID = #n_LoginId:DECIMAL#,
      D_DATE = #d_Date#,
      LOGIN_IP = #loginIp:VARCHAR#,
      LOGIN_MODULE = #loginModule:VARCHAR#
    where N_ID = #n_Id:DECIMAL#
  </update>
  <update id="abatorgenerated_updateByPrimaryKeySelective" parameterClass="com.pltfm.app.vobject.LatestLogin" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jul 24 10:23:01 CST 2013.
    -->
    update LATEST_LOGIN
    <dynamic prepend="set" >
      <isNotNull prepend="," property="n_LoginId" >
        N_LOGIN_ID = #n_LoginId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="d_Date" >
        D_DATE = #d_Date#
      </isNotNull>
      <isNotNull prepend="," property="loginIp" >
        LOGIN_IP = #loginIp:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="loginModule" >
        LOGIN_MODULE = #loginModule:VARCHAR#
      </isNotNull>
    </dynamic>
    where N_ID = #n_Id:DECIMAL#
  </update>
  <select id="abatorgenerated_countByExample" parameterClass="com.pltfm.app.vobject.LatestLoginExample" resultClass="java.lang.Integer" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jul 24 10:23:01 CST 2013.
    -->
    select count(*) from LATEST_LOGIN
    <include refid="LATEST_LOGIN.abatorgenerated_Example_Where_Clause" />
  </select>
  <update id="abatorgenerated_updateByExampleSelective" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jul 24 10:23:01 CST 2013.
    -->
    update LATEST_LOGIN
    <dynamic prepend="set" >
      <isNotNull prepend="," property="record.n_Id" >
        N_ID = #record.n_Id:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.n_LoginId" >
        N_LOGIN_ID = #record.n_LoginId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.d_Date" >
        D_DATE = #record.d_Date:DATE#
      </isNotNull>
      <isNotNull prepend="," property="record.loginIp" >
        LOGIN_IP = #record.loginIp:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.loginModule" >
        LOGIN_MODULE = #record.loginModule:VARCHAR#
      </isNotNull>
    </dynamic>
    <isParameterPresent >
      <include refid="LATEST_LOGIN.abatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="abatorgenerated_updateByExample" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jul 24 10:23:01 CST 2013.
    -->
    update LATEST_LOGIN
    set N_ID = #record.n_Id:DECIMAL#,
      N_LOGIN_ID = #record.n_LoginId:DECIMAL#,
      D_DATE = #record.d_Date:DATE#,
      LOGIN_IP = #record.loginIp:VARCHAR#,
      LOGIN_MODULE = #record.loginModule:VARCHAR#
    <isParameterPresent >
      <include refid="LATEST_LOGIN.abatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  
   <!--  ****************  search page by vo  ****************  -->
  <select id="searchPageByVo" resultMap="abatorgenerated_LatestLoginResult" parameterClass="com.pltfm.app.vobject.LatestLogin">
      select N_ID, N_LOGIN_ID, D_DATE, LOGIN_IP, LOGIN_MODULE,LOGIN_ACCOUNT
    FROM (
    select  ROW_NUMBER() OVER(order by N_ID desc) as view_row_number, tt.*,aa.LOGIN_ACCOUNT from LATEST_LOGIN tt,LOGIN_INFO aa
    where aa.N_LOGIN_ID=tt.N_LOGIN_ID
    	  <isNotNull property="n_LoginId">
			  <isNotEmpty prepend="and" property="n_LoginId">
				tt.N_LOGIN_ID = #n_LoginId#
			  </isNotEmpty>
		  </isNotNull>
		  
		  <isNotNull property="d_DateStart">
			  <isNotEmpty prepend="and" property="d_DateStart">
				<![CDATA[ tt.D_DATE >= #d_DateStart# ]]>
			  </isNotEmpty>
		  </isNotNull>
		  
		   <isNotNull property="d_DateEnd">
			  <isNotEmpty prepend="and" property="d_DateEnd">
				<![CDATA[ tt.D_DATE <= #d_DateEnd# ]]>
			  </isNotEmpty>
		  </isNotNull>
		  
		  <isNotNull property="loginIp">
			  <isNotEmpty prepend="and" property="loginIp">
				tt.LOGIN_IP = #loginIp#
			  </isNotEmpty>
		  </isNotNull>
		  
		  <isNotNull property="loginAccount">
			  <isNotEmpty prepend="and" property="loginAccount">
				aa.LOGIN_ACCOUNT like '%$loginAccount$%'
			  </isNotEmpty>
		  </isNotNull>
    )
    <![CDATA[ where view_row_number <= #max# and view_row_number > #skip# ]]>
	</select>
	
 <!-- **************** search user's roleList by vo  ****************  -->
  <select id="getLatestLoginCount" parameterClass="com.pltfm.app.vobject.LatestLogin" resultMap="ibatorgenerated_CountResult">
     select count(1) the_count from LATEST_LOGIN tt,LOGIN_INFO aa
    where aa.N_LOGIN_ID=tt.N_LOGIN_ID
    
		    <isNotNull property="d_DateStart">
			  <isNotEmpty prepend="and" property="d_DateStart">
				<![CDATA[ tt.D_DATE >= #d_DateStart# ]]>
			  </isNotEmpty>
		  </isNotNull>
		  
		   <isNotNull property="d_DateEnd">
			  <isNotEmpty prepend="and" property="d_DateEnd">
				<![CDATA[ tt.D_DATE <= #d_DateEnd# ]]>
			  </isNotEmpty>
		  </isNotNull>
		  
		  <isNotNull property="loginIp">
			  <isNotEmpty prepend="and" property="loginIp">
				tt.LOGIN_IP = #loginIp#
			  </isNotEmpty>
		  </isNotNull>
		  
		  <isNotNull property="loginAccount">
			  <isNotEmpty prepend="and" property="loginAccount">
				aa.LOGIN_ACCOUNT like '%$loginAccount$%'
			  </isNotEmpty>
		  </isNotNull>
		  
  </select>
  
  
</sqlMap>