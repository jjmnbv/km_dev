<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="BNES_ANSWER_INFO" >
  <resultMap id="abatorgenerated_BnesAnswerInfoResult" class="com.pltfm.app.vobject.BnesAnswerInfo" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Aug 06 09:20:47 CST 2013.
    -->
    <result column="ANSWER_INFO_ID" property="answerInfoId" jdbcType="DECIMAL" />
    <result column="SAFE_QUESTION_ID" property="safeQuestionId" jdbcType="DECIMAL" />
    <result column="ANSWER_CONTENT" property="answerContent" jdbcType="VARCHAR" />
    <result column="CREATE_DATE" property="createDate" jdbcType="DATE" />
    <result column="CREATED" property="created" jdbcType="DECIMAL" />
    <result column="MODIFY_DATE" property="modifyDate" jdbcType="DATE" />
    <result column="MODIFIED" property="modified" jdbcType="DECIMAL" />
    <result column="LOGIN_ID" property="loginId" jdbcType="DECIMAL" />
    <result column="ACCOUNT_ID" property="accountId" jdbcType="DECIMAL" />
  </resultMap>
  
  <resultMap id="abatorgenerated_BnesAnswerInfoResultOther" class="com.pltfm.app.vobject.BnesAnswerInfo" >
    <result column="ANSWER_INFO_ID" property="answerInfoId" jdbcType="DECIMAL" />
    <result column="SAFE_QUESTION_ID" property="safeQuestionId" jdbcType="DECIMAL" />
    <result property="question_name" column="QUESTION_NAME" jdbcType="VARCHAR" />
    
    <result column="ANSWER_CONTENT" property="answerContent" jdbcType="VARCHAR" />
    <result column="CREATE_DATE" property="createDate" jdbcType="DATE" />
    <result column="CREATED" property="created" jdbcType="DECIMAL" />
    <result column="MODIFY_DATE" property="modifyDate" jdbcType="DATE" />
    <result column="MODIFIED" property="modified" jdbcType="DECIMAL" />
    <result column="LOGIN_ID" property="loginId" jdbcType="DECIMAL" />
     <result column="LOGIN_ACCOUNT" property="loginAccount" jdbcType="VARCHAR" />
    <result column="NAME" property="name" jdbcType="VARCHAR" />
    
    <result column="ACCOUNT_ID" property="accountId" jdbcType="DECIMAL" />
    <result column="ACCOUNT_LOGIN" property="accountLogin" jdbcType="VARCHAR" />
  </resultMap>
  
  <resultMap id="ibatorgenerated_CountResult" class="com.pltfm.sys.model.SysModelUtil">
    <result column="the_count" property="theCount" jdbcType="DECIMAL" />
  </resultMap>
  
  
  <sql id="abatorgenerated_Example_Where_Clause" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Aug 06 09:20:47 CST 2013.
    -->
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate" >
      <isEqual property="oredCriteria[].valid" compareValue="true" >
        (
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and" >
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and" >
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and" >
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction="," >
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and" >
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  <select id="abatorgenerated_selectByPrimaryKey" resultMap="abatorgenerated_BnesAnswerInfoResult" parameterClass="com.pltfm.app.vobject.BnesAnswerInfo" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Aug 06 09:20:47 CST 2013.
    -->
    select ANSWER_INFO_ID, SAFE_QUESTION_ID, ANSWER_CONTENT, CREATE_DATE, CREATED, MODIFY_DATE,
      MODIFIED, LOGIN_ID, ACCOUNT_ID
    from BNES_ANSWER_INFO
    where ANSWER_INFO_ID = #answerInfoId:DECIMAL#
  </select>
   <!--
          根据安全问题id账户查id询单些问题是否已存在
    -->
    <select id="abatorgenerated_getSafeQuestion_Id" resultMap="abatorgenerated_BnesAnswerInfoResult" parameterClass="com.pltfm.app.vobject.BnesAnswerInfo" >
    select ANSWER_INFO_ID, SAFE_QUESTION_ID, ANSWER_CONTENT, CREATE_DATE, CREATED, MODIFY_DATE,
      MODIFIED, LOGIN_ID, ACCOUNT_ID
    from BNES_ANSWER_INFO
    where SAFE_QUESTION_ID = #safeQuestionId:DECIMAL# and ACCOUNT_ID=#accountId:DECIMAL#
  </select>
  
  
  <select id="abatorgenerated_selectByExample" resultMap="abatorgenerated_BnesAnswerInfoResult" parameterClass="com.pltfm.app.vobject.BnesAnswerInfoExample" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Aug 06 09:20:47 CST 2013.
    -->
    select ANSWER_INFO_ID, SAFE_QUESTION_ID, ANSWER_CONTENT, CREATE_DATE, CREATED, MODIFY_DATE,
      MODIFIED, LOGIN_ID, ACCOUNT_ID
    from BNES_ANSWER_INFO
    <isParameterPresent >
      <include refid="BNES_ANSWER_INFO.abatorgenerated_Example_Where_Clause" />
      <isNotNull property="orderByClause" >
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <delete id="abatorgenerated_deleteByPrimaryKey" parameterClass="com.pltfm.app.vobject.BnesAnswerInfo" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Aug 06 09:20:47 CST 2013.
    -->
    delete from BNES_ANSWER_INFO
    where ANSWER_INFO_ID = #answerInfoId:DECIMAL#
  </delete>
  <delete id="abatorgenerated_deleteByExample" parameterClass="com.pltfm.app.vobject.BnesAnswerInfoExample" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Aug 06 09:20:47 CST 2013.
    -->
    delete from BNES_ANSWER_INFO
    <include refid="BNES_ANSWER_INFO.abatorgenerated_Example_Where_Clause" />
  </delete>
  <insert id="abatorgenerated_insert" parameterClass="com.pltfm.app.vobject.BnesAnswerInfo" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Aug 06 09:20:47 CST 2013.
    -->
    
    <selectKey resultClass="java.lang.Integer" keyProperty="answerInfoId">
			select SEQ_APP_AUTHEN.nextval from dual
		</selectKey>
    
    insert into BNES_ANSWER_INFO (ANSWER_INFO_ID, SAFE_QUESTION_ID, ANSWER_CONTENT, CREATE_DATE,
      CREATED, MODIFY_DATE, MODIFIED, LOGIN_ID, ACCOUNT_ID)
    values (#answerInfoId:DECIMAL#, #safeQuestionId:DECIMAL#, #answerContent:VARCHAR#,
      #createDate:DATE#, #created:DECIMAL#, #modifyDate:DATE#, #modified:DECIMAL#,
      #loginId:DECIMAL#, #accountId:DECIMAL#)
  </insert>
  <update id="abatorgenerated_updateByPrimaryKey" parameterClass="com.pltfm.app.vobject.BnesAnswerInfo" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Aug 06 09:20:47 CST 2013.
    -->
    update BNES_ANSWER_INFO
    set SAFE_QUESTION_ID = #safeQuestionId:DECIMAL#,
      ANSWER_CONTENT = #answerContent:VARCHAR#,
      CREATE_DATE = #createDate:DATE#,
      CREATED = #created:DECIMAL#,
      MODIFY_DATE = #modifyDate:DATE#,
      MODIFIED = #modified:DECIMAL#,
      LOGIN_ID = #loginId:DECIMAL#,
      ACCOUNT_ID = #accountId:DECIMAL#
    where ANSWER_INFO_ID = #answerInfoId:DECIMAL#
  </update>
  <update id="abatorgenerated_updateByPrimaryKeySelective" parameterClass="com.pltfm.app.vobject.BnesAnswerInfo" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Aug 06 09:20:47 CST 2013.
    -->
    update BNES_ANSWER_INFO
    <dynamic prepend="set" >
      <isNotNull prepend="," property="safeQuestionId" >
        SAFE_QUESTION_ID = #safeQuestionId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="answerContent" >
        ANSWER_CONTENT = #answerContent:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="createDate" >
        CREATE_DATE = #createDate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="created" >
        CREATED = #created:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="modifyDate" >
        MODIFY_DATE = #modifyDate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="modified" >
        MODIFIED = #modified:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="loginId" >
        LOGIN_ID = #loginId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="accountId" >
        ACCOUNT_ID = #accountId:DECIMAL#
      </isNotNull>
    </dynamic>
    where ANSWER_INFO_ID = #answerInfoId:DECIMAL#
  </update>
  <select id="abatorgenerated_countByExample" parameterClass="com.pltfm.app.vobject.BnesAnswerInfoExample" resultClass="java.lang.Integer" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Aug 06 09:20:47 CST 2013.
    -->
    select count(*) from BNES_ANSWER_INFO
    <include refid="BNES_ANSWER_INFO.abatorgenerated_Example_Where_Clause" />
  </select>
  <update id="abatorgenerated_updateByExampleSelective" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Aug 06 09:20:47 CST 2013.
    -->
    update BNES_ANSWER_INFO
    <dynamic prepend="set" >
      <isNotNull prepend="," property="record.answerInfoId" >
        ANSWER_INFO_ID = #record.answerInfoId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.safeQuestionId" >
        SAFE_QUESTION_ID = #record.safeQuestionId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.answerContent" >
        ANSWER_CONTENT = #record.answerContent:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.createDate" >
        CREATE_DATE = #record.createDate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="record.created" >
        CREATED = #record.created:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.modifyDate" >
        MODIFY_DATE = #record.modifyDate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="record.modified" >
        MODIFIED = #record.modified:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.loginId" >
        LOGIN_ID = #record.loginId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.accountId" >
        ACCOUNT_ID = #record.accountId:DECIMAL#
      </isNotNull>
    </dynamic>
    <isParameterPresent >
      <include refid="BNES_ANSWER_INFO.abatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="abatorgenerated_updateByExample" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Aug 06 09:20:47 CST 2013.
    -->
    update BNES_ANSWER_INFO
    set ANSWER_INFO_ID = #record.answerInfoId:DECIMAL#,
      SAFE_QUESTION_ID = #record.safeQuestionId:DECIMAL#,
      ANSWER_CONTENT = #record.answerContent:VARCHAR#,
      CREATE_DATE = #record.createDate:DATE#,
      CREATED = #record.created:DECIMAL#,
      MODIFY_DATE = #record.modifyDate:DATE#,
      MODIFIED = #record.modified:DECIMAL#,
      LOGIN_ID = #record.loginId:DECIMAL#,
      ACCOUNT_ID = #record.accountId:DECIMAL#
    <isParameterPresent >
      <include refid="BNES_ANSWER_INFO.abatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  
  
   <!--  ****************  search page by vo  ****************  -->
  <select id="searchPageByVo" resultMap="abatorgenerated_BnesAnswerInfoResultOther" parameterClass="com.pltfm.app.vobject.BnesAnswerInfo">
		select ANSWER_INFO_ID, SAFE_QUESTION_ID, ANSWER_CONTENT, CREATE_DATE, CREATED, MODIFY_DATE,
      MODIFIED, LOGIN_ID, ACCOUNT_ID,LOGIN_ACCOUNT,NAME,ACCOUNT_LOGIN,QUESTION_NAME
     
    FROM (
    select  ROW_NUMBER() OVER(order by ANSWER_INFO_ID desc) as view_row_number, 
    bb.*,LOGIN_ACCOUNT,NAME,ACCOUNT_LOGIN,QUESTION_NAME
    from BNES_ANSWER_INFO bb,ACCOUNT_INFO tt,LOGIN_INFO ll,SAFE_QUESTION_INFO ss
    where bb.LOGIN_ID=ll.N_LOGIN_ID and ll.N_LOGIN_ID=tt.N_LOGIN_ID 
    and bb.ACCOUNT_ID=tt.N_ACCOUNT_ID
    and bb.SAFE_QUESTION_ID=ss.N_SAFE_QUESTION_ID
    
    <isNotNull property="safeQuestionId">
			  <isNotEmpty prepend="and" property="safeQuestionId">
				bb.SAFE_QUESTION_ID = #safeQuestionId:DECIMAL#
			  </isNotEmpty>
		  </isNotNull>
    
    <isNotNull property="accountLogin">
	  <isNotEmpty prepend="and" property="accountLogin">
		tt.ACCOUNT_LOGIN like '%$accountLogin$%'
	  </isNotEmpty>
    </isNotNull>
    
     <isNotNull property="loginAccount">
	  <isNotEmpty prepend="and" property="loginAccount">
		ll.LOGIN_ACCOUNT like '%$loginAccount$%'
	  </isNotEmpty>
    </isNotNull>
    
     <isNotNull property="name">
			  <isNotEmpty prepend="and" property="name">
				tt.NAME like '%$name$%'
			  </isNotEmpty>
      </isNotNull>
    )
    <![CDATA[ where view_row_number <= #max# and view_row_number > #skip# ]]>
	</select>
	
 <!-- **************** search user's roleList by vo  ****************  -->
  <select id="getAccountInfoCount" parameterClass="com.pltfm.app.vobject.BnesAnswerInfo" resultMap="ibatorgenerated_CountResult">
     select count(1) the_count from BNES_ANSWER_INFO bb,ACCOUNT_INFO tt,LOGIN_INFO ll,SAFE_QUESTION_INFO ss
    where bb.LOGIN_ID=ll.N_LOGIN_ID and ll.N_LOGIN_ID=tt.N_LOGIN_ID 
    and bb.ACCOUNT_ID=tt.N_ACCOUNT_ID
    and bb.SAFE_QUESTION_ID=ss.N_SAFE_QUESTION_ID
    
		  <isNotNull property="safeQuestionId">
			  <isNotEmpty prepend="and" property="safeQuestionId">
				bb.SAFE_QUESTION_ID = #safeQuestionId:DECIMAL#
			  </isNotEmpty>
		  </isNotNull>
    
    <isNotNull property="accountLogin">
	  <isNotEmpty prepend="and" property="accountLogin">
		tt.ACCOUNT_LOGIN like '%$accountLogin$%'
	  </isNotEmpty>
    </isNotNull>
    
     <isNotNull property="loginAccount">
	  <isNotEmpty prepend="and" property="loginAccount">
		ll.LOGIN_ACCOUNT like '%$loginAccount$%'
	  </isNotEmpty>
    </isNotNull>
    
     <isNotNull property="name">
			  <isNotEmpty prepend="and" property="name">
				tt.NAME like '%$name$%'
			  </isNotEmpty>
      </isNotNull>
		  
  </select>
  
</sqlMap>